{"remainingRequest":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\babel-loader\\lib\\index.js!D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\src\\mobviews\\MUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\src\\mobviews\\MUser.vue","mtime":1680953022130},{"path":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\babel.config.js","mtime":1680247913400},{"path":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":1678865247956},{"path":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1678865248335}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBzdG9yZSBmcm9tICJzdG9yZSI7CmNvbnN0IHRpcHNNYXAgPSB7CiAgbG9naW46ICLov5jmsqHms6jlhow/54K55oiR5rOo5YaMIiwKICByZWdpc3RlcjogIuW3sue7j+azqOWGjD/ngrnmiJHnmbvlvZUiLAogIGluZm86ICIiCn07CmNvbnN0IGFwaU1hcCA9IHsKICBpbmZvOiAiaW5mb01vZGlmeSIKfTsKY29uc3QgdGl0bGVNYXAgPSB7CiAgbG9naW46ICLnmbvlvZUiLAogIHJlZ2lzdGVyOiAi5rOo5YaMIiwKICBpbmZvOiAi5Liq5Lq65L+h5oGvIgp9Owpjb25zdCBidG5NYXAgPSB7CiAgbG9naW46ICLnmbvlvZUiLAogIHJlZ2lzdGVyOiAi5rOo5YaMIiwKICBpbmZvOiAi5L+u5pS5Igp9OwppbXBvcnQgTURpYWxvZ0Zvcm0gZnJvbSAiQC9tQ29tcG9uZW50cy9NRGlhbG9nRm9ybSI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBNRGlhbG9nRm9ybQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZpbGU6IFtdLAogICAgICBuZXdVUkw6ICIiLAogICAgICB0aXBUeXBlOiAiIiwKICAgICAgdHlwZTogIiIKICAgIH07CiAgfSwKICBwcm9wczogewogICAgc3RhdGU6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9CiAgfSwKICBtb3VudGVkKCkge30sCiAgbWV0aG9kczogewogICAgY2hhbmdlRm9ybSgpIHsKICAgICAgKHRoaXMudHlwZSB8fCB0aGlzLnN0YXRlKSA9PT0gImxvZ2luIiA/IHRoaXMudHlwZSA9ICJyZWdpc3RlciIgOiB0aGlzLnR5cGUgPSAibG9naW4iOwogICAgfSwKICAgIGFzeW5jIHN1Ym1pdE1lc3NhZ2UoKSB7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZm9ybVR5cGUsICJ4eHh4Iik7CiAgICAgIGlmICh0aGlzLmZvcm1UeXBlID09PSAibG9naW4iIHx8IHRoaXMuZm9ybVR5cGUgPT09ICJyZWdpc3RlciIpIHsKICAgICAgICBsZXQgZGF0YSA9IHRoaXMuJHJlZnNbImZvcm1XcmFwIl0uZm9ybTsKICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgdGhpcy4kaHR0cCh7CiAgICAgICAgICB0eXBlOiB0aGlzLmZvcm1UeXBlLAogICAgICAgICAgZGF0YTogZGF0YQogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCwgInh4eHgiKTsKICAgICAgICBpZiAocmVzdWx0LmRhdGEuZGF0YS50b2tlbikgewogICAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInNldFRva2VuIiwgcmVzdWx0LmRhdGEuZGF0YS50b2tlbik7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICJtQXJ0aWNsZXMiCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgLy8KICAgICAgaWYgKHRoaXMuZm9ybVR5cGUgPT09ICJpbmZvIikgewogICAgICAgIC8v5L+u5pS5CiAgICAgICAgY29uc29sZS5sb2coInhpdSBnYWkiKTsKICAgICAgICBsZXQgZGF0YSA9IHRoaXMuJHJlZnNbImZvcm1XcmFwIl0uZm9ybTsKICAgICAgICBhd2FpdCB0aGlzLiRodHRwKHsKICAgICAgICAgIHR5cGU6IGFwaU1hcFt0aGlzLmZvcm1UeXBlXSwKICAgICAgICAgIGRhdGEKICAgICAgICB9KTsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic2V0VG9rZW4iLCBzdG9yZS5nZXQoInRva2VuIikpOwogICAgICAgIC8vIGxldCByZXN1bHQgPSBhd2FpdCB0aGlzLiRodHRwKHsgdHlwZTogImluZm8iLCBkYXRhIH0pOwogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdDIsIjIyMjIyIik7CiAgICAgICAgLy8KICAgICAgfQogICAgfSwKCiAgICBhc3luYyBhZnRlclJlYWQoZmlsZSkgewogICAgICAvLyBjb25zb2xlLmxvZyhmaWxlLCIiLHRoaXMuZmlsZSk7CiAgICAgIHRoaXMubmV3VVJMID0gZmlsZS5jb250ZW50OwogICAgICB0cnkgewogICAgICAgIGxldCBkYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgZGF0YS5hcHBlbmQoImZpbGUiLCBmaWxlLmZpbGUpOwogICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCB0aGlzLiRodHRwKHsKICAgICAgICAgIHR5cGU6ICJwaG90byIsCiAgICAgICAgICBkYXRhCiAgICAgICAgfSk7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzdWx0LCAicmVzdWx0IHBob3RvIik7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInNldFRva2VuIiwgc3RvcmUuZ2V0KCJ0b2tlbiIpKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICB0aXBzKCkgewogICAgICByZXR1cm4gdGlwc01hcFt0aGlzLnR5cGUgfHwgdGhpcy5mb3JtVHlwZV07CiAgICB9LAogICAgZm9ybVR5cGUoKSB7CiAgICAgIHJldHVybiB0aGlzLnR5cGUgfHwgdGhpcy5zdGF0ZSA/IHRoaXMudHlwZSB8fCB0aGlzLnN0YXRlIDogImluZm8iOwogICAgfSwKICAgIHRpdGxlKCkgewogICAgICByZXR1cm4gdGl0bGVNYXBbdGhpcy50eXBlIHx8IHRoaXMuZm9ybVR5cGVdOwogICAgfSwKICAgIGJ0bk5hbWUoKSB7CiAgICAgIHJldHVybiBidG5NYXBbdGhpcy50eXBlIHx8IHRoaXMuZm9ybVR5cGVdOwogICAgfSwKICAgIHNyYygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvLmF2YXRhciA/IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvLmF2YXRhciA6ICJodHRwczovL2Zhc3RseS5qc2RlbGl2ci5uZXQvbnBtL0B2YW50L2Fzc2V0cy9jYXQuanBlZyI7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["store","tipsMap","login","register","info","apiMap","titleMap","btnMap","MDialogForm","components","data","file","newURL","tipType","type","props","state","String","mounted","methods","changeForm","submitMessage","console","log","formType","$refs","form","result","$http","token","$store","dispatch","$router","push","name","get","afterRead","content","FormData","append","error","computed","tips","title","btnName","src","userInfo","avatar"],"sources":["src/mobviews/MUser.vue"],"sourcesContent":["<!--\r\n * @Descripttion: \r\n * @version: \r\n * @Author: sueRimn\r\n * @Date: 2023-04-01 14:53:05\r\n * @LastEditors: sueRimn\r\n * @LastEditTime: 2023-04-08 19:23:42\r\n-->\r\n<template>\r\n  <div class=\"mblog-userInfo--wrap\">\r\n    <h2 class=\"mblog-userInfo--title\">{{ title }}</h2>\r\n    <div v-if=\"formType === 'info'\">\r\n      <van-uploader\r\n        v-model=\"file\"\r\n        :preview-image=\"false\"\r\n        :after-read=\"afterRead\"\r\n      >\r\n        <template>\r\n          <van-image\r\n            round\r\n            width=\"100\"\r\n            height=\"100\"\r\n            :src=\"newURL ? newURL : src\"\r\n          />\r\n        </template>\r\n      </van-uploader>\r\n    </div>\r\n    <div v-else>\r\n      <van-image\r\n        width=\"100\"\r\n        height=\"100\"\r\n        src=\"https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg\"\r\n      />\r\n    </div>\r\n    <MDialogForm :type=\"formType\" ref=\"formWrap\" />\r\n    <p @click=\"changeForm\">{{tips}}</p>\r\n    <van-button type=\"primary\" @click=\"submitMessage\">{{ btnName }}</van-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport store from \"store\"\r\nconst tipsMap = {\r\n  login: \"还没注册?点我注册\",\r\n  register: \"已经注册?点我登录\",\r\n  info: \"\"\r\n}\r\nconst apiMap = {\r\n  info: \"infoModify\"\r\n}\r\nconst titleMap = {\r\n  login: \"登录\",\r\n  register: \"注册\",\r\n  info: \"个人信息\",\r\n};\r\nconst btnMap = {\r\n  login: \"登录\",\r\n  register: \"注册\",\r\n  info: \"修改\",\r\n};\r\nimport MDialogForm from \"@/mComponents/MDialogForm\";\r\nexport default {\r\n  components: {\r\n    MDialogForm,\r\n  },\r\n  data() {\r\n    return {\r\n      file: [],\r\n      newURL: \"\",\r\n      tipType: \"\",\r\n      type: \"\"\r\n    };\r\n  },\r\n  props: {\r\n    state: {\r\n      type: String,\r\n    },\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    changeForm () {\r\n      (this.type || this.state) === \"login\" ? (this.type=\"register\") : (this.type=\"login\")\r\n    },\r\n    async submitMessage() {\r\n      console.log(this.formType, \"xxxx\");\r\n      if (this.formType === \"login\" || this.formType === \"register\") {\r\n        let data = this.$refs[\"formWrap\"].form;\r\n        let result = await this.$http({ type: this.formType, data: data });\r\n        console.log(result, \"xxxx\");\r\n        if (result.data.data.token) {\r\n          await this.$store.dispatch(\"setToken\", result.data.data.token);\r\n          this.$router.push({name: \"mArticles\"})\r\n        }\r\n      }\r\n      //\r\n      if (this.formType === \"info\") {\r\n        //修改\r\n        console.log(\"xiu gai\");\r\n        let data = this.$refs[\"formWrap\"].form\r\n        await this.$http({ type: apiMap[this.formType], data });\r\n        this.$store.dispatch(\"setToken\", store.get(\"token\"));\r\n        // let result = await this.$http({ type: \"info\", data });\r\n        // console.log(result2,\"22222\");\r\n        //\r\n      }\r\n    },\r\n    async afterRead(file) {\r\n      // console.log(file,\"\",this.file);\r\n      this.newURL = file.content;\r\n      try {\r\n        let data = new FormData();\r\n        data.append(\"file\", file.file);\r\n        let result = await this.$http({ type: \"photo\", data });\r\n        // console.log(result, \"result photo\");\r\n        this.$store.dispatch(\"setToken\", store.get(\"token\"));\r\n        \r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    tips() {\r\n      return tipsMap[this.type || this.formType]\r\n    },\r\n    formType() {\r\n      return this.type || this.state ? this.type || this.state : \"info\";\r\n    },\r\n    title() {\r\n      return titleMap[this.type || this.formType];\r\n    },\r\n    btnName() {\r\n      return btnMap[this.type || this.formType];\r\n    },\r\n    src() {\r\n      return this.$store.state.userInfo.avatar\r\n        ? this.$store.state.userInfo.avatar\r\n        : \"https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" >\r\n.mblog-userInfo--wrap {\r\n  height: calc(100vh - 110px);\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n}\r\n\r\n.mblog-userInfo--title {\r\n  width: 30%;\r\n  background-color: #fff;\r\n  padding: 4px 10px;\r\n}\r\n</style>"],"mappings":";AAyCA,OAAAA,KAAA;AACA,MAAAC,OAAA;EACAC,KAAA;EACAC,QAAA;EACAC,IAAA;AACA;AACA,MAAAC,MAAA;EACAD,IAAA;AACA;AACA,MAAAE,QAAA;EACAJ,KAAA;EACAC,QAAA;EACAC,IAAA;AACA;AACA,MAAAG,MAAA;EACAL,KAAA;EACAC,QAAA;EACAC,IAAA;AACA;AACA,OAAAI,WAAA;AACA;EACAC,UAAA;IACAD;EACA;EACAE,KAAA;IACA;MACAC,IAAA;MACAC,MAAA;MACAC,OAAA;MACAC,IAAA;IACA;EACA;EACAC,KAAA;IACAC,KAAA;MACAF,IAAA,EAAAG;IACA;EACA;EACAC,QAAA;EACAC,OAAA;IACAC,WAAA;MACA,MAAAN,IAAA,SAAAE,KAAA,qBAAAF,IAAA,qBAAAA,IAAA;IACA;IACA,MAAAO,cAAA;MACAC,OAAA,CAAAC,GAAA,MAAAC,QAAA;MACA,SAAAA,QAAA,qBAAAA,QAAA;QACA,IAAAd,IAAA,QAAAe,KAAA,aAAAC,IAAA;QACA,IAAAC,MAAA,cAAAC,KAAA;UAAAd,IAAA,OAAAU,QAAA;UAAAd,IAAA,EAAAA;QAAA;QACAY,OAAA,CAAAC,GAAA,CAAAI,MAAA;QACA,IAAAA,MAAA,CAAAjB,IAAA,CAAAA,IAAA,CAAAmB,KAAA;UACA,WAAAC,MAAA,CAAAC,QAAA,aAAAJ,MAAA,CAAAjB,IAAA,CAAAA,IAAA,CAAAmB,KAAA;UACA,KAAAG,OAAA,CAAAC,IAAA;YAAAC,IAAA;UAAA;QACA;MACA;MACA;MACA,SAAAV,QAAA;QACA;QACAF,OAAA,CAAAC,GAAA;QACA,IAAAb,IAAA,QAAAe,KAAA,aAAAC,IAAA;QACA,WAAAE,KAAA;UAAAd,IAAA,EAAAT,MAAA,MAAAmB,QAAA;UAAAd;QAAA;QACA,KAAAoB,MAAA,CAAAC,QAAA,aAAA/B,KAAA,CAAAmC,GAAA;QACA;QACA;QACA;MACA;IACA;;IACA,MAAAC,UAAAzB,IAAA;MACA;MACA,KAAAC,MAAA,GAAAD,IAAA,CAAA0B,OAAA;MACA;QACA,IAAA3B,IAAA,OAAA4B,QAAA;QACA5B,IAAA,CAAA6B,MAAA,SAAA5B,IAAA,CAAAA,IAAA;QACA,IAAAgB,MAAA,cAAAC,KAAA;UAAAd,IAAA;UAAAJ;QAAA;QACA;QACA,KAAAoB,MAAA,CAAAC,QAAA,aAAA/B,KAAA,CAAAmC,GAAA;MAEA,SAAAK,KAAA;QACAlB,OAAA,CAAAC,GAAA,CAAAiB,KAAA;MACA;IACA;EACA;EACAC,QAAA;IACAC,KAAA;MACA,OAAAzC,OAAA,MAAAa,IAAA,SAAAU,QAAA;IACA;IACAA,SAAA;MACA,YAAAV,IAAA,SAAAE,KAAA,QAAAF,IAAA,SAAAE,KAAA;IACA;IACA2B,MAAA;MACA,OAAArC,QAAA,MAAAQ,IAAA,SAAAU,QAAA;IACA;IACAoB,QAAA;MACA,OAAArC,MAAA,MAAAO,IAAA,SAAAU,QAAA;IACA;IACAqB,IAAA;MACA,YAAAf,MAAA,CAAAd,KAAA,CAAA8B,QAAA,CAAAC,MAAA,GACA,KAAAjB,MAAA,CAAAd,KAAA,CAAA8B,QAAA,CAAAC,MAAA,GACA;IACA;EACA;AACA"}]}