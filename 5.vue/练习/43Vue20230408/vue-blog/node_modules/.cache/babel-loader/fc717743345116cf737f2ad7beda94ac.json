{"remainingRequest":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\babel-loader\\lib\\index.js!D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\src\\views\\Live2D.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\src\\views\\Live2D.vue","mtime":1680083674758},{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\babel.config.js","mtime":1678865839779},{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":1678865247956},{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1678865248335}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IExpdmUyZCBmcm9tICJAL3N0YXRpYy9saXZlMmQiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgc3RvcmUgZnJvbSAic3RvcmUiOwpjb25zdCBMSVZFMkRfTU9ERUxfTkFNRSA9ICJpbmZvX2xpdmUyZCI7CmNvbnN0IEdFVF9VUkwgPSAiaHR0cHM6Ly9saXZlMmQuZmdocnNoLm5ldC9hcGkvZ2V0LyI7CmNvbnN0IE1PREVMX1VSTCA9ICJodHRwOi8vYXBpLmZnaHJzaC5uZXQvbGl2ZTJkL3N3aXRjaC8iOwpjb25zdCBURVhUVVJFU19VUkwgPSAiaHR0cHM6Ly9hcGkuZmdocnNoLm5ldC9saXZlMmQvcmFuZF90ZXh0dXJlcy8iOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1vZGVsSWQ6IDEsCiAgICAgIHRleHR1cmVzSWQ6IDAKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZGlyZWN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZGlyZWN0aW9uIHx8ICJsZWZ0IjsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXREYXRhKCk7CiAgICB0aGlzLnN0YXJ0TG9hZEdpcmwoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGNoYW5nZU1vZGVsKCkgewogICAgICB0cnkgewogICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCBheGlvcy5nZXQoYCR7TU9ERUxfVVJMfT9pZD0ke3RoaXMubW9kZWxJZH1gKTsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXN1bHQuZGF0YS5tb2RlbC5pZCwieHh4MSIpOwogICAgICAgIHRoaXMubW9kZWxJZCA9IHJlc3VsdC5kYXRhLm1vZGVsLmlkOwogICAgICAgIHRoaXMuc3RhcnRMb2FkR2lybCgpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCLliIfmjaLmqKHlnovlh7rplJkiKTsKICAgICAgICB0aGlzLm1vZGVsSWQgPSA2OwogICAgICAgIHRoaXMuc3RhcnRMb2FkR2lybCgpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgY2hhbmdlQ2xvdGhlcygpIHsKICAgICAgdHJ5IHsKICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgYXhpb3MuZ2V0KGAke1RFWFRVUkVTX1VSTH0/aWQ9JHt0aGlzLm1vZGVsSWR9YCk7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzdWx0LCJ4eHgyIik7CiAgICAgICAgdGhpcy50ZXh0dXJlc0lkID0gcmVzdWx0LmRhdGEudGV4dHVyZXMuaWQ7CiAgICAgICAgdGhpcy5zdGFydExvYWRHaXJsKCk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coIuWIh+aNouiho+acjeWHuumUmSIpOwogICAgICAgIHRoaXMudGV4dHVyZXNJZCA9IDY7CiAgICAgICAgdGhpcy5zdGFydExvYWRHaXJsKCk7CiAgICAgIH0KICAgIH0sCiAgICBzdGFydExvYWRHaXJsKCkgewogICAgICBjb25zb2xlLmxvZygi5riy5p+TY2FudmFzIik7CiAgICAgIC8vIHRoaXMuaW5pdERhdGEoKQogICAgICBsb2FkbGl2ZTJkKCJsaXZlMmQiLCBgJHtHRVRfVVJMfT9pZD0ke3RoaXMubW9kZWxJZH0tJHt0aGlzLnRleHR1cmVzSWR9YCk7CiAgICAgIHN0b3JlLnNldChMSVZFMkRfTU9ERUxfTkFNRSwgewogICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZCwKICAgICAgICB0ZXh0dXJlc0lkOiB0aGlzLnRleHR1cmVzSWQKICAgICAgfSk7CiAgICB9LAogICAgaW5pdERhdGEoKSB7CiAgICAgIGxldCB7CiAgICAgICAgbW9kZWxJZCwKICAgICAgICB0ZXh0dXJlc0lkCiAgICAgIH0gPSBzdG9yZS5nZXQoTElWRTJEX01PREVMX05BTUUpOwogICAgICBtb2RlbElkID8gdGhpcy5tb2RlbElkID0gbW9kZWxJZCA6IHRpaHMubW9kZWxJZCA9IDE7CiAgICAgIHRleHR1cmVzSWQgPyB0aGlzLnRleHR1cmVzSWQgPSB0ZXh0dXJlc0lkIDogdGhpcy50ZXh0dXJlc0lkID0gMDsKICAgIH0KICB9Cn07"},{"version":3,"names":["Live2d","axios","store","LIVE2D_MODEL_NAME","GET_URL","MODEL_URL","TEXTURES_URL","data","modelId","texturesId","computed","direction","$store","state","mounted","initData","startLoadGirl","methods","changeModel","result","get","model","id","error","console","log","changeClothes","textures","loadlive2d","set","tihs"],"sources":["src/views/Live2D.vue"],"sourcesContent":["<!--\r\n * @Descripttion: \r\n * @version: \r\n * @Author: sueRimn\r\n * @Date: 2023-03-28 15:10:14\r\n * @LastEditors: sueRimn\r\n * @LastEditTime: 2023-03-28 15:59:43\r\n-->\r\n<template>\r\n  <div class=\"live2d-wrap\" :class=\"direction\">\r\n    <div class=\"live-operate\">\r\n      <i class=\"el-icon-refresh-right\" @click=\"changeModel\"></i>\r\n      <i class=\"el-icon-arrow-down\" @click=\"changeClothes\"></i>\r\n    </div>\r\n    <canvas id=\"live2d\" width=\"300\" height=\"500\"> </canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Live2d from \"@/static/live2d\";\r\nimport axios from \"axios\";\r\nimport store from \"store\";\r\nconst LIVE2D_MODEL_NAME = \"info_live2d\";\r\nconst GET_URL = \"https://live2d.fghrsh.net/api/get/\";\r\nconst MODEL_URL = \"http://api.fghrsh.net/live2d/switch/\";\r\nconst TEXTURES_URL = \"https://api.fghrsh.net/live2d/rand_textures/\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      modelId: 1,\r\n      texturesId: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    direction () {\r\n      return this.$store.state.direction || \"left\"\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initData();\r\n    this.startLoadGirl();\r\n  },\r\n\r\n  methods: {\r\n    async changeModel() {\r\n      try {\r\n        let result = await axios.get(`${MODEL_URL}?id=${this.modelId}`);\r\n        // console.log(result.data.model.id,\"xxx1\");\r\n        this.modelId = result.data.model.id;\r\n        this.startLoadGirl();\r\n      } catch (error) {\r\n        console.log(\"切换模型出错\");\r\n        this.modelId = 6\r\n        this.startLoadGirl();\r\n      }\r\n    },\r\n    async changeClothes() {\r\n      try {\r\n        let result = await axios.get(`${TEXTURES_URL}?id=${this.modelId}`);\r\n        // console.log(result,\"xxx2\");\r\n        this.texturesId = result.data.textures.id;\r\n        this.startLoadGirl();\r\n      } catch (error) {\r\n        console.log(\"切换衣服出错\");\r\n        this.texturesId = 6\r\n        this.startLoadGirl();\r\n      }\r\n    },\r\n    startLoadGirl() {\r\n      console.log(\"渲染canvas\");\r\n      // this.initData()\r\n      loadlive2d(\"live2d\", `${GET_URL}?id=${this.modelId}-${this.texturesId}`);\r\n      store.set(LIVE2D_MODEL_NAME, {\r\n        modelId: this.modelId,\r\n        texturesId: this.texturesId,\r\n      });\r\n    },\r\n    initData() {\r\n      let { modelId, texturesId } = store.get(LIVE2D_MODEL_NAME);\r\n      modelId ? (this.modelId = modelId) : (tihs.modelId = 1);\r\n      texturesId ? (this.texturesId = texturesId) : (this.texturesId = 0);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n.live2d-wrap {\r\n  position: fixed;\r\n  width: 300px;\r\n  height: 500px;\r\n  bottom: 10px;\r\n  &:hover .live-operate {\r\n    display: flex;\r\n  }\r\n}\r\n.live2d-wrap.left {\r\n  left: 20px;\r\n}\r\n.live2d-wrap.right {\r\n  right: 20px\r\n}\r\n.live-operate {\r\n  display: none;\r\n  position: absolute;\r\n  left: 44px;\r\n  bottom: 210px;\r\n  font-size: 20px;\r\n  color: #000;\r\n  flex-direction: column;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n\r\n  & i {\r\n    margin: 4px;\r\n    cursor: pointer;\r\n  }\r\n}\r\n</style>"],"mappings":"AAmBA,OAAAA,MAAA;AACA,OAAAC,KAAA;AACA,OAAAC,KAAA;AACA,MAAAC,iBAAA;AACA,MAAAC,OAAA;AACA,MAAAC,SAAA;AACA,MAAAC,YAAA;AACA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,UAAA;IACA;EACA;EACAC,QAAA;IACAC,UAAA;MACA,YAAAC,MAAA,CAAAC,KAAA,CAAAF,SAAA;IACA;EACA;EACAG,QAAA;IACA,KAAAC,QAAA;IACA,KAAAC,aAAA;EACA;EAEAC,OAAA;IACA,MAAAC,YAAA;MACA;QACA,IAAAC,MAAA,SAAAlB,KAAA,CAAAmB,GAAA,IAAAf,SAAA,YAAAG,OAAA;QACA;QACA,KAAAA,OAAA,GAAAW,MAAA,CAAAZ,IAAA,CAAAc,KAAA,CAAAC,EAAA;QACA,KAAAN,aAAA;MACA,SAAAO,KAAA;QACAC,OAAA,CAAAC,GAAA;QACA,KAAAjB,OAAA;QACA,KAAAQ,aAAA;MACA;IACA;IACA,MAAAU,cAAA;MACA;QACA,IAAAP,MAAA,SAAAlB,KAAA,CAAAmB,GAAA,IAAAd,YAAA,YAAAE,OAAA;QACA;QACA,KAAAC,UAAA,GAAAU,MAAA,CAAAZ,IAAA,CAAAoB,QAAA,CAAAL,EAAA;QACA,KAAAN,aAAA;MACA,SAAAO,KAAA;QACAC,OAAA,CAAAC,GAAA;QACA,KAAAhB,UAAA;QACA,KAAAO,aAAA;MACA;IACA;IACAA,cAAA;MACAQ,OAAA,CAAAC,GAAA;MACA;MACAG,UAAA,cAAAxB,OAAA,YAAAI,OAAA,SAAAC,UAAA;MACAP,KAAA,CAAA2B,GAAA,CAAA1B,iBAAA;QACAK,OAAA,OAAAA,OAAA;QACAC,UAAA,OAAAA;MACA;IACA;IACAM,SAAA;MACA;QAAAP,OAAA;QAAAC;MAAA,IAAAP,KAAA,CAAAkB,GAAA,CAAAjB,iBAAA;MACAK,OAAA,QAAAA,OAAA,GAAAA,OAAA,GAAAsB,IAAA,CAAAtB,OAAA;MACAC,UAAA,QAAAA,UAAA,GAAAA,UAAA,QAAAA,UAAA;IACA;EACA;AACA"}]}