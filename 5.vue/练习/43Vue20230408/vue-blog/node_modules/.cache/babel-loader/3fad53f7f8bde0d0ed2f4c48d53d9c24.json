{"remainingRequest":"D:\\十字波\\五.vue框架\\练习\\43Vue20230408\\vue-blog\\node_modules\\babel-loader\\lib\\index.js!D:\\十字波\\五.vue框架\\练习\\43Vue20230408\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\十字波\\五.vue框架\\练习\\43Vue20230408\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\十字波\\五.vue框架\\练习\\43Vue20230408\\vue-blog\\src\\mobviews\\MUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\十字波\\五.vue框架\\练习\\43Vue20230408\\vue-blog\\src\\mobviews\\MUser.vue","mtime":1681010940903},{"path":"D:\\十字波\\五.vue框架\\练习\\43Vue20230408\\vue-blog\\babel.config.js","mtime":1681107480818},{"path":"D:\\十字波\\五.vue框架\\练习\\43Vue20230408\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\43Vue20230408\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":1678865247956},{"path":"D:\\十字波\\五.vue框架\\练习\\43Vue20230408\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\43Vue20230408\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1678865248335}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBzdG9yZSBmcm9tICJzdG9yZSI7CmNvbnN0IHRpcHNNYXAgPSB7CiAgbG9naW46ICLov5jmsqHms6jlhow/54K55oiR5rOo5YaMIiwKICByZWdpc3RlcjogIuW3sue7j+azqOWGjD/ngrnmiJHnmbvlvZUiLAogIGluZm86ICIiCn07CmNvbnN0IGFwaU1hcCA9IHsKICBpbmZvOiAiaW5mb01vZGlmeSIKfTsKY29uc3QgdGl0bGVNYXAgPSB7CiAgbG9naW46ICLnmbvlvZUiLAogIHJlZ2lzdGVyOiAi5rOo5YaMIiwKICBpbmZvOiAi5Liq5Lq65L+h5oGvIgp9Owpjb25zdCBidG5NYXAgPSB7CiAgbG9naW46ICLnmbvlvZUiLAogIHJlZ2lzdGVyOiAi5rOo5YaMIiwKICBpbmZvOiAi5L+u5pS5Igp9OwppbXBvcnQgTURpYWxvZ0Zvcm0gZnJvbSAiQC9tQ29tcG9uZW50cy9NRGlhbG9nRm9ybSI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBNRGlhbG9nRm9ybQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZpbGU6IFtdLAogICAgICBuZXdVUkw6ICIiLAogICAgICB0aXBUeXBlOiAiIiwKICAgICAgdHlwZTogIiIKICAgIH07CiAgfSwKICBwcm9wczogewogICAgc3RhdGU6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9CiAgfSwKICBtb3VudGVkKCkge30sCiAgbWV0aG9kczogewogICAgbG9nb3V0TW9iKCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiY2xlYXJVc2VyIiwgewogICAgICAgIHR5cGU6IDEKICAgICAgfSk7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAibUFydGljbGVzIgogICAgICB9KTsKICAgIH0sCiAgICBjaGFuZ2VGb3JtKCkgewogICAgICAodGhpcy50eXBlIHx8IHRoaXMuc3RhdGUpID09PSAibG9naW4iID8gdGhpcy50eXBlID0gInJlZ2lzdGVyIiA6IHRoaXMudHlwZSA9ICJsb2dpbiI7CiAgICB9LAogICAgYXN5bmMgc3VibWl0TWVzc2FnZSgpIHsKICAgICAgY29uc29sZS5sb2codGhpcy5mb3JtVHlwZSwgInh4eHgiKTsKICAgICAgaWYgKHRoaXMuZm9ybVR5cGUgPT09ICJsb2dpbiIgfHwgdGhpcy5mb3JtVHlwZSA9PT0gInJlZ2lzdGVyIikgewogICAgICAgIGxldCBkYXRhID0gdGhpcy4kcmVmc1siZm9ybVdyYXAiXS5mb3JtOwogICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCB0aGlzLiRodHRwKHsKICAgICAgICAgIHR5cGU6IHRoaXMuZm9ybVR5cGUsCiAgICAgICAgICBkYXRhOiBkYXRhCiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0LCAieHh4eCIpOwogICAgICAgIGlmIChyZXN1bHQuZGF0YS5kYXRhLnRva2VuKSB7CiAgICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic2V0VG9rZW4iLCByZXN1bHQuZGF0YS5kYXRhLnRva2VuKTsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogIm1BcnRpY2xlcyIKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgICAvLwogICAgICBpZiAodGhpcy5mb3JtVHlwZSA9PT0gImluZm8iKSB7CiAgICAgICAgLy/kv67mlLkKICAgICAgICBjb25zb2xlLmxvZygieGl1IGdhaSIpOwogICAgICAgIGxldCBkYXRhID0gdGhpcy4kcmVmc1siZm9ybVdyYXAiXS5mb3JtOwogICAgICAgIGF3YWl0IHRoaXMuJGh0dHAoewogICAgICAgICAgdHlwZTogYXBpTWFwW3RoaXMuZm9ybVR5cGVdLAogICAgICAgICAgZGF0YQogICAgICAgIH0pOwogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJzZXRUb2tlbiIsIHN0b3JlLmdldCgidG9rZW4iKSk7CiAgICAgICAgLy8gbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMuJGh0dHAoeyB0eXBlOiAiaW5mbyIsIGRhdGEgfSk7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzdWx0MiwiMjIyMjIiKTsKICAgICAgICAvLwogICAgICB9CiAgICB9LAoKICAgIGFzeW5jIGFmdGVyUmVhZChmaWxlKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKGZpbGUsIiIsdGhpcy5maWxlKTsKICAgICAgdGhpcy5uZXdVUkwgPSBmaWxlLmNvbnRlbnQ7CiAgICAgIHRyeSB7CiAgICAgICAgbGV0IGRhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICBkYXRhLmFwcGVuZCgiZmlsZSIsIGZpbGUuZmlsZSk7CiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMuJGh0dHAoewogICAgICAgICAgdHlwZTogInBob3RvIiwKICAgICAgICAgIGRhdGEKICAgICAgICB9KTsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXN1bHQsICJyZXN1bHQgcGhvdG8iKTsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic2V0VG9rZW4iLCBzdG9yZS5nZXQoInRva2VuIikpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHRpcHMoKSB7CiAgICAgIHJldHVybiB0aXBzTWFwW3RoaXMudHlwZSB8fCB0aGlzLmZvcm1UeXBlXTsKICAgIH0sCiAgICBmb3JtVHlwZSgpIHsKICAgICAgcmV0dXJuIHRoaXMudHlwZSB8fCB0aGlzLnN0YXRlID8gdGhpcy50eXBlIHx8IHRoaXMuc3RhdGUgOiAiaW5mbyI7CiAgICB9LAogICAgdGl0bGUoKSB7CiAgICAgIHJldHVybiB0aXRsZU1hcFt0aGlzLnR5cGUgfHwgdGhpcy5mb3JtVHlwZV07CiAgICB9LAogICAgYnRuTmFtZSgpIHsKICAgICAgcmV0dXJuIGJ0bk1hcFt0aGlzLnR5cGUgfHwgdGhpcy5mb3JtVHlwZV07CiAgICB9LAogICAgc3JjKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8uYXZhdGFyID8gdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8uYXZhdGFyIDogImh0dHBzOi8vZmFzdGx5LmpzZGVsaXZyLm5ldC9ucG0vQHZhbnQvYXNzZXRzL2NhdC5qcGVnIjsKICAgIH0KICB9Cn07"},{"version":3,"names":["store","tipsMap","login","register","info","apiMap","titleMap","btnMap","MDialogForm","components","data","file","newURL","tipType","type","props","state","String","mounted","methods","logoutMob","$store","dispatch","$router","push","name","changeForm","submitMessage","console","log","formType","$refs","form","result","$http","token","get","afterRead","content","FormData","append","error","computed","tips","title","btnName","src","userInfo","avatar"],"sources":["src/mobviews/MUser.vue"],"sourcesContent":["<!--\r\n * @Descripttion: \r\n * @version: \r\n * @Author: sueRimn\r\n * @Date: 2023-04-01 14:53:05\r\n * @LastEditors: sueRimn\r\n * @LastEditTime: 2023-04-09 11:29:00\r\n-->\r\n<template>\r\n  <div class=\"mblog-userInfo--wrap\">\r\n    <h2 class=\"mblog-userInfo--title\">{{ title }}</h2>\r\n    <div v-if=\"formType === 'info'\">\r\n      <van-uploader\r\n        v-model=\"file\"\r\n        :preview-image=\"false\"\r\n        :after-read=\"afterRead\"\r\n      >\r\n        <template>\r\n          <van-image\r\n            round\r\n            width=\"100\"\r\n            height=\"100\"\r\n            :src=\"newURL ? newURL : src\"\r\n          />\r\n        </template>\r\n      </van-uploader>\r\n    </div>\r\n    <div v-else>\r\n      <van-image\r\n        width=\"100\"\r\n        height=\"100\"\r\n        src=\"https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg\"\r\n      />\r\n    </div>\r\n    <MDialogForm :type=\"formType\" ref=\"formWrap\" />\r\n    <p @click=\"changeForm\">{{ tips }}</p>\r\n    <div classs=\"mblog-btns--wrap\">\r\n      <van-button type=\"primary\" @click=\"submitMessage\">{{\r\n        btnName\r\n      }}</van-button>\r\n      <van-button type=\"warning\" v-if=\"formType === 'info'\" @click=\"logoutMob\">登出</van-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport store from \"store\";\r\nconst tipsMap = {\r\n  login: \"还没注册?点我注册\",\r\n  register: \"已经注册?点我登录\",\r\n  info: \"\",\r\n};\r\nconst apiMap = {\r\n  info: \"infoModify\",\r\n};\r\nconst titleMap = {\r\n  login: \"登录\",\r\n  register: \"注册\",\r\n  info: \"个人信息\",\r\n};\r\nconst btnMap = {\r\n  login: \"登录\",\r\n  register: \"注册\",\r\n  info: \"修改\",\r\n};\r\nimport MDialogForm from \"@/mComponents/MDialogForm\";\r\nexport default {\r\n  components: {\r\n    MDialogForm,\r\n  },\r\n  data() {\r\n    return {\r\n      file: [],\r\n      newURL: \"\",\r\n      tipType: \"\",\r\n      type: \"\",\r\n    };\r\n  },\r\n  props: {\r\n    state: {\r\n      type: String,\r\n    },\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    logoutMob() {\r\n      this.$store.dispatch(\"clearUser\",{type: 1})\r\n      this.$router.push({name: \"mArticles\"})\r\n    },\r\n    changeForm() {\r\n      (this.type || this.state) === \"login\"\r\n        ? (this.type = \"register\")\r\n        : (this.type = \"login\");\r\n    },\r\n    async submitMessage() {\r\n      console.log(this.formType, \"xxxx\");\r\n      if (this.formType === \"login\" || this.formType === \"register\") {\r\n        let data = this.$refs[\"formWrap\"].form;\r\n        let result = await this.$http({ type: this.formType, data: data });\r\n        console.log(result, \"xxxx\");\r\n        if (result.data.data.token) {\r\n          await this.$store.dispatch(\"setToken\", result.data.data.token);\r\n          this.$router.push({ name: \"mArticles\" });\r\n        }\r\n      }\r\n      //\r\n      if (this.formType === \"info\") {\r\n        //修改\r\n        console.log(\"xiu gai\");\r\n        let data = this.$refs[\"formWrap\"].form;\r\n        await this.$http({ type: apiMap[this.formType], data });\r\n        this.$store.dispatch(\"setToken\", store.get(\"token\"));\r\n        // let result = await this.$http({ type: \"info\", data });\r\n        // console.log(result2,\"22222\");\r\n        //\r\n      }\r\n    },\r\n    async afterRead(file) {\r\n      // console.log(file,\"\",this.file);\r\n      this.newURL = file.content;\r\n      try {\r\n        let data = new FormData();\r\n        data.append(\"file\", file.file);\r\n        let result = await this.$http({ type: \"photo\", data });\r\n        // console.log(result, \"result photo\");\r\n        this.$store.dispatch(\"setToken\", store.get(\"token\"));\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    tips() {\r\n      return tipsMap[this.type || this.formType];\r\n    },\r\n    formType() {\r\n      return this.type || this.state ? this.type || this.state : \"info\";\r\n    },\r\n    title() {\r\n      return titleMap[this.type || this.formType];\r\n    },\r\n    btnName() {\r\n      return btnMap[this.type || this.formType];\r\n    },\r\n    src() {\r\n      return this.$store.state.userInfo.avatar\r\n        ? this.$store.state.userInfo.avatar\r\n        : \"https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" >\r\n.mblog-userInfo--wrap {\r\n  height: calc(100vh - 110px);\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n}\r\n\r\n.mblog-userInfo--title {\r\n  width: 30%;\r\n  background-color: #fff;\r\n  padding: 4px 10px;\r\n}\r\n.van-button--normal\r\n  padding: 0px 36px\r\n</style>"],"mappings":";AA8CA,OAAAA,KAAA;AACA,MAAAC,OAAA;EACAC,KAAA;EACAC,QAAA;EACAC,IAAA;AACA;AACA,MAAAC,MAAA;EACAD,IAAA;AACA;AACA,MAAAE,QAAA;EACAJ,KAAA;EACAC,QAAA;EACAC,IAAA;AACA;AACA,MAAAG,MAAA;EACAL,KAAA;EACAC,QAAA;EACAC,IAAA;AACA;AACA,OAAAI,WAAA;AACA;EACAC,UAAA;IACAD;EACA;EACAE,KAAA;IACA;MACAC,IAAA;MACAC,MAAA;MACAC,OAAA;MACAC,IAAA;IACA;EACA;EACAC,KAAA;IACAC,KAAA;MACAF,IAAA,EAAAG;IACA;EACA;EACAC,QAAA;EACAC,OAAA;IACAC,UAAA;MACA,KAAAC,MAAA,CAAAC,QAAA;QAAAR,IAAA;MAAA;MACA,KAAAS,OAAA,CAAAC,IAAA;QAAAC,IAAA;MAAA;IACA;IACAC,WAAA;MACA,MAAAZ,IAAA,SAAAE,KAAA,gBACA,KAAAF,IAAA,gBACA,KAAAA,IAAA;IACA;IACA,MAAAa,cAAA;MACAC,OAAA,CAAAC,GAAA,MAAAC,QAAA;MACA,SAAAA,QAAA,qBAAAA,QAAA;QACA,IAAApB,IAAA,QAAAqB,KAAA,aAAAC,IAAA;QACA,IAAAC,MAAA,cAAAC,KAAA;UAAApB,IAAA,OAAAgB,QAAA;UAAApB,IAAA,EAAAA;QAAA;QACAkB,OAAA,CAAAC,GAAA,CAAAI,MAAA;QACA,IAAAA,MAAA,CAAAvB,IAAA,CAAAA,IAAA,CAAAyB,KAAA;UACA,WAAAd,MAAA,CAAAC,QAAA,aAAAW,MAAA,CAAAvB,IAAA,CAAAA,IAAA,CAAAyB,KAAA;UACA,KAAAZ,OAAA,CAAAC,IAAA;YAAAC,IAAA;UAAA;QACA;MACA;MACA;MACA,SAAAK,QAAA;QACA;QACAF,OAAA,CAAAC,GAAA;QACA,IAAAnB,IAAA,QAAAqB,KAAA,aAAAC,IAAA;QACA,WAAAE,KAAA;UAAApB,IAAA,EAAAT,MAAA,MAAAyB,QAAA;UAAApB;QAAA;QACA,KAAAW,MAAA,CAAAC,QAAA,aAAAtB,KAAA,CAAAoC,GAAA;QACA;QACA;QACA;MACA;IACA;;IACA,MAAAC,UAAA1B,IAAA;MACA;MACA,KAAAC,MAAA,GAAAD,IAAA,CAAA2B,OAAA;MACA;QACA,IAAA5B,IAAA,OAAA6B,QAAA;QACA7B,IAAA,CAAA8B,MAAA,SAAA7B,IAAA,CAAAA,IAAA;QACA,IAAAsB,MAAA,cAAAC,KAAA;UAAApB,IAAA;UAAAJ;QAAA;QACA;QACA,KAAAW,MAAA,CAAAC,QAAA,aAAAtB,KAAA,CAAAoC,GAAA;MACA,SAAAK,KAAA;QACAb,OAAA,CAAAC,GAAA,CAAAY,KAAA;MACA;IACA;EACA;EACAC,QAAA;IACAC,KAAA;MACA,OAAA1C,OAAA,MAAAa,IAAA,SAAAgB,QAAA;IACA;IACAA,SAAA;MACA,YAAAhB,IAAA,SAAAE,KAAA,QAAAF,IAAA,SAAAE,KAAA;IACA;IACA4B,MAAA;MACA,OAAAtC,QAAA,MAAAQ,IAAA,SAAAgB,QAAA;IACA;IACAe,QAAA;MACA,OAAAtC,MAAA,MAAAO,IAAA,SAAAgB,QAAA;IACA;IACAgB,IAAA;MACA,YAAAzB,MAAA,CAAAL,KAAA,CAAA+B,QAAA,CAAAC,MAAA,GACA,KAAA3B,MAAA,CAAAL,KAAA,CAAA+B,QAAA,CAAAC,MAAA,GACA;IACA;EACA;AACA"}]}