{"remainingRequest":"D:\\十字波\\五.vue框架\\练习\\23Vue20230315\\vue-blog\\node_modules\\babel-loader\\lib\\index.js!D:\\十字波\\五.vue框架\\练习\\23Vue20230315\\vue-blog\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\十字波\\五.vue框架\\练习\\23Vue20230315\\vue-blog\\src\\http\\common\\interceptor.js","dependencies":[{"path":"D:\\十字波\\五.vue框架\\练习\\23Vue20230315\\vue-blog\\src\\http\\common\\interceptor.js","mtime":1679050642613},{"path":"D:\\十字波\\五.vue框架\\练习\\23Vue20230315\\vue-blog\\babel.config.js","mtime":1678865839779},{"path":"D:\\十字波\\五.vue框架\\练习\\23Vue20230315\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\23Vue20230315\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":1678865247956},{"path":"D:\\十字波\\五.vue框架\\练习\\23Vue20230315\\vue-blog\\node_modules\\eslint-loader\\index.js","mtime":1678865247185}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHN0b3JlIGZyb20gInN0b3JlIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IGIgZnJvbSAiQC9jb25maWcvaHR0cC5jb25maWciOwpsZXQgewogIFRPS0VOX05BTUUsCiAgUkVTVElNRQp9ID0gYjsKY29uc3QgY29kZU1hcCA9IHsKICAiNDAxIjogIuaXoOadg+mZkOeZu+W9lSIKfTsKZnVuY3Rpb24gZ2V0VG9rZW4oKSB7CiAgcmV0dXJuIHN0b3JlLmdldChUT0tFTl9OQU1FKTsKfQpheGlvcy5kZWZhdWx0cy5iYXNlVVJMID0gJ2h0dHA6Ly8xMjcuMC4wLjE6MzAwMCc7CmF4aW9zLmRlZmF1bHRzLnRpbWVvdXQgPSBSRVNUSU1FOwpsZXQgaW5zdGFuY2UgPSBheGlvcy5jcmVhdGUoKTsKaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGFzeW5jIGNvbmZpZyA9PiB7CiAgaWYgKHN0b3JlLmdldChUT0tFTl9OQU1FKSkgewogICAgY29uZmlnLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IGdldFRva2VuKCk7CiAgfQogIC8vcmVzdOWPguaVsOabv+aNogogIGlmIChyZXN0KSB7CiAgICB2YXIgX2NvbmZpZyRwYXJhbXM7CiAgICBsZXQgaWQgPSBjb25maWcgPT09IG51bGwgfHwgY29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2NvbmZpZyRwYXJhbXMgPSBjb25maWcucGFyYW1zKSA9PT0gbnVsbCB8fCBfY29uZmlnJHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NvbmZpZyRwYXJhbXMuaWQ7CiAgICAvLyBpZiAodHlwZSA9PSAiY2xhc3NpZnkiKSB7CiAgICAvLyAgIGlkID0gc3RvcmUuZ2V0KCJ1aWQiKQogICAgLy8gfQogICAgY29uc29sZS5sb2coaWQsICJJRCIsIGNvbmZpZyk7CiAgICBjb25zb2xlLmxvZyhjb25maWcudXJsLCAidXJsMSIpOwogICAgY29uZmlnLnVybCA9IGNvbmZpZy51cmwucmVwbGFjZSgvOi4qJC8sIGlkKTsKICAgIGNvbnNvbGUubG9nKGNvbmZpZy51cmwsICJ1cmwxIik7CiAgfQogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwppbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKHJlc3BvbnNlID0+IHsKICByZXR1cm4gcmVzcG9uc2U7Cn0sIGVycm9yID0+IHsKICB2YXIgX2Vycm9yJHJlc3BvbnNlLCBfZGF0YTsKICBpZiAoYXV0bykgewogICAgY29uc29sZS5sb2coIuS4jei/m+ihjOaYvuekuuaKpemUmSIpOwogICAgcmV0dXJuOwogIH0KICBsZXQgZGF0YSA9IGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2Vycm9yJHJlc3BvbnNlID0gZXJyb3IucmVzcG9uc2UpID09PSBudWxsIHx8IF9lcnJvciRyZXNwb25zZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Vycm9yJHJlc3BvbnNlLmRhdGE7CiAgaWYgKCgoX2RhdGEgPSBkYXRhKSA9PT0gbnVsbCB8fCBfZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RhdGEuY29kZSkgaW4gY29kZU1hcCkgewogICAgZGF0YS5tZXNzYWdlID0gY29kZU1hcFtkYXRhLmNvZGVdOwogIH0KICBkYXRhID0gewogICAgLi4uZGF0YSwKICAgIHR5cGU6ICJkYW5nZXIiCiAgfTsKICBjb25zb2xlLmxvZygi5aSx6LSl5LqG5o2PIik7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmV4cG9ydCBkZWZhdWx0IGluc3RhbmNlOw=="},{"version":3,"names":["store","axios","b","TOKEN_NAME","RESTIME","codeMap","getToken","get","defaults","baseURL","timeout","instance","create","interceptors","request","use","config","headers","rest","_config$params","id","params","console","log","url","replace","error","Promise","reject","response","_error$response","_data","auto","data","code","message","type"],"sources":["D:/十字波/五.vue框架/练习/23Vue20230315/vue-blog/src/http/common/interceptor.js"],"sourcesContent":["import store from \"store\"\r\nimport axios from \"axios\"\r\nimport b from \"@/config/http.config\"\r\nlet {TOKEN_NAME,RESTIME} = b\r\nconst codeMap = {\r\n  \"401\": \"无权限登录\"\r\n}\r\nfunction getToken() {\r\n  return store.get(TOKEN_NAME)\r\n}\r\naxios.defaults.baseURL = 'http://127.0.0.1:3000'\r\naxios.defaults.timeout = RESTIME\r\nlet instance = axios.create()\r\ninstance.interceptors.request.use(async (config) => {\r\n  if (store.get(TOKEN_NAME)) {\r\n    config.headers['Authorization'] = getToken()\r\n  }\r\n  //rest参数替换\r\n  if (rest) {\r\n    let id = config?.params?.id\r\n    // if (type == \"classify\") {\r\n    //   id = store.get(\"uid\")\r\n    // }\r\n    console.log(id, \"ID\", config);\r\n    console.log(config.url, \"url1\");\r\n    config.url = config.url.replace(/:.*$/, id)\r\n    console.log(config.url, \"url1\");\r\n  }\r\n  return config;\r\n}, function (error) {\r\n  return Promise.reject(error);\r\n});\r\ninstance.interceptors.response.use((response) => {\r\n  return response;\r\n}, (error) => {\r\n  if (auto) {\r\n    console.log(\"不进行显示报错\");\r\n    return\r\n  }\r\n  let data = error?.response?.data\r\n  if (data?.code in codeMap) {\r\n    data.message = codeMap[data.code]\r\n  }\r\n  data = { ...data, type: \"danger\" }\r\n  console.log(\"失败了捏\");\r\n  return Promise.reject(error);\r\n});\r\nexport default instance"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,CAAC,MAAM,sBAAsB;AACpC,IAAI;EAACC,UAAU;EAACC;AAAO,CAAC,GAAGF,CAAC;AAC5B,MAAMG,OAAO,GAAG;EACd,KAAK,EAAE;AACT,CAAC;AACD,SAASC,QAAQA,CAAA,EAAG;EAClB,OAAON,KAAK,CAACO,GAAG,CAACJ,UAAU,CAAC;AAC9B;AACAF,KAAK,CAACO,QAAQ,CAACC,OAAO,GAAG,uBAAuB;AAChDR,KAAK,CAACO,QAAQ,CAACE,OAAO,GAAGN,OAAO;AAChC,IAAIO,QAAQ,GAAGV,KAAK,CAACW,MAAM,EAAE;AAC7BD,QAAQ,CAACE,YAAY,CAACC,OAAO,CAACC,GAAG,CAAC,MAAOC,MAAM,IAAK;EAClD,IAAIhB,KAAK,CAACO,GAAG,CAACJ,UAAU,CAAC,EAAE;IACzBa,MAAM,CAACC,OAAO,CAAC,eAAe,CAAC,GAAGX,QAAQ,EAAE;EAC9C;EACA;EACA,IAAIY,IAAI,EAAE;IAAA,IAAAC,cAAA;IACR,IAAIC,EAAE,GAAGJ,MAAM,aAANA,MAAM,wBAAAG,cAAA,GAANH,MAAM,CAAEK,MAAM,cAAAF,cAAA,uBAAdA,cAAA,CAAgBC,EAAE;IAC3B;IACA;IACA;IACAE,OAAO,CAACC,GAAG,CAACH,EAAE,EAAE,IAAI,EAAEJ,MAAM,CAAC;IAC7BM,OAAO,CAACC,GAAG,CAACP,MAAM,CAACQ,GAAG,EAAE,MAAM,CAAC;IAC/BR,MAAM,CAACQ,GAAG,GAAGR,MAAM,CAACQ,GAAG,CAACC,OAAO,CAAC,MAAM,EAAEL,EAAE,CAAC;IAC3CE,OAAO,CAACC,GAAG,CAACP,MAAM,CAACQ,GAAG,EAAE,MAAM,CAAC;EACjC;EACA,OAAOR,MAAM;AACf,CAAC,EAAE,UAAUU,KAAK,EAAE;EAClB,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CAAC,CAAC;AACFf,QAAQ,CAACE,YAAY,CAACgB,QAAQ,CAACd,GAAG,CAAEc,QAAQ,IAAK;EAC/C,OAAOA,QAAQ;AACjB,CAAC,EAAGH,KAAK,IAAK;EAAA,IAAAI,eAAA,EAAAC,KAAA;EACZ,IAAIC,IAAI,EAAE;IACRV,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;IACtB;EACF;EACA,IAAIU,IAAI,GAAGP,KAAK,aAALA,KAAK,wBAAAI,eAAA,GAALJ,KAAK,CAAEG,QAAQ,cAAAC,eAAA,uBAAfA,eAAA,CAAiBG,IAAI;EAChC,IAAI,EAAAF,KAAA,GAAAE,IAAI,cAAAF,KAAA,uBAAJA,KAAA,CAAMG,IAAI,KAAI7B,OAAO,EAAE;IACzB4B,IAAI,CAACE,OAAO,GAAG9B,OAAO,CAAC4B,IAAI,CAACC,IAAI,CAAC;EACnC;EACAD,IAAI,GAAG;IAAE,GAAGA,IAAI;IAAEG,IAAI,EAAE;EAAS,CAAC;EAClCd,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;EACnB,OAAOI,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CAAC,CAAC;AACF,eAAef,QAAQ"}]}