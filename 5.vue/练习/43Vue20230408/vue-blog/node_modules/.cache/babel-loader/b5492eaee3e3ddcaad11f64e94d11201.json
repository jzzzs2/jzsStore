{"remainingRequest":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\thread-loader\\dist\\cjs.js!D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\babel-loader\\lib\\index.js!D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\src\\components\\article\\OperateBar.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\src\\components\\article\\OperateBar.vue","mtime":1679993556139},{"path":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\babel.config.js","mtime":1680247913400},{"path":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":1678865247956},{"path":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1678865248335}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBtaXhpbiBmcm9tICJAL2NvbmZpZy9taXhpbi5jb25maWcuanMiOwppbXBvcnQgeyBjcmVhdGVOYW1lc3BhY2VkSGVscGVycyB9IGZyb20gInZ1ZXgiOwpsZXQgewogIG1hcEdldHRlcnMsCiAgbWFwQWN0aW9ucwp9ID0gY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMoImhpdHMiKTsKZXhwb3J0IGRlZmF1bHQgewogIG1peGluczogW21peGluXSwKICBwcm9wczogewogICAgaW5mbzogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGFpZDogIiIKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyBpc0FjdGl2ZTogZmFsc2UsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGlzQWN0aXZlOiB7CiAgICAgIGdldCgpIHsKICAgICAgICB2YXIgX3RoaXMkaXNfaGl0czsKICAgICAgICByZXR1cm4gKF90aGlzJGlzX2hpdHMgPSB0aGlzLmlzX2hpdHMoKSkgPT09IG51bGwgfHwgX3RoaXMkaXNfaGl0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkaXNfaGl0cyh0aGlzLmFpZCk7CiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMkJHJvdXRlJHBhcmFtczsKICAgIGxldCBhaWQgPSAoX3RoaXMkJHJvdXRlJHBhcmFtcyA9IHRoaXMuJHJvdXRlLnBhcmFtcykgPT09IG51bGwgfHwgX3RoaXMkJHJvdXRlJHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkJHJvdXRlJHBhcmFtcy5pZDsKICAgIHRoaXMuYWlkID0gYWlkOwogICAgdGhpcy5zZXRBcnRpY2xlUG9zaXRpb24oKTsKICAgIC8vIHRoaXMuaXNBY3RpdmUgPSB0aGlzLmlzX2hpdHMoKShhaWQpOwogIH0sCgogIG1vdW50ZWQoKSB7CiAgICAvLyBjb25zb2xlLmxvZygi5pON5L2c5qCP5riy5p+T5a6M5q+VIik7CiAgICAvLyB0aGlzLiRidXMuJG9uKCJ1cCIsdGhpcy51cCkKICAgIC8vIHRoaXMuJGJ1cy4kb24oImRvd24iLHRoaXMuZG93bikKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWyJwdXNoQXJ0aWNsZSIsICJwdWxsQXJ0aWNsZSIsICJzZXRBcnRpY2xlUG9zaXRpb24iXSksCiAgICAuLi5tYXBHZXR0ZXJzKFsiaXNfaGl0cyJdKSwKICAgIGhhbmRsZUNvbW1lbnQoKSB7CiAgICAgIHRoaXMuJGJ1cy4kZW1pdCgib3BlcmF0ZUZvY3VzIik7CiAgICB9LAogICAgYXN5bmMganVtcFRvT3BlcmF0ZSgpIHsKICAgICAgaWYgKHRoaXMuaW5mby50eXBlID09PSAic3RhciIpIHsKICAgICAgICAvL+i/m+ihjOeCuei1nuaTjeS9nAogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaXNBY3RpdmUsICJpc0FjdGl2ZSIpOwogICAgICAgIHRoaXMuaXNBY3RpdmUgPyB0aGlzLiRidXMuJGVtaXQoImRvd24iKSA6IHRoaXMuJGJ1cy4kZW1pdCgidXAiKTsKICAgICAgICBsZXQganVkZ2UgPSAhdGhpcy5pc0FjdGl2ZTsKICAgICAgICBsZXQgYWlkID0gdGhpcy5haWQ7CiAgICAgICAgY29uc29sZS5sb2coImNsaWNrIik7CiAgICAgICAgLy8gdGhpcy5pc0FjdGl2ZT90aGlzLnN0ZXAtPTE6dGhpcy5zdGVwKz0xCiAgICAgICAganVkZ2UgPyB0aGlzLnB1c2hBcnRpY2xlKHsKICAgICAgICAgIGFpZAogICAgICAgIH0pIDogdGhpcy5wdWxsQXJ0aWNsZSh7CiAgICAgICAgICBhaWQKICAgICAgICB9KTsKICAgICAgICAvL+aTjeS9nOaVsOaNruW6kwogICAgICAgIGxldCByZXN1bHQgPSBudWxsOwogICAgICAgIGp1ZGdlID8gcmVzdWx0ID0gYXdhaXQgdGhpcy4kaHR0cCh7CiAgICAgICAgICB0eXBlOiAibGlrZU9wZXJhdGUiLAogICAgICAgICAgZGF0YTogewogICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICBpc0FkZDogdHJ1ZSwKICAgICAgICAgICAgICBpZDogYWlkCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KSA6IHJlc3VsdCA9IGF3YWl0IHRoaXMuJGh0dHAoewogICAgICAgICAgdHlwZTogImxpa2VPcGVyYXRlIiwKICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgaXNBZGQ6IGZhbHNlLAogICAgICAgICAgICAgIGlkOiBhaWQKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCwgInh4eCIpOwogICAgICAgIGNvbnNvbGUubG9nKCLngrnotZ4iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuaW5mby5jYWxsTW9kZWwpIHsKICAgICAgICAvL+WPrOWUpG1peGluCiAgICAgICAgdGhpcy5zaG93TW9kYWwodGhpcy5pbmZvLmNhbGxNb2RlbCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0aGlzLmluZm8ubmFtZSkgewogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaW5mby5uYW1lLCAibmFtZSIpOwogICAgICAgIHRoaXNbdGhpcy5pbmZvLm5hbWVdKCk7CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLmluZm8ucm91dGUpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdGhpcy4kcm91dGVyLnB1c2godGhpcy5pbmZvLnJvdXRlKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["mixin","createNamespacedHelpers","mapGetters","mapActions","mixins","props","info","type","Object","aid","data","computed","isActive","get","_this$is_hits","is_hits","created","_this$$route$params","$route","params","id","setArticlePosition","mounted","methods","handleComment","$bus","$emit","jumpToOperate","console","log","judge","pushArticle","pullArticle","result","$http","isAdd","callModel","showModal","name","route","$router","push"],"sources":["src/components/article/OperateBar.vue"],"sourcesContent":["<!--\r\n * @Descripttion: \r\n * @version: \r\n * @Author: sueRimn\r\n * @Date: 2023-03-21 16:27:39\r\n * @LastEditors: sueRimn\r\n * @LastEditTime: 2023-03-28 16:52:36\r\n-->\r\n<template>\r\n  <div\r\n    class=\"blog-route-operate\"\r\n    @click=\"jumpToOperate\"\r\n    :class=\"{ active: isActive && info.type === 'star' }\"\r\n  >\r\n    <i :class=\"info.icon\"></i>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport mixin from \"@/config/mixin.config.js\";\r\nimport { createNamespacedHelpers } from \"vuex\";\r\nlet { mapGetters, mapActions } = createNamespacedHelpers(\"hits\");\r\nexport default {\r\n  mixins: [mixin],\r\n  props: {\r\n    info: {\r\n      type: Object,\r\n      aid: \"\"\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      // isActive: false,\r\n    };\r\n  },\r\n  computed: {\r\n    isActive:{\r\n      get() {\r\n        return this.is_hits()?.(this.aid)\r\n      },\r\n    }\r\n  },\r\n  created() {\r\n    let aid = this.$route.params?.id;\r\n    this.aid = aid\r\n    this.setArticlePosition();\r\n    // this.isActive = this.is_hits()(aid);\r\n  },\r\n  mounted() {\r\n    // console.log(\"操作栏渲染完毕\");\r\n    // this.$bus.$on(\"up\",this.up)\r\n    // this.$bus.$on(\"down\",this.down)\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\"pushArticle\", \"pullArticle\", \"setArticlePosition\"]),\r\n    ...mapGetters([\"is_hits\"]),\r\n    handleComment() {\r\n      this.$bus.$emit(\"operateFocus\");\r\n    },\r\n    async jumpToOperate() {\r\n      if (this.info.type === \"star\") {\r\n        //进行点赞操作\r\n        console.log(this.isActive,\"isActive\");\r\n        this.isActive?this.$bus.$emit(\"down\"):this.$bus.$emit(\"up\")\r\n        let judge = !this.isActive\r\n        let aid = this.aid;\r\n        console.log(\"click\");\r\n        // this.isActive?this.step-=1:this.step+=1\r\n        judge ? this.pushArticle({ aid }) : this.pullArticle({ aid });\r\n        //操作数据库\r\n        let result = null;\r\n        judge\r\n          ? (result = await this.$http({\r\n              type: \"likeOperate\",\r\n              data: { params: { isAdd: true, id: aid } },\r\n            }))\r\n          : (result = await this.$http({\r\n              type: \"likeOperate\",\r\n              data: { params: { isAdd: false, id: aid } },\r\n            }));\r\n        console.log(result, \"xxx\");\r\n        console.log(\"点赞\");\r\n        return;\r\n      }\r\n      if (this.info.callModel) {\r\n        //召唤mixin\r\n        this.showModal(this.info.callModel);\r\n        return;\r\n      }\r\n      if (this.info.name) {\r\n        console.log(this.info.name, \"name\");\r\n        this[this.info.name]();\r\n      }\r\n      if (!this.info.route) {\r\n        return false;\r\n      }\r\n      this.$router.push(this.info.route);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.blog-route-operate {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 60px;\r\n  height: 60px;\r\n  background-color: #fff;\r\n  border: 1px solid #ccc;\r\n  margin-top: 10px;\r\n  cursor: pointer;\r\n\r\n  & i {\r\n    font-size: 20px;\r\n  }\r\n}\r\n\r\n.active {\r\n  background-color: cyan;\r\n  color: #fff;\r\n  border: none;\r\n}\r\n</style>"],"mappings":";AAmBA,OAAAA,KAAA;AACA,SAAAC,uBAAA;AACA;EAAAC,UAAA;EAAAC;AAAA,IAAAF,uBAAA;AACA;EACAG,MAAA,GAAAJ,KAAA;EACAK,KAAA;IACAC,IAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,GAAA;IACA;EACA;EACAC,KAAA;IACA;MACA;IAAA,CACA;EACA;EACAC,QAAA;IACAC,QAAA;MACAC,IAAA;QAAA,IAAAC,aAAA;QACA,QAAAA,aAAA,QAAAC,OAAA,gBAAAD,aAAA,uBAAAA,aAAA,MAAAL,GAAA;MACA;IACA;EACA;EACAO,QAAA;IAAA,IAAAC,mBAAA;IACA,IAAAR,GAAA,IAAAQ,mBAAA,QAAAC,MAAA,CAAAC,MAAA,cAAAF,mBAAA,uBAAAA,mBAAA,CAAAG,EAAA;IACA,KAAAX,GAAA,GAAAA,GAAA;IACA,KAAAY,kBAAA;IACA;EACA;;EACAC,QAAA;IACA;IACA;IACA;EAAA,CACA;EAEAC,OAAA;IACA,GAAApB,UAAA;IACA,GAAAD,UAAA;IACAsB,cAAA;MACA,KAAAC,IAAA,CAAAC,KAAA;IACA;IACA,MAAAC,cAAA;MACA,SAAArB,IAAA,CAAAC,IAAA;QACA;QACAqB,OAAA,CAAAC,GAAA,MAAAjB,QAAA;QACA,KAAAA,QAAA,QAAAa,IAAA,CAAAC,KAAA,gBAAAD,IAAA,CAAAC,KAAA;QACA,IAAAI,KAAA,SAAAlB,QAAA;QACA,IAAAH,GAAA,QAAAA,GAAA;QACAmB,OAAA,CAAAC,GAAA;QACA;QACAC,KAAA,QAAAC,WAAA;UAAAtB;QAAA,UAAAuB,WAAA;UAAAvB;QAAA;QACA;QACA,IAAAwB,MAAA;QACAH,KAAA,GACAG,MAAA,cAAAC,KAAA;UACA3B,IAAA;UACAG,IAAA;YAAAS,MAAA;cAAAgB,KAAA;cAAAf,EAAA,EAAAX;YAAA;UAAA;QACA,KACAwB,MAAA,cAAAC,KAAA;UACA3B,IAAA;UACAG,IAAA;YAAAS,MAAA;cAAAgB,KAAA;cAAAf,EAAA,EAAAX;YAAA;UAAA;QACA;QACAmB,OAAA,CAAAC,GAAA,CAAAI,MAAA;QACAL,OAAA,CAAAC,GAAA;QACA;MACA;MACA,SAAAvB,IAAA,CAAA8B,SAAA;QACA;QACA,KAAAC,SAAA,MAAA/B,IAAA,CAAA8B,SAAA;QACA;MACA;MACA,SAAA9B,IAAA,CAAAgC,IAAA;QACAV,OAAA,CAAAC,GAAA,MAAAvB,IAAA,CAAAgC,IAAA;QACA,UAAAhC,IAAA,CAAAgC,IAAA;MACA;MACA,UAAAhC,IAAA,CAAAiC,KAAA;QACA;MACA;MACA,KAAAC,OAAA,CAAAC,IAAA,MAAAnC,IAAA,CAAAiC,KAAA;IACA;EACA;AACA"}]}