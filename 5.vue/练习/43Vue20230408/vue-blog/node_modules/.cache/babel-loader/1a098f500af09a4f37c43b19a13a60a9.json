{"remainingRequest":"D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\node_modules\\babel-loader\\lib\\index.js!D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\src\\mComponents\\MModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\src\\mComponents\\MModal.vue","mtime":1680861428754},{"path":"D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\babel.config.js","mtime":1681107480818},{"path":"D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":1678865247956},{"path":"D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1678865248335}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IHsgaW8gfSBmcm9tICJzb2NrZXQuaW8tY2xpZW50IjsKaW1wb3J0IE1EaWFsb2dGb3JtIGZyb20gIkAvbUNvbXBvbmVudHMvTURpYWxvZ0Zvcm0udnVlIjsKaW1wb3J0IGZvcm1EYXRhcyBmcm9tICJAL2NvbmZpZy9tb2RhbC5jb25maWcuanMiOwovLyBpbXBvcnQgSW5wdXREYXRhcyBmcm9tICJAL2NvbmZpZy9mb3JtRGF0YXMuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgTURpYWxvZ0Zvcm0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc1Nob3c6IGZhbHNlCiAgICB9OwogIH0sCiAgcHJvcHM6IHsKICAgIHR5cGU6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLy8gaW5wdXRzICgpIHsKICAgIC8vICAgcmV0dXJuIElucHV0RGF0YXM/Llt0aGlzLnR5cGVdCiAgICAvLyB9LAogICAgdGl0bGUoKSB7CiAgICAgIHJldHVybiB0aGlzLnR5cGUgPyBmb3JtRGF0YXNbdGhpcy50eXBlXS50aXRsZSA6ICIiOwogICAgfSwKICAgIGZvcm1EYXRhKCkgewogICAgICByZXR1cm4gdGhpcy50eXBlID8gZm9ybURhdGFzW3RoaXMudHlwZV0uZm9ybURhdGEgOiAiIjsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLiRidXMuJG9uKCJzZXREaWFsb2dTaG93IiwgdGhpcy5zZXRTaG93KTsKICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLiRidXMuJG9mZigic2V0RGlhbG9nU2hvdyIsIHRoaXMuc2V0U2hvdyk7CiAgfSwKICBtb3VudGVkKCkge30sCiAgbWV0aG9kczogewogICAgcmVnaXN0ZXIoKSB7CiAgICAgIHRoaXMuaXNTaG93ID0gZmFsc2U7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAibVVzZXIiLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBzdGF0ZTogInJlZ2lzdGVyIgogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc2V0U2hvdygpIHsKICAgICAgdGhpcy5pc1Nob3cgPSB0cnVlOwogICAgfSwKICAgIGFzeW5jIGJlZm9yZUNsb3NlKGFjdGlvbiwgZG9uZSkgewogICAgICBjb25zb2xlLmxvZyhhY3Rpb24sICJhY3Rpb24iKTsKICAgICAgY29uc29sZS5sb2coIuaPkOS6pCIpOwogICAgICBpZiAoYWN0aW9uID09PSAiY29uZmlybSIpIHsKICAgICAgICBsZXQgZm9ybURhdGEgPSB0aGlzLiRyZWZzWyJmb3JtV3JhcCJdLmZvcm07CiAgICAgICAgbGV0IGZvcm0gPSB0aGlzLiRyZWZzWyJmb3JtV3JhcCJdLiRyZWZzWyJmb3JtIl07CiAgICAgICAgZm9ybS52YWxpZGF0ZSgpLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMuJGh0dHAoewogICAgICAgICAgICAgIHR5cGU6IHRoaXMudHlwZSwKICAgICAgICAgICAgICBkYXRhOiBmb3JtRGF0YQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZG9uZSgpOwogICAgICAgICAgICBpZiAocmVzdWx0LmRhdGEuZGF0YS50b2tlbikgewogICAgICAgICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJzZXRUb2tlbiIsIHJlc3VsdC5kYXRhLmRhdGEudG9rZW4pOwogICAgICAgICAgICAgIGxldCBzb2NrZXRVc2VyID0gaW8ocHJvY2Vzcy5lbnZbIlZVRV9BUFBfU09DS0VUX1VSTCJdLCB7CiAgICAgICAgICAgICAgICB0cmFuc3BvcnRzOiBbIndlYnNvY2tldCJdCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgc29ja2V0VXNlci5vbigiY29ubmVjdCIsICgpID0+IHsKICAgICAgICAgICAgICAgIFZ1ZS5wcm90b3R5cGUuJHNvY2tldCA9IHNvY2tldFVzZXI7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhWdWUucHJvdG90eXBlLiRzb2NrZXQsICJ4eHggdnVlIHNvY2tldCIpOwogICAgICAgICAgICAgICAgVnVlLnByb3RvdHlwZS4kb3duID0gZmFsc2U7CiAgICAgICAgICAgICAgICBzb2NrZXRVc2VyLmVtaXQoImxvZ2luVXNlciIsIHsKICAgICAgICAgICAgICAgICAgbmlja25hbWU6IHJlc3VsdC5kYXRhLmRhdGEubmlja25hbWUsCiAgICAgICAgICAgICAgICAgIHVpZDogcmVzdWx0LmRhdGEuZGF0YVsiX2lkIl0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgc29ja2V0VXNlci5vbigiZGlzY29ubmVjdCIsICgpID0+IHsKICAgICAgICAgICAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCJjbGVhckNoYXRTb2NrZXQiKTsKICAgICAgICAgICAgICAgICAgaWYgKFZ1ZS5wcm90b3R5cGUuJG93bikgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJjbGVhclVzZXIiLCB7CiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAxCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImNsZWFyVXNlciIsIHsKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IDAKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCgiL20iKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT09ICJjbGFzc2lmeUFkZCIpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygi6Kem5Y+R5LiA5qyh5o+Q5LqkIik7CiAgICAgICAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCJmbGFzaENsYXNzaWZ5Iik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9ybS5yZXNldFZhbGlkYXRpb24oKTsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goIm1vZGFsL2Nsb3NlTW9kYWwiKTsKICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIHZhciBfZXJyb3IkcmVzcG9uc2UsIF9lcnJvciRyZXNwb25zZSRkYXRhOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlcnJvciwgImVycm9yIik7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLmuIXpmaTooajljZXmjY8iKTsKICAgICAgICAgICAgdGhpcy4kcmVmc1siZm9ybVdyYXAiXS5mb3JtID0ge307CiAgICAgICAgICAgIGZvcm0ucmVzZXRWYWxpZGF0aW9uKCk7CiAgICAgICAgICAgIGRvbmUoZmFsc2UpOwogICAgICAgICAgICBsZXQgbWVzc2FnZSA9IGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2Vycm9yJHJlc3BvbnNlID0gZXJyb3IucmVzcG9uc2UpID09PSBudWxsIHx8IF9lcnJvciRyZXNwb25zZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9lcnJvciRyZXNwb25zZSRkYXRhID0gX2Vycm9yJHJlc3BvbnNlLmRhdGEpID09PSBudWxsIHx8IF9lcnJvciRyZXNwb25zZSRkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXJyb3IkcmVzcG9uc2UkZGF0YS5tZXNzYWdlOwogICAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICAgIHRpdGxlOiAi6K2m5ZGKIiwKICAgICAgICAgICAgICBtZXNzYWdlLAogICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIgogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZm9ybS5yZXNldFZhbGlkYXRpb24oKTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgZG9uZShmYWxzZSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZG9uZSgpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["Vue","io","MDialogForm","formDatas","components","data","isShow","props","type","String","computed","title","formData","created","$bus","$on","setShow","beforeDestroy","$off","mounted","methods","register","$router","push","name","query","state","beforeClose","action","done","console","log","$refs","form","validate","then","result","$http","token","$store","dispatch","socketUser","process","env","transports","on","prototype","$socket","$own","emit","nickname","uid","$emit","router","resetValidation","error","_error$response","_error$response$data","message","response","$notify","catch","err"],"sources":["src/mComponents/MModal.vue"],"sourcesContent":["<!--\r\n * @Descripttion: \r\n * @version: \r\n * @Author: sueRimn\r\n * @Date: 2023-04-04 16:07:17\r\n * @LastEditors: sueRimn\r\n * @LastEditTime: 2023-04-07 17:57:08\r\n-->\r\n<!--\r\n * @Descripttion: \r\n * @version: \r\n * @Author: sueRimn\r\n * @Date: 2023-04-04 16:07:17\r\n * @LastEditors: sueRimn\r\n * @LastEditTime: 2023-04-04 16:16:19\r\n-->\r\n<template>\r\n  <div>\r\n    <van-dialog\r\n      v-model=\"isShow\"\r\n      :title=\"title\"\r\n      show-cancel-button\r\n      :beforeClose=\"beforeClose\"\r\n    >\r\n      \r\n      <MDialogForm :type=\"type\" ref=\"formWrap\" />\r\n      <van-tag style=\"display:block;text-align:right;\" text-color=\"green\" @click=\"register\" class=\"mblog-btn-regis\">注册</van-tag>\r\n      <!-- <van-form>\r\n        <van-cell-group inset>\r\n          <van-field\r\n            v-model=\"form.username\"\r\n            name=\"用户名\"\r\n            label=\"用户名\"\r\n            placeholder=\"用户名\"\r\n            :rules=\"[{ required: true, message: '请填写用户名' }]\"\r\n          />\r\n          <van-field\r\n            v-model=\"form.password\"\r\n            type=\"password\"\r\n            name=\"密码\"\r\n            label=\"密码\"\r\n            placeholder=\"密码\"\r\n            :rules=\"[{ required: true, message: '请填写密码' }]\"\r\n          />\r\n        </van-cell-group>\r\n      </van-form> -->\r\n    </van-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from \"vue\";\r\nimport { io } from \"socket.io-client\";\r\nimport MDialogForm from \"@/mComponents/MDialogForm.vue\";\r\nimport formDatas from \"@/config/modal.config.js\";\r\n// import InputDatas from \"@/config/formDatas.js\";\r\nexport default {\r\n  components: {\r\n    MDialogForm,\r\n  },\r\n  data() {\r\n    return {\r\n      isShow: false,\r\n    };\r\n  },\r\n  props: {\r\n    type: {\r\n      type: String,\r\n    },\r\n  },\r\n  computed: {\r\n    // inputs () {\r\n    //   return InputDatas?.[this.type]\r\n    // },\r\n    title() {\r\n      return this.type ? formDatas[this.type].title : \"\";\r\n    },\r\n    formData() {\r\n      return this.type ? formDatas[this.type].formData : \"\";\r\n    },\r\n  },\r\n  created() {\r\n    this.$bus.$on(\"setDialogShow\", this.setShow);\r\n  },\r\n  beforeDestroy() {\r\n    this.$bus.$off(\"setDialogShow\", this.setShow);\r\n  },\r\n\r\n  mounted() {},\r\n\r\n  methods: {\r\n    register () {\r\n      this.isShow = false\r\n      this.$router.push({name: \"mUser\",query: {state: \"register\"}})\r\n    },\r\n    setShow() {\r\n      this.isShow = true;\r\n    },\r\n    async beforeClose(action, done) {\r\n      console.log(action, \"action\");\r\n      console.log(\"提交\");\r\n      if (action === \"confirm\") {\r\n        let formData = this.$refs[\"formWrap\"].form;\r\n        let form = this.$refs[\"formWrap\"].$refs[\"form\"];\r\n        form\r\n          .validate()\r\n          .then(async () => {\r\n            try {\r\n              let result = await this.$http({\r\n                type: this.type,\r\n                data: formData,\r\n              });\r\n              done();\r\n              if (result.data.data.token) {\r\n                await this.$store.dispatch(\"setToken\", result.data.data.token);\r\n                let socketUser = io(process.env[\"VUE_APP_SOCKET_URL\"], {\r\n                  transports: [\"websocket\"],\r\n                });\r\n                socketUser.on(\"connect\", () => {\r\n                  Vue.prototype.$socket = socketUser;\r\n                  console.log(Vue.prototype.$socket, \"xxx vue socket\");\r\n                  Vue.prototype.$own = false;\r\n                  socketUser.emit(\"loginUser\", {\r\n                    nickname: result.data.data.nickname,\r\n                    uid: result.data.data[\"_id\"],\r\n                  });\r\n                  socketUser.on(\"disconnect\", () => {\r\n                    this.$bus.$emit(\"clearChatSocket\");\r\n                    if (Vue.prototype.$own) {\r\n                      this.$store.dispatch(\"clearUser\", { type: 1 });\r\n                    } else {\r\n                      this.$store.dispatch(\"clearUser\", { type: 0 });\r\n                    }\r\n                    router.push(\"/m\");\r\n                  });\r\n                });\r\n              }\r\n              if (this.type === \"classifyAdd\") {\r\n                console.log(\"触发一次提交\");\r\n                this.$bus.$emit(\"flashClassify\");\r\n              }\r\n              form.resetValidation();\r\n              this.$store.dispatch(\"modal/closeModal\");\r\n            } catch (error) {\r\n              // console.log(error, \"error\");\r\n              console.log(\"清除表单捏\");\r\n              this.$refs[\"formWrap\"].form = {};\r\n              form.resetValidation();\r\n              done(false);\r\n              let message = error?.response?.data?.message;\r\n              this.$notify({\r\n                title: \"警告\",\r\n                message,\r\n                type: \"warning\",\r\n              });\r\n              form.resetValidation();\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            done(false);\r\n          });\r\n      } else {\r\n        done();\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.mblog-btn-regis\r\n  background-color:#fff\r\n</style>"],"mappings":"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"}]}