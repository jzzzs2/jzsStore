{"remainingRequest":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\babel-loader\\lib\\index.js!D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\src\\views\\Wechat.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\src\\views\\Wechat.vue","mtime":1680085202752},{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\babel.config.js","mtime":1678865839779},{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":1678865247956},{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1678865248335}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IHsgaW8gfSBmcm9tICJzb2NrZXQuaW8tY2xpZW50IjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb250ZW50OiAiIiwKICAgICAgaW5mb0xpc3Q6IFtdLAogICAgICBzb2NrZXQ6IG51bGwsCiAgICAgIG5pY2tOYW1lOiAiIiwKICAgICAgaXNOYW1lOiBmYWxzZSwKICAgICAgbmFtZUNvbnRlbnQ6ICIiCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyQkc3RvcmUkc3RhdGUkdXM7CiAgICB0aGlzLiRzdG9yZS5zdGF0ZS5kaXJlY3Rpb24gPSAicmlnaHQiOwogICAgbGV0IHNvY2tldCA9IGlvKCJ3czovLzEyNy4wLjAuMTo4ODg4IiwgewogICAgICB0cmFuc3BvcnRzOiBbIndlYnNvY2tldCJdCiAgICB9KTsKICAgIGNvbnNvbGUubG9nKHNvY2tldCwgInNvY2tldCIpOwogICAgdGhpcy5zb2NrZXQgPSBzb2NrZXQ7CiAgICBsZXQgbmFtZSA9IChfdGhpcyQkc3RvcmUkc3RhdGUkdXMgPSB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mbykgPT09IG51bGwgfHwgX3RoaXMkJHN0b3JlJHN0YXRlJHVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyQkc3RvcmUkc3RhdGUkdXMubmlja25hbWU7CiAgICBjb25zb2xlLmxvZyhuYW1lLCAibmFtZSB4eHh4Iik7CiAgICBuYW1lID8gdGhpcy5uaWNrTmFtZSA9IG5hbWUgOiB0aGlzLm5pY2tOYW1lID0gIiI7CiAgICBuYW1lID8gdGhpcy5pc05hbWUgPSB0cnVlIDogdGhpcy5pc05hbWUgPSBmYWxzZTsKICAgIGlmIChuYW1lKSB7CiAgICAgIHRoaXMuc29ja2V0LmVtaXQoImxvZ2luIiwgewogICAgICAgIG5pY2tuYW1lOiBuYW1lLAogICAgICAgIHR5cGU6ICJhY3Rpb24iCiAgICAgIH0pOwogICAgfQogICAgc29ja2V0Lm9uKCJjb25uZWN0IiwgKCkgPT4gewogICAgICBjb25zb2xlLmxvZygic29ja2V0IiwgIuWuouaIt+err+i/nuaOpeW7uueriyIpOwogICAgICBzb2NrZXQub24oImVudGVyIiwgb2JqID0+IHsKICAgICAgICBpZiAob2JqLmVycm9yKSB7CiAgICAgICAgICBWdWUucHJvdG90eXBlLiRub3RpZnkoewogICAgICAgICAgICB0aXRsZTogIuitpuWRiiIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLmmLXnp7Dph43lpI0iLAogICAgICAgICAgICB0eXBlOiAid2FybmluZyIKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAob2JqLnVzZXIgPT09ICJtZSIpIHsKICAgICAgICAgIHRoaXMuaXNOYW1lID0gdHJ1ZTsKICAgICAgICAgIHRoaXMubmlja05hbWUgPSBvYmoubmlja25hbWU7CiAgICAgICAgfQogICAgICAgIC8vIGNvbnNvbGUubG9nKG9iaiwgImVudGVyIik7CiAgICAgICAgdGhpcy5pbmZvTGlzdC5wdXNoKG9iaik7CiAgICAgIH0pOwogICAgICBzb2NrZXQub24oImxlYXZlIiwgb2JqID0+IHsKICAgICAgICB0aGlzLmluZm9MaXN0LnB1c2gob2JqKTsKICAgICAgICBjb25zb2xlLmxvZyhvYmosICJsZWF2ZSIpOwogICAgICB9KTsKICAgICAgc29ja2V0Lm9uKCJyZWNlaXZlIiwgb2JqID0+IHsKICAgICAgICB0aGlzLmluZm9MaXN0LnB1c2gob2JqKTsKICAgICAgICBjb25zb2xlLmxvZyhvYmosICJvYmoiKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLnNvY2tldC5jbG9zZSgpOwogIH0sCiAgbW91bnRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIHNlbmQoKSB7CiAgICAgIHRoaXMuc29ja2V0LmVtaXQoImNoYXQiLCB7CiAgICAgICAgbXNnOiB0aGlzLmNvbnRlbnQsCiAgICAgICAgbmlja25hbWU6IHRoaXMubmlja05hbWUKICAgICAgfSk7CiAgICAgIHRoaXMuY29udGVudCA9ICIiOwogICAgfSwKICAgIHN1Ym1pdE5hbWUoKSB7CiAgICAgIHRoaXMuc29ja2V0LmVtaXQoImxvZ2luIiwgewogICAgICAgIG5pY2tuYW1lOiB0aGlzLm5hbWVDb250ZW50CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["Vue","io","data","content","infoList","socket","nickName","isName","nameContent","created","_this$$store$state$us","$store","state","direction","transports","console","log","name","userInfo","nickname","emit","type","on","obj","error","prototype","$notify","title","message","user","push","beforeDestroy","close","mounted","methods","send","msg","submitName"],"sources":["src/views/Wechat.vue"],"sourcesContent":["<!--\r\n * @Descripttion: \r\n * @version: \r\n * @Author: sueRimn\r\n * @Date: 2023-03-28 16:09:45\r\n * @LastEditors: sueRimn\r\n * @LastEditTime: 2023-03-29 18:16:34\r\n-->\r\n<template>\r\n  <div class=\"blog-room--wrap\">\r\n    <div class=\"blog-room--content\">\r\n      <div class=\"blog-room--info\"  v-for=\"(item, idx) in infoList\" :key=\"idx\">\r\n        <div class=\"blog-room--info--wrap\" :class=\"item.type\">\r\n          <span class=\"userClass\">{{ item?.type === \"action\" ?  \"\" : item?.nickname }}</span>\r\n          <p>{{ item?.msg }}</p>\r\n          <span>{{ item?.time }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"blog-room--input\">\r\n      <el-input v-model=\"content\" placeholder=\"请输入内容\"></el-input>\r\n      <el-button type=\"primary\" @click=\"send\">发送</el-button>\r\n    </div>\r\n    <!--  -->\r\n    <el-dialog title=\"注册昵称\" :visible=\"!isName\" width=\"30%\">\r\n      <el-input v-model=\"nameContent\" placeholder=\"昵称\"></el-input>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submitName\">提交</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from \"vue\";\r\nimport { io } from \"socket.io-client\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      content: \"\",\r\n      infoList: [],\r\n      socket: null,\r\n      nickName: \"\",\r\n      isName: false,\r\n      nameContent: \"\",\r\n    };\r\n  },\r\n  created() {\r\n    this.$store.state.direction = \"right\"\r\n    let socket = io(\"ws://127.0.0.1:8888\", { transports: [\"websocket\"] });\r\n    console.log(socket,\"socket\");\r\n    this.socket = socket;\r\n    let name = this.$store.state.userInfo?.nickname;\r\n    console.log(name, \"name xxxx\");\r\n    name ? (this.nickName = name) : (this.nickName = \"\");\r\n    name ? (this.isName = true) : (this.isName = false);\r\n    if (name) {\r\n      this.socket.emit(\"login\", { nickname: name,type: \"action\" });\r\n    }\r\n    socket.on(\"connect\", () => {\r\n      console.log(\"socket\", \"客户端连接建立\");\r\n      socket.on(\"enter\", (obj) => {\r\n        if (obj.error) {\r\n          Vue.prototype.$notify({\r\n            title: \"警告\",\r\n            message: \"昵称重复\",\r\n            type: \"warning\",\r\n          });\r\n          return;\r\n        }\r\n        if (obj.user === \"me\") {\r\n          this.isName = true;\r\n          this.nickName = obj.nickname;\r\n        }\r\n        // console.log(obj, \"enter\");\r\n        this.infoList.push(obj);\r\n      });\r\n      socket.on(\"leave\", (obj) => {\r\n        this.infoList.push(obj);\r\n        console.log(obj, \"leave\");\r\n      });\r\n      socket.on(\"receive\", (obj) => {\r\n        this.infoList.push(obj);\r\n        console.log(obj, \"obj\");\r\n      });\r\n    });\r\n\r\n  },\r\n  beforeDestroy() {\r\n    this.socket.close();\r\n  },\r\n\r\n  mounted() {},\r\n\r\n  methods: {\r\n    send() {\r\n      this.socket.emit(\"chat\", { msg: this.content, nickname: this.nickName });\r\n      this.content = \"\"\r\n    },\r\n    submitName() {\r\n      this.socket.emit(\"login\", { nickname: this.nameContent });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n  .blog-room--content {\r\n    display: flex\r\n    flex-direction: column\r\n    justify-content: space-around\r\n  }\r\n  .blog-room--info--wrap\r\n    display: flex\r\n    justify-content: center\r\n    align-items: center\r\n    & *\r\n      margin 2px 6px\r\n  .blog-room--info--wrap.left\r\n    align-items: center\r\n    justify-content: flex-start\r\n  .blog-room--info--wrap.right\r\n    flex-direction: row-reverse\r\n    justify-content: flex-start\r\n    align-items: center\r\n  .userClass\r\n    color: #fff\r\n    font-size 20px\r\n</style>\r\n"],"mappings":";AAkCA,OAAAA,GAAA;AACA,SAAAC,EAAA;AACA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,QAAA;MACAC,MAAA;MACAC,QAAA;MACAC,MAAA;MACAC,WAAA;IACA;EACA;EACAC,QAAA;IAAA,IAAAC,qBAAA;IACA,KAAAC,MAAA,CAAAC,KAAA,CAAAC,SAAA;IACA,IAAAR,MAAA,GAAAJ,EAAA;MAAAa,UAAA;IAAA;IACAC,OAAA,CAAAC,GAAA,CAAAX,MAAA;IACA,KAAAA,MAAA,GAAAA,MAAA;IACA,IAAAY,IAAA,IAAAP,qBAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAM,QAAA,cAAAR,qBAAA,uBAAAA,qBAAA,CAAAS,QAAA;IACAJ,OAAA,CAAAC,GAAA,CAAAC,IAAA;IACAA,IAAA,QAAAX,QAAA,GAAAW,IAAA,QAAAX,QAAA;IACAW,IAAA,QAAAV,MAAA,eAAAA,MAAA;IACA,IAAAU,IAAA;MACA,KAAAZ,MAAA,CAAAe,IAAA;QAAAD,QAAA,EAAAF,IAAA;QAAAI,IAAA;MAAA;IACA;IACAhB,MAAA,CAAAiB,EAAA;MACAP,OAAA,CAAAC,GAAA;MACAX,MAAA,CAAAiB,EAAA,UAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,KAAA;UACAxB,GAAA,CAAAyB,SAAA,CAAAC,OAAA;YACAC,KAAA;YACAC,OAAA;YACAP,IAAA;UACA;UACA;QACA;QACA,IAAAE,GAAA,CAAAM,IAAA;UACA,KAAAtB,MAAA;UACA,KAAAD,QAAA,GAAAiB,GAAA,CAAAJ,QAAA;QACA;QACA;QACA,KAAAf,QAAA,CAAA0B,IAAA,CAAAP,GAAA;MACA;MACAlB,MAAA,CAAAiB,EAAA,UAAAC,GAAA;QACA,KAAAnB,QAAA,CAAA0B,IAAA,CAAAP,GAAA;QACAR,OAAA,CAAAC,GAAA,CAAAO,GAAA;MACA;MACAlB,MAAA,CAAAiB,EAAA,YAAAC,GAAA;QACA,KAAAnB,QAAA,CAAA0B,IAAA,CAAAP,GAAA;QACAR,OAAA,CAAAC,GAAA,CAAAO,GAAA;MACA;IACA;EAEA;EACAQ,cAAA;IACA,KAAA1B,MAAA,CAAA2B,KAAA;EACA;EAEAC,QAAA;EAEAC,OAAA;IACAC,KAAA;MACA,KAAA9B,MAAA,CAAAe,IAAA;QAAAgB,GAAA,OAAAjC,OAAA;QAAAgB,QAAA,OAAAb;MAAA;MACA,KAAAH,OAAA;IACA;IACAkC,WAAA;MACA,KAAAhC,MAAA,CAAAe,IAAA;QAAAD,QAAA,OAAAX;MAAA;IACA;EACA;AACA"}]}