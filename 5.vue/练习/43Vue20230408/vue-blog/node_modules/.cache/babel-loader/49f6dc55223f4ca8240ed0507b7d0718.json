{"remainingRequest":"D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\node_modules\\babel-loader\\lib\\index.js!D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\src\\components\\article\\ArticleEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\src\\components\\article\\ArticleEdit.vue","mtime":1680770588518},{"path":"D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\babel.config.js","mtime":1681107480818},{"path":"D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":1678865247956},{"path":"D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1678865248335}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB3YW5nRWRpdG9yIGZyb20gIndhbmdlZGl0b3IiOwppbXBvcnQgc3RvcmUgZnJvbSAic3RvcmUiOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGluaXRDbGFzc2lmeUlkOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRpdGxlOiAiIiwKICAgICAgY29udGVudDogIiIsCiAgICAgIGVkaXRvcjogbnVsbCwKICAgICAgY292ZXI6ICIiLAogICAgICBjbGFzc2lmeUlkOiAiIiwKICAgICAgY2xhc3NpZnlBcnI6IFtdCiAgICB9OwogIH0sCiAgYXN5bmMgY3JlYXRlZCgpIHsKICAgIGxldCByZXN1bHQgPSBhd2FpdCB0aGlzLiRodHRwKHsKICAgICAgdHlwZTogImNsYXNzaWZ5IgogICAgfSk7CiAgICBjb25zb2xlLmxvZyhyZXN1bHQsICJyZXN1bHQgZWRpdCIpOwogICAgdGhpcy5jbGFzc2lmeUFyciA9IHJlc3VsdC5kYXRhLmRhdGEubGlzdDsKICAgIGlmICh0aGlzLmluaXRDbGFzc2lmeUlkKSB7CiAgICAgIGNvbnNvbGUubG9nKCLkv67mlLkiKTsKICAgICAgdGhpcy5jbGFzc2lmeUlkID0gdGhpcy5pbml0Q2xhc3NpZnlJZDsKICAgICAgcmV0dXJuOwogICAgfQogICAgdGhpcy5jbGFzc2lmeUlkID0gdGhpcy5jbGFzc2lmeUFyclswXS5pZDsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjbGFzc2lmaWVzKCkgewogICAgICB2YXIgX3RoaXMkY2xhc3NpZnlBcnI7CiAgICAgIHJldHVybiAoKF90aGlzJGNsYXNzaWZ5QXJyID0gdGhpcy5jbGFzc2lmeUFycikgPT09IG51bGwgfHwgX3RoaXMkY2xhc3NpZnlBcnIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGNsYXNzaWZ5QXJyLmxlbmd0aCkgPiAwID8gdGhpcy5jbGFzc2lmeUFyciA6IFtdOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIGNvbnNvbGUubG9nKHRoaXMuJHJvdXRlLnF1ZXJ5LmNsYXNzaWZ5SWQsICJpZGlkaWRpZGlpZCBpbnRpIik7CiAgICBjb25zdCBlZGl0b3IgPSBuZXcgd2FuZ0VkaXRvcigiI2NvbnRlbnQiKTsKICAgIGVkaXRvci5jb25maWcub25jaGFuZ2UgPSBuZXdIdG1sID0+IHsKICAgICAgdGhpcy5jb250ZW50ID0gbmV3SHRtbDsKICAgIH07CiAgICBlZGl0b3IuY29uZmlnLnVwbG9hZEltZ1NlcnZlciA9IHByb2Nlc3MuZW52LlZVRV9BUFBfRklMRV9VUkw7CiAgICBlZGl0b3IuY29uZmlnLnVwbG9hZEltZ01heFNpemUgPSAyMCAqIDEwMjQgKiAxMDI0OwogICAgZWRpdG9yLmNvbmZpZy51cGxvYWRJbWdBY2NlcHQgPSBbImpwZyIsICJqcGVnIiwgInBuZyIsICJnaWYiLCAiYm1wIl07CiAgICBlZGl0b3IuY29uZmlnLnVwbG9hZEltZ01heExlbmd0aCA9IDU7IC8vIOS4gOasoeacgOWkmuS4iuS8oCA1IOS4quWbvueJhwogICAgZWRpdG9yLmNvbmZpZy51cGxvYWRGaWxlTmFtZSA9ICJmaWxlIjsKICAgIGVkaXRvci5jb25maWcuZm9jdXMgPSBmYWxzZTsKICAgIGVkaXRvci5jb25maWcudXBsb2FkSW1nSGVhZGVycyA9IHsKICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiICsgc3RvcmUuZ2V0KHByb2Nlc3MuZW52LlZVRV9BUFBfRklMRV9LRVkpCiAgICB9OwogICAgZWRpdG9yLmNyZWF0ZSgpOwogICAgdGhpcy5lZGl0b3IgPSBlZGl0b3I7CiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgLy8g6LCD55So6ZSA5q+BIEFQSSDlr7nlvZPliY3nvJbovpHlmajlrp7kvovov5vooYzplIDmr4EKICAgIHRoaXMuZWRpdG9yLmRlc3Ryb3koKTsKICAgIHRoaXMuZWRpdG9yID0gbnVsbDsKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlc2V0KCkgewogICAgICB0aGlzLnRpdGxlID0gIiI7CiAgICAgIHRoaXMuZWRpdG9yLnR4dC5jbGVhcigpOwogICAgfSwKICAgIGFzeW5jIHN1Ym1pdEFydGljbGUoKSB7CiAgICAgIGxldCByZXN1bHQgPSB0aGlzLnZhbGlkYXRlSW5wdXQoKTsKICAgICAgaWYgKCFyZXN1bHQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICB2YXIgX3RoaXMkY29udGVudCRtYXRjaDsKICAgICAgICB0aGlzLmNvdmVyID0gKF90aGlzJGNvbnRlbnQkbWF0Y2ggPSB0aGlzLmNvbnRlbnQubWF0Y2goLzxpbWcgc3JjPSIoXFMrKSIvKSkgPT09IG51bGwgfHwgX3RoaXMkY29udGVudCRtYXRjaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkY29udGVudCRtYXRjaFsxXTsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmNvdmVyLCAiY292ZXIiKTsKICAgICAgICBjb25zb2xlLmxvZyhsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidWlkIiksICLlj5Hor7fmsYIgVUlEIik7CiAgICAgICAgYXdhaXQgdGhpcy4kaHR0cCh7CiAgICAgICAgICB0eXBlOiAiYXJ0aWNsZUFkZCIsCiAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMuY29udGVudCwKICAgICAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsCiAgICAgICAgICAgIGF1dGhvcjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVpZCIpLAogICAgICAgICAgICBjb3ZlcjogdGhpcy5jb3ZlciwKICAgICAgICAgICAgY2xhc3NpZnk6IHRoaXMuY2xhc3NpZnlJZAogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKICAgICAgICAgIHRpdGxlOiAi5oiQ5YqfIiwKICAgICAgICAgIG1lc3NhZ2U6ICLmt7vliqDmiJDlip8iCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi8iKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgdmFsaWRhdGVJbnB1dCgpIHsKICAgICAgaWYgKCF0aGlzLnRpdGxlKSB7CiAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsKICAgICAgICAgIHRpdGxlOiAi6ZSZ6K+vIiwKICAgICAgICAgIG1lc3NhZ2U6ICLmoIfpopjkuI3og73kuLrnqboiCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kcmVmc1sidGl0bGUiXS5mb2N1cygpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAoIXRoaXMuY29udGVudCkgewogICAgICAgIHRoaXMuJG5vdGlmeS5lcnJvcih7CiAgICAgICAgICB0aXRsZTogIumUmeivryIsCiAgICAgICAgICBtZXNzYWdlOiAi5YaF5a655LiN6IO95Li656m6IgogICAgICAgIH0pOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9Cn07"},{"version":3,"names":["wangEditor","store","props","initClassifyId","type","String","data","title","content","editor","cover","classifyId","classifyArr","created","result","$http","console","log","list","id","computed","classifies","_this$classifyArr","length","mounted","$route","query","config","onchange","newHtml","uploadImgServer","process","env","VUE_APP_FILE_URL","uploadImgMaxSize","uploadImgAccept","uploadImgMaxLength","uploadFileName","focus","uploadImgHeaders","Authorization","get","VUE_APP_FILE_KEY","create","beforeDestroy","destroy","methods","reset","txt","clear","submitArticle","validateInput","_this$content$match","match","localStorage","getItem","author","classify","$notify","success","message","$router","push","error","$refs"],"sources":["src/components/article/ArticleEdit.vue"],"sourcesContent":["<!--\r\n * @Descripttion: \r\n * @version: \r\n * @Author: sueRimn\r\n * @Date: 2023-03-21 16:57:29\r\n * @LastEditors: sueRimn\r\n * @LastEditTime: 2023-04-03 16:15:17\r\n-->\r\n<template>\r\n  <el-card>\r\n    <div class=\"blog-article-edit\">\r\n      <div class=\"block\">\r\n        <span class=\"demonstration\">标题</span>\r\n        <el-input v-model=\"title\" placeholder=\"标题\" ref=\"title\"></el-input>\r\n      </div>\r\n      <div class=\"block\">\r\n        <span class=\"demonstration\">内容</span>\r\n        <div id=\"content\"></div>\r\n      </div>\r\n      <div class=\"blog-article-classify\">\r\n        <div class=\"block\">\r\n        <span class=\"mr8\">分类:</span>\r\n        </div>\r\n        <el-radio-group v-model=\"classifyId\">\r\n          <el-radio-button :label=\"item.id\" v-for=\"(item,idx) in classifies\" :key=\"idx\">{{item.name}}</el-radio-button>\r\n        </el-radio-group>\r\n        \r\n      </div>\r\n      <div class=\"blog-article-edit--btn\">\r\n        <el-button type=\"primary\" @click=\"submitArticle\">提交</el-button>\r\n        <el-button type=\"info\" @click=\"reset\">清空</el-button>\r\n      </div>\r\n    </div>\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nimport wangEditor from \"wangeditor\";\r\nimport store from \"store\";\r\nexport default {\r\n  props: {\r\n    initClassifyId: {\r\n      type: String\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      title: \"\",\r\n      content: \"\",\r\n      editor: null,\r\n      cover: \"\",\r\n      classifyId: \"\",\r\n      classifyArr: []\r\n    };\r\n  },\r\n  async created() {\r\n    let result = await this.$http({type: \"classify\"})\r\n    console.log(result,\"result edit\");\r\n    this.classifyArr = result.data.data.list\r\n    if (this.initClassifyId) {\r\n      console.log(\"修改\");\r\n      this.classifyId = this.initClassifyId\r\n      return\r\n    }\r\n    this.classifyId = this.classifyArr[0].id\r\n  },\r\n  computed: {\r\n    classifies() {\r\n      return this.classifyArr?.length>0?this.classifyArr:[]\r\n    }\r\n  },\r\n  mounted() {\r\n    console.log(this.$route.query.classifyId,\"ididididiid inti\");\r\n    \r\n    const editor = new wangEditor(\"#content\");\r\n    editor.config.onchange = (newHtml) => {\r\n      this.content = newHtml;\r\n    };\r\n    editor.config.uploadImgServer = process.env.VUE_APP_FILE_URL;\r\n    editor.config.uploadImgMaxSize = 20 * 1024 * 1024;\r\n    editor.config.uploadImgAccept = [\"jpg\", \"jpeg\", \"png\", \"gif\", \"bmp\"];\r\n    editor.config.uploadImgMaxLength = 5; // 一次最多上传 5 个图片\r\n    editor.config.uploadFileName = \"file\";\r\n    editor.config.focus = false;\r\n    editor.config.uploadImgHeaders = {\r\n      Authorization: \"Bearer \" + store.get(process.env.VUE_APP_FILE_KEY),\r\n    };\r\n    editor.create();\r\n    this.editor = editor;\r\n  },\r\n  beforeDestroy() {\r\n    // 调用销毁 API 对当前编辑器实例进行销毁\r\n    this.editor.destroy();\r\n    this.editor = null;\r\n  },\r\n  methods: {\r\n    reset() {\r\n      this.title = \"\";\r\n      this.editor.txt.clear();\r\n    },\r\n    async submitArticle() {\r\n      let result = this.validateInput();\r\n      if (!result) {\r\n        return;\r\n      }\r\n      try {\r\n        this.cover = this.content.match(/<img src=\"(\\S+)\"/)?.[1];\r\n        console.log(this.cover, \"cover\");\r\n        console.log(localStorage.getItem(\"uid\"), \"发请求 UID\");\r\n        await this.$http({\r\n          type: \"articleAdd\",\r\n          data: {\r\n            content: this.content,\r\n            title: this.title,\r\n            author: localStorage.getItem(\"uid\"),\r\n            cover: this.cover,\r\n            classify: this.classifyId\r\n          },\r\n        });\r\n        this.$notify.success({\r\n          title: \"成功\",\r\n          message: \"添加成功\",\r\n        });\r\n        this.$router.push(\"/\");\r\n        return false;\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    validateInput() {\r\n      if (!this.title) {\r\n        this.$notify.error({\r\n          title: \"错误\",\r\n          message: \"标题不能为空\",\r\n        });\r\n        this.$refs[\"title\"].focus();\r\n        return false;\r\n      }\r\n      if (!this.content) {\r\n        this.$notify.error({\r\n          title: \"错误\",\r\n          message: \"内容不能为空\",\r\n        });\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n.blog-article-edit {\r\n  padding: 10px;\r\n  background-color: #fff;\r\n}\r\n\r\n.block {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: flex-start;\r\n  margin-bottom: 10px;\r\n  margin-top: 8px;\r\n  text-align: left;\r\n\r\n  & span {\r\n    width: 60px;\r\n    padding-right: 6px;\r\n  }\r\n}\r\n\r\n.blog-article-edit--btn {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  width: 60%;\r\n  margin: 10px auto;\r\n\r\n  & button {\r\n    width: 50%;\r\n  }\r\n}\r\n.blog-article-classify\r\n  display flex\r\n  flex-direction: column\r\n  justify-content: flex-start\r\n  margin-bottom: 16px\r\n</style>"],"mappings":"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"}]}