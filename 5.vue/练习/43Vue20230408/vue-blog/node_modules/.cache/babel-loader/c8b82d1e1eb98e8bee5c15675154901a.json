{"remainingRequest":"D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\node_modules\\babel-loader\\lib\\index.js!D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\src\\components\\user\\UserAvatar.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\src\\components\\user\\UserAvatar.vue","mtime":1680181520726},{"path":"D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\babel.config.js","mtime":1678865839779},{"path":"D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":1678865247956},{"path":"D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1678865248335}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IHJvdXRlciBmcm9tICJAL3JvdXRlci9pbmRleCI7CmltcG9ydCB7IGlvIH0gZnJvbSAic29ja2V0LmlvLWNsaWVudCI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHt9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdC5kYXRhLmRhdGEsICJkYXRheHh4Iik7CiAgICBsZXQgc29ja2V0VXNlciA9IGlvKHByb2Nlc3MuZW52WyJWVUVfQVBQX1NPQ0tFVF9VUkwiXSwgewogICAgICB0cmFuc3BvcnRzOiBbIndlYnNvY2tldCJdCiAgICB9KTsKICAgIHNvY2tldFVzZXIub24oImNvbm5lY3QiLCAoKSA9PiB7CiAgICAgIC8vIGNvbnNvbGUubG9nKHNvY2tldFVzZXIudGVzdE5hbWUsInRlc3QiKTsKICAgICAgVnVlLnByb3RvdHlwZS4kc29ja2V0ID0gc29ja2V0VXNlcjsKICAgICAgY29uc29sZS5sb2coVnVlLnByb3RvdHlwZS4kc29ja2V0LCAieHh4IHZ1ZSBzb2NrZXQiKTsKICAgICAgVnVlLnByb3RvdHlwZS4kb3duID0gZmFsc2U7CiAgICAgIHNvY2tldFVzZXIuZW1pdCgibG9naW5Vc2VyIiwgewogICAgICAgIG5pY2tuYW1lOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mby5uaWNrbmFtZSwKICAgICAgICB1aWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvWyJfaWQiXQogICAgICB9KTsKICAgICAgc29ja2V0VXNlci5vbigiZGlzY29ubmVjdCIsICgpID0+IHsKICAgICAgICBjb25zb2xlLmxvZygi5riF56m6IiwgInF1aXR0dHR0dHR0dHR0dHR0Iik7CiAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCJjbGVhckNoYXRTb2NrZXQiKTsKICAgICAgICBpZiAoVnVlLnByb3RvdHlwZS4kb3duKSB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiY2xlYXJVc2VyIiwgewogICAgICAgICAgICB0eXBlOiAxCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImNsZWFyVXNlciIsIHsKICAgICAgICAgICAgdHlwZTogMAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHJvdXRlci5wdXNoKCIvIik7CiAgICAgICAgLy8gdGhpcy4kbm90aWZ5KHsKICAgICAgICAvLyAgIHRpdGxlOiAi6YCa55+lIiwKICAgICAgICAvLyAgIG1lc3NhZ2U6IuWFtuWug+iuvuWkh+W3sueZu+W9lSIsCiAgICAgICAgLy8gICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgLy8gfSk7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKCiAgbW91bnRlZCgpIHt9LAogIGNvbXB1dGVkOiB7CiAgICBzcmMoKSB7CiAgICAgIHZhciBfdGhpcyQkc3RvcmUkc3RhdGUkdXM7CiAgICAgIC8vIHJldHVybiAiaHR0cDovLzEyNy4wLjAuMTozMDAwL2ltZy9taWt1LmpwZyIKICAgICAgcmV0dXJuICgoX3RoaXMkJHN0b3JlJHN0YXRlJHVzID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8pID09PSBudWxsIHx8IF90aGlzJCRzdG9yZSRzdGF0ZSR1cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkJHN0b3JlJHN0YXRlJHVzLmF2YXRhcikgfHwgIiI7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBleGl0KCkgewogICAgICAvLyBjb25zb2xlLmxvZyhWdWUucHJvdG90eXBlLiRzb2NrZXQpOwogICAgICAvLyB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiY2xlYXJVc2VyIix7dHlwZTogMX0pCiAgICAgIFZ1ZS5wcm90b3R5cGUuJG93biA9IHRydWU7CiAgICAgIFZ1ZS5wcm90b3R5cGUuJHNvY2tldC5jbG9zZSgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["Vue","router","io","data","created","socketUser","process","env","transports","on","prototype","$socket","console","log","$own","emit","nickname","$store","state","userInfo","uid","$bus","$emit","dispatch","type","push","mounted","computed","src","_this$$store$state$us","avatar","methods","exit","close"],"sources":["src/components/user/UserAvatar.vue"],"sourcesContent":["<!--\r\n * @Descripttion: \r\n * @version: \r\n * @Author: sueRimn\r\n * @Date: 2023-03-17 20:08:20\r\n * @LastEditors: sueRimn\r\n * @LastEditTime: 2023-03-30 21:05:20\r\n-->\r\n<template>\r\n  <div class=\"blog-user--wrap\">\r\n    <div class=\"blog-user--avatar\">\r\n      <img :src=\"src\" alt=\"\" />\r\n    </div>\r\n    <svg\r\n      @click=\"exit\"\r\n      t=\"1680161391068\"\r\n      class=\"icon\"\r\n      viewBox=\"0 0 1024 1024\"\r\n      version=\"1.1\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      p-id=\"2771\"\r\n      width=\"20\"\r\n      height=\"20\"\r\n    >\r\n      <path\r\n        d=\"M512.213333 42.666667a42.666667 42.666667 0 0 1 42.666667 42.666666v426.666667a42.666667 42.666667 0 0 1-85.333333 0V85.333333a42.666667 42.666667 0 0 1 42.666666-42.666666zM210.261333 253.141333a42.624 42.624 0 1 1 60.330667 60.330667 341.333333 341.333333 0 1 0 482.773333 0 42.666667 42.666667 0 0 1 60.330667-60.330667c166.570667 166.656 166.570667 436.778667-0.085333 603.349334-166.613333 166.613333-436.736 166.613333-603.349334 0s-166.613333-436.693333 0-603.349334z\"\r\n        fill=\"#ffffff\"\r\n        p-id=\"2772\"\r\n      ></path>\r\n    </svg>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from  \"vue\"\r\nimport router from \"@/router/index\"\r\nimport { io } from \"socket.io-client\";\r\nexport default {\r\n  data() {\r\n    return {};\r\n  },\r\n  created() {\r\n    // console.log(result.data.data, \"dataxxx\");\r\n    let socketUser = io(process.env[\"VUE_APP_SOCKET_URL\"], {\r\n      transports: [\"websocket\"],\r\n    });\r\n    socketUser.on(\"connect\", () => {\r\n      // console.log(socketUser.testName,\"test\");\r\n      Vue.prototype.$socket = socketUser;\r\n      console.log(Vue.prototype.$socket, \"xxx vue socket\");\r\n      Vue.prototype.$own = false;\r\n      socketUser.emit(\"loginUser\", {\r\n        nickname: this.$store.state.userInfo.nickname,\r\n        uid: this.$store.state.userInfo[\"_id\"],\r\n      });\r\n      socketUser.on(\"disconnect\", () => {\r\n        console.log(\"清空\", \"quitttttttttttttt\");\r\n        this.$bus.$emit(\"clearChatSocket\");\r\n        if (Vue.prototype.$own) {\r\n          this.$store.dispatch(\"clearUser\", { type: 1 });\r\n        } else {\r\n          this.$store.dispatch(\"clearUser\", { type: 0 });\r\n        }\r\n\r\n        router.push(\"/\");\r\n        // this.$notify({\r\n        //   title: \"通知\",\r\n        //   message:\"其它设备已登录\",\r\n        //   type: \"warning\",\r\n        // });\r\n      });\r\n    });\r\n  },\r\n  mounted() {},\r\n  computed: {\r\n    src() {\r\n      // return \"http://127.0.0.1:3000/img/miku.jpg\"\r\n      return this.$store.state.userInfo?.avatar || \"\";\r\n    },\r\n  },\r\n  methods: {\r\n    exit() {\r\n      // console.log(Vue.prototype.$socket);\r\n      // this.$store.dispatch(\"clearUser\",{type: 1})\r\n      Vue.prototype.$own = true;\r\n      Vue.prototype.$socket.close();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n.blog-user--wrap {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n\r\n  & * {\r\n    margin: 0 4px;\r\n  }\r\n\r\n  & svg {\r\n    transition: 0.5s;\r\n    cursor: pointer;\r\n  }\r\n\r\n  & svg:hover {\r\n    transform: scale(1.3);\r\n  }\r\n}\r\n\r\n.blog-user--avatar {\r\n  width: 60px;\r\n  height: 60px;\r\n  border-radius: 50%;\r\n  overflow: hidden;\r\n}\r\n\r\n.blog-user--avatar img {\r\n  width: 60px;\r\n  height: 60px;\r\n}\r\n</style>"],"mappings":";AAkCA,OAAAA,GAAA;AACA,OAAAC,MAAA;AACA,SAAAC,EAAA;AACA;EACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA;IACA,IAAAC,UAAA,GAAAH,EAAA,CAAAI,OAAA,CAAAC,GAAA;MACAC,UAAA;IACA;IACAH,UAAA,CAAAI,EAAA;MACA;MACAT,GAAA,CAAAU,SAAA,CAAAC,OAAA,GAAAN,UAAA;MACAO,OAAA,CAAAC,GAAA,CAAAb,GAAA,CAAAU,SAAA,CAAAC,OAAA;MACAX,GAAA,CAAAU,SAAA,CAAAI,IAAA;MACAT,UAAA,CAAAU,IAAA;QACAC,QAAA,OAAAC,MAAA,CAAAC,KAAA,CAAAC,QAAA,CAAAH,QAAA;QACAI,GAAA,OAAAH,MAAA,CAAAC,KAAA,CAAAC,QAAA;MACA;MACAd,UAAA,CAAAI,EAAA;QACAG,OAAA,CAAAC,GAAA;QACA,KAAAQ,IAAA,CAAAC,KAAA;QACA,IAAAtB,GAAA,CAAAU,SAAA,CAAAI,IAAA;UACA,KAAAG,MAAA,CAAAM,QAAA;YAAAC,IAAA;UAAA;QACA;UACA,KAAAP,MAAA,CAAAM,QAAA;YAAAC,IAAA;UAAA;QACA;QAEAvB,MAAA,CAAAwB,IAAA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;EACA;;EACAC,QAAA;EACAC,QAAA;IACAC,IAAA;MAAA,IAAAC,qBAAA;MACA;MACA,SAAAA,qBAAA,QAAAZ,MAAA,CAAAC,KAAA,CAAAC,QAAA,cAAAU,qBAAA,uBAAAA,qBAAA,CAAAC,MAAA;IACA;EACA;EACAC,OAAA;IACAC,KAAA;MACA;MACA;MACAhC,GAAA,CAAAU,SAAA,CAAAI,IAAA;MACAd,GAAA,CAAAU,SAAA,CAAAC,OAAA,CAAAsB,KAAA;IACA;EACA;AACA"}]}