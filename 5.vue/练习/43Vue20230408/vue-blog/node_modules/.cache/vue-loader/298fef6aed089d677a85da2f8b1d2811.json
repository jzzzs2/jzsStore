{"remainingRequest":"D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\src\\views\\Live2D.vue?vue&type=style&index=0&id=162feff8&lang=stylus&","dependencies":[{"path":"D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\src\\views\\Live2D.vue","mtime":1680160376808},{"path":"D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\node_modules\\css-loader\\dist\\cjs.js","mtime":1678865247387},{"path":"D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1678865249033},{"path":"D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\node_modules\\postcss-loader\\src\\index.js","mtime":1678865247954},{"path":"D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\node_modules\\stylus-loader\\index.js","mtime":1678866957323},{"path":"D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1678865248335}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoubGl2ZTJkLXdyYXAgew0KICBwb3NpdGlvbjogZml4ZWQ7DQogIHdpZHRoOiAzMDBweDsNCiAgaGVpZ2h0OiA1MDBweDsNCiAgYm90dG9tOiAxMHB4Ow0KICAmOmhvdmVyIC5saXZlLW9wZXJhdGUgew0KICAgIGRpc3BsYXk6IGZsZXg7DQogIH0NCn0NCi5saXZlMmQtd3JhcC5sZWZ0IHsNCiAgbGVmdDogMjBweDsNCn0NCi5saXZlMmQtd3JhcC5yaWdodCB7DQogIHJpZ2h0OiAyMHB4DQp9DQoubGl2ZS1vcGVyYXRlIHsNCiAgZGlzcGxheTogbm9uZTsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICBsZWZ0OiA0NHB4Ow0KICBib3R0b206IDIxMHB4Ow0KICBmb250LXNpemU6IDIwcHg7DQogIGNvbG9yOiAjMDAwOw0KICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDsNCiAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCg0KICAmIGkgew0KICAgIG1hcmdpbjogNHB4Ow0KICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICBwYWRkaW5nOiA0cHgNCiAgICBib3JkZXItcmFkaXVzOiA1MCUNCiAgICBiYWNrZ3JvdW5kLWNvbG9yICNmZmYNCiAgfQ0KfQ0K"},{"version":3,"sources":["Live2D.vue"],"names":[],"mappings":";AAuFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Live2D.vue","sourceRoot":"src/views","sourcesContent":["<!--\r\n * @Descripttion: \r\n * @version: \r\n * @Author: sueRimn\r\n * @Date: 2023-03-28 15:10:14\r\n * @LastEditors: sueRimn\r\n * @LastEditTime: 2023-03-30 15:12:39\r\n-->\r\n<template>\r\n  <div class=\"live2d-wrap\" :class=\"direction\">\r\n    <div class=\"live-operate\">\r\n      <i class=\"el-icon-refresh-right\" @click=\"changeModel\"></i>\r\n      <i class=\"el-icon-arrow-down\" @click=\"changeClothes\"></i>\r\n    </div>\r\n    <canvas id=\"live2d\" width=\"300\" height=\"500\"> </canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Live2d from \"@/static/live2d\";\r\nimport axios from \"axios\";\r\nimport store from \"store\";\r\nconst LIVE2D_MODEL_NAME = \"info_live2d\";\r\nconst GET_URL = \"https://live2d.fghrsh.net/api/get/\";\r\nconst MODEL_URL = \"http://api.fghrsh.net/live2d/switch/\";\r\nconst TEXTURES_URL = \"https://api.fghrsh.net/live2d/rand_textures/\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      modelId: 1,\r\n      texturesId: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    direction () {\r\n      return this.$store.state.direction || \"left\"\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initData();\r\n    this.startLoadGirl();\r\n  },\r\n\r\n  methods: {\r\n    async changeModel() {\r\n      try {\r\n        let result = await axios.get(`${MODEL_URL}?id=${this.modelId}`);\r\n        // console.log(result.data.model.id,\"xxx1\");\r\n        this.modelId = result.data.model.id;\r\n        this.startLoadGirl();\r\n      } catch (error) {\r\n        console.log(\"切换模型出错\");\r\n        this.modelId = 6\r\n        this.startLoadGirl();\r\n      }\r\n    },\r\n    async changeClothes() {\r\n      try {\r\n        let result = await axios.get(`${TEXTURES_URL}?id=${this.modelId}`);\r\n        // console.log(result,\"xxx2\");\r\n        this.texturesId = result.data.textures.id;\r\n        this.startLoadGirl();\r\n      } catch (error) {\r\n        console.log(\"切换衣服出错\");\r\n        this.texturesId = 6\r\n        this.startLoadGirl();\r\n      }\r\n    },\r\n    startLoadGirl() {\r\n      console.log(\"渲染canvas\");\r\n      // this.initData()\r\n      loadlive2d(\"live2d\", `${GET_URL}?id=${this.modelId}-${this.texturesId}`);\r\n      store.set(LIVE2D_MODEL_NAME, {\r\n        modelId: this.modelId,\r\n        texturesId: this.texturesId,\r\n      });\r\n    },\r\n    initData() {\r\n      let { modelId, texturesId } = store.get(LIVE2D_MODEL_NAME);\r\n      modelId ? (this.modelId = modelId) : (tihs.modelId = 1);\r\n      texturesId ? (this.texturesId = texturesId) : (this.texturesId = 0);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n.live2d-wrap {\r\n  position: fixed;\r\n  width: 300px;\r\n  height: 500px;\r\n  bottom: 10px;\r\n  &:hover .live-operate {\r\n    display: flex;\r\n  }\r\n}\r\n.live2d-wrap.left {\r\n  left: 20px;\r\n}\r\n.live2d-wrap.right {\r\n  right: 20px\r\n}\r\n.live-operate {\r\n  display: none;\r\n  position: absolute;\r\n  left: 44px;\r\n  bottom: 210px;\r\n  font-size: 20px;\r\n  color: #000;\r\n  flex-direction: column;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n\r\n  & i {\r\n    margin: 4px;\r\n    cursor: pointer;\r\n    padding: 4px\r\n    border-radius: 50%\r\n    background-color #fff\r\n  }\r\n}\r\n</style>"]}]}