{"remainingRequest":"D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\src\\components\\article\\ArticleInfoBar.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\src\\components\\article\\ArticleInfoBar.vue","mtime":1679969844005},{"path":"D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":1678865247956},{"path":"D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\36Vue20230330(new)\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1678865248335}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBjcmVhdGVOYW1lc3BhY2VkSGVscGVycyB9IGZyb20gInZ1ZXgiOw0KbGV0IHsgbWFwR2V0dGVycyxtYXBBY3Rpb25zIH0gPSBjcmVhdGVOYW1lc3BhY2VkSGVscGVycygiaGl0cyIpOw0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICAvLyBpc0xpa2U6IGZhbHNlLA0KICAgICAgYWlkOiAiIiwNCiAgICAgIHN0ZXA6IDANCiAgICB9Ow0KICB9LA0KICANCiAgcHJvcHM6IHsNCiAgICBhcnRpY2xlSW5mbzogew0KICAgICAgdHlwZTogT2JqZWN0DQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIGNvbnNvbGUubG9nKCLmuLLmn5PkuoYg5paH56ug5YaF55qE5pif5Y+3Iik7DQogICAgbGV0IGFpZCA9IHRoaXMuJHJvdXRlLnBhcmFtc1siaWQiXQ0KICAgIGNvbnNvbGUubG9nKGFpZCwiJHJvdXRlIik7DQogICAgdGhpcy5haWQgPSBhaWQNCiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmlzX2hpdHMoYWlkKSwiaWYxIik7DQogICAgdGhpcy5zZXRBcnRpY2xlUG9zaXRpb24oKQ0KICAgIC8vIHRoaXMuaXNMaWtlID0gdGhpcy5pc19oaXRzKCkoYWlkKQ0KICB9LA0KICBjb21wdXRlZDogew0KDQogICAgaXNMaWtlKCkgew0KICAgICAgcmV0dXJuIHRoaXMuaXNfaGl0cygpKHRoaXMuYWlkKQ0KICAgIH0sDQogICAgY3JlYXRldGltZSgpIHsNCiAgICAgIHJldHVybiB0aGlzLmFydGljbGVJbmZvPy5jcmVhdGV0aW1lIHx8ICLpu5jorqTml7bpl7QiOw0KICAgIH0sDQogICAgbmlja25hbWUoKSB7DQogICAgICByZXR1cm4gdGhpcy5hcnRpY2xlSW5mbz8uYXV0aG9yPy5uaWNrbmFtZSB8fCAi6buY6K6k5pi156ewIjsNCiAgICB9LA0KICAgIGNsaWNrc19udW0oKSB7DQogICAgICByZXR1cm4gdGhpcy5hcnRpY2xlSW5mbz8uY2xpY2tzX251bSB8fCAwOw0KICAgIH0sDQogICAgY29tbWVudHNfbnVtKCkgew0KICAgICAgcmV0dXJuIHRoaXMuYXJ0aWNsZUluZm8/LmNvbW1lbnRzX251bSB8fCAwOw0KICAgIH0sDQogICAgaGl0c19udW0oKSB7DQogICAgICByZXR1cm4gdGhpcy5hcnRpY2xlSW5mbz8uaGl0c19udW0gKyB0aGlzLnN0ZXAgfHwgMDsNCiAgICB9LA0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIGNvbnNvbGUubG9nKCLnu5HlrpoiKTsNCiAgICB0aGlzLiRidXMuJG9uKCJ1cCIsdGhpcy51cCkNCiAgICB0aGlzLiRidXMuJG9uKCJkb3duIix0aGlzLmRvd24pDQogIH0sDQogIGJlZm9yZURlc3Ryb3koKSB7DQogICAgY29uc29sZS5sb2coIuino+e7kSIpOw0KICAgIHRoaXMuJGJ1cy4kb2ZmKCJ1cCIsdGhpcy51cCkNCiAgICB0aGlzLiRidXMuJG9mZigiZG93biIsdGhpcy5kb3duKQ0KICB9LA0KICANCiAgbWV0aG9kczogew0KICAgIHVwICgpIHsNCiAgICAgIGNvbnNvbGUubG9nKCLop6blj5F1cCIpOw0KICAgICAgdGhpcy5zdGVwKz0xDQogICAgfSwNCiAgICBkb3duICgpIHsNCiAgICAgIGNvbnNvbGUubG9nKCLop6blj5Fkb3duIik7DQogICAgICB0aGlzLnN0ZXAtPTENCiAgICB9LA0KICAgIGFzeW5jIG9wZXJhdGVIaXRzICgpIHsNCiAgICAgIGxldCBhaWQgPSB0aGlzLmFpZA0KICAgICAgbGV0IGp1ZGdlID0gbnVsbA0KICAgICAgY29uc29sZS5sb2coImNsaWNrIik7DQogICAgICBjb25zb2xlLmxvZyh0aGlzLmlzTGlrZSwidGhpcy5saWtlIik7DQogICAgICB0aGlzLmlzTGlrZT90aGlzLmRvd24oKTp0aGlzLnVwKCkNCiAgICAgIGp1ZGdlID0gIXRoaXMuaXNMaWtlDQogICAgICBqdWRnZSA/DQogICAgICB0aGlzLnB1c2hBcnRpY2xlKHthaWR9KQ0KICAgICAgOg0KICAgICAgdGhpcy5wdWxsQXJ0aWNsZSh7YWlkfSkNCiAgICAgIC8v5pON5L2c5pWw5o2u5bqTDQogICAgICBsZXQgcmVzdWx0ID0gbnVsbDsNCiAgICAgIGp1ZGdlID8NCiAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuJGh0dHAoe3R5cGU6ICJsaWtlT3BlcmF0ZSIsZGF0YToge3BhcmFtczp7aXNBZGQ6IHRydWUsaWQ6IGFpZH19fSkgOg0KICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy4kaHR0cCh7dHlwZTogImxpa2VPcGVyYXRlIixkYXRhOiB7cGFyYW1zOntpc0FkZDogZmFsc2UsaWQ6IGFpZH19fSkNCiAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCwieHh4Iik7DQogICAgfSwNCiAgICAuLi5tYXBHZXR0ZXJzKFsiaXNfaGl0cyJdKSwNCiAgICAuLi5tYXBBY3Rpb25zKFsicHVzaEFydGljbGUiLCJwdWxsQXJ0aWNsZSIsInNldEFydGljbGVQb3NpdGlvbiJdKQ0KICB9LA0KfTsNCg=="},{"version":3,"sources":["ArticleInfoBar.vue"],"names":[],"mappings":";AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ArticleInfoBar.vue","sourceRoot":"src/components/article","sourcesContent":["<!--\r\n * @Descripttion: \r\n * @version: \r\n * @Author: sueRimn\r\n * @Date: 2023-03-25 18:13:07\r\n * @LastEditors: sueRimn\r\n * @LastEditTime: 2023-03-28 10:17:23\r\n-->\r\n<template>\r\n  <div class=\"blog-descript-info\">\r\n    <p class=\"time\">\r\n      <i class=\"el-icon-time\"></i><span>{{ createtime }}</span>\r\n    </p>\r\n    <p><i class=\"el-icon-s-custom\"></i>{{ nickname }}</p>\r\n    <p class=\"visible-xs\"><i class=\"el-icon-view\"></i>{{ clicks_num }}</p>\r\n    <p class=\"visible-xs\">\r\n      <i class=\"el-icon-s-comment\"></i>{{ comments_num }}\r\n    </p>\r\n    <p class=\"visible-xs\" ><i class=\"el-icon-star-on touch\" @click=\"operateHits\" :class=\"{active: isLike}\"></i>{{ hits_num }}</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { createNamespacedHelpers } from \"vuex\";\r\nlet { mapGetters,mapActions } = createNamespacedHelpers(\"hits\");\r\nexport default {\r\n  data() {\r\n    return {\r\n      // isLike: false,\r\n      aid: \"\",\r\n      step: 0\r\n    };\r\n  },\r\n  \r\n  props: {\r\n    articleInfo: {\r\n      type: Object\r\n    }\r\n  },\r\n  created() {\r\n    console.log(\"渲染了 文章内的星号\");\r\n    let aid = this.$route.params[\"id\"]\r\n    console.log(aid,\"$route\");\r\n    this.aid = aid\r\n    // console.log(this.is_hits(aid),\"if1\");\r\n    this.setArticlePosition()\r\n    // this.isLike = this.is_hits()(aid)\r\n  },\r\n  computed: {\r\n\r\n    isLike() {\r\n      return this.is_hits()(this.aid)\r\n    },\r\n    createtime() {\r\n      return this.articleInfo?.createtime || \"默认时间\";\r\n    },\r\n    nickname() {\r\n      return this.articleInfo?.author?.nickname || \"默认昵称\";\r\n    },\r\n    clicks_num() {\r\n      return this.articleInfo?.clicks_num || 0;\r\n    },\r\n    comments_num() {\r\n      return this.articleInfo?.comments_num || 0;\r\n    },\r\n    hits_num() {\r\n      return this.articleInfo?.hits_num + this.step || 0;\r\n    },\r\n  },\r\n  mounted() {\r\n    console.log(\"绑定\");\r\n    this.$bus.$on(\"up\",this.up)\r\n    this.$bus.$on(\"down\",this.down)\r\n  },\r\n  beforeDestroy() {\r\n    console.log(\"解绑\");\r\n    this.$bus.$off(\"up\",this.up)\r\n    this.$bus.$off(\"down\",this.down)\r\n  },\r\n  \r\n  methods: {\r\n    up () {\r\n      console.log(\"触发up\");\r\n      this.step+=1\r\n    },\r\n    down () {\r\n      console.log(\"触发down\");\r\n      this.step-=1\r\n    },\r\n    async operateHits () {\r\n      let aid = this.aid\r\n      let judge = null\r\n      console.log(\"click\");\r\n      console.log(this.isLike,\"this.like\");\r\n      this.isLike?this.down():this.up()\r\n      judge = !this.isLike\r\n      judge ?\r\n      this.pushArticle({aid})\r\n      :\r\n      this.pullArticle({aid})\r\n      //操作数据库\r\n      let result = null;\r\n      judge ?\r\n      result = await this.$http({type: \"likeOperate\",data: {params:{isAdd: true,id: aid}}}) :\r\n      result = await this.$http({type: \"likeOperate\",data: {params:{isAdd: false,id: aid}}})\r\n      console.log(result,\"xxx\");\r\n    },\r\n    ...mapGetters([\"is_hits\"]),\r\n    ...mapActions([\"pushArticle\",\"pullArticle\",\"setArticlePosition\"])\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n  .touch\r\n    cursor: pointer\r\n  .active\r\n    color cyan\r\n    background-color #ccc\r\n    border-radius: 50%\r\n</style>"]}]}