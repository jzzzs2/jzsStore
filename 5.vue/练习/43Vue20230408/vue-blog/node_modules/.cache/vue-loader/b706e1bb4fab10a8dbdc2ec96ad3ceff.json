{"remainingRequest":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\src\\views\\Live2D.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\src\\views\\Live2D.vue","mtime":1679990418709},{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":1678865247956},{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1678865248335}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgTGl2ZTJkIGZyb20gIkAvc3RhdGljL2xpdmUyZCI7DQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KaW1wb3J0IHN0b3JlIGZyb20gInN0b3JlIjsNCmNvbnN0IExJVkUyRF9NT0RFTF9OQU1FID0gImluZm9fbGl2ZTJkIjsNCmNvbnN0IEdFVF9VUkwgPSAiaHR0cHM6Ly9saXZlMmQuZmdocnNoLm5ldC9hcGkvZ2V0LyI7DQpjb25zdCBNT0RFTF9VUkwgPSAiaHR0cDovL2FwaS5mZ2hyc2gubmV0L2xpdmUyZC9zd2l0Y2gvIjsNCmNvbnN0IFRFWFRVUkVTX1VSTCA9ICJodHRwczovL2FwaS5mZ2hyc2gubmV0L2xpdmUyZC9yYW5kX3RleHR1cmVzLyI7DQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIG1vZGVsSWQ6IDEsDQogICAgICB0ZXh0dXJlc0lkOiAwLA0KICAgIH07DQogIH0sDQoNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmluaXREYXRhKCk7DQogICAgdGhpcy5zdGFydExvYWRHaXJsKCk7DQogIH0sDQoNCiAgbWV0aG9kczogew0KICAgIGFzeW5jIGNoYW5nZU1vZGVsKCkgew0KICAgICAgdHJ5IHsNCiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IGF4aW9zLmdldChgJHtNT0RFTF9VUkx9P2lkPSR7dGhpcy5tb2RlbElkfWApOw0KICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXN1bHQuZGF0YS5tb2RlbC5pZCwieHh4MSIpOw0KICAgICAgICB0aGlzLm1vZGVsSWQgPSByZXN1bHQuZGF0YS5tb2RlbC5pZDsNCiAgICAgICAgdGhpcy5zdGFydExvYWRHaXJsKCk7DQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmxvZygi5YiH5o2i5qih5Z6L5Ye66ZSZIik7DQogICAgICAgIHRoaXMubW9kZWxJZCA9IDYNCiAgICAgICAgdGhpcy5zdGFydExvYWRHaXJsKCk7DQogICAgICB9DQogICAgfSwNCiAgICBhc3luYyBjaGFuZ2VDbG90aGVzKCkgew0KICAgICAgdHJ5IHsNCiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IGF4aW9zLmdldChgJHtURVhUVVJFU19VUkx9P2lkPSR7dGhpcy5tb2RlbElkfWApOw0KICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXN1bHQsInh4eDIiKTsNCiAgICAgICAgdGhpcy50ZXh0dXJlc0lkID0gcmVzdWx0LmRhdGEudGV4dHVyZXMuaWQ7DQogICAgICAgIHRoaXMuc3RhcnRMb2FkR2lybCgpOw0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5sb2coIuWIh+aNouiho+acjeWHuumUmSIpOw0KICAgICAgICB0aGlzLnRleHR1cmVzSWQgPSA2DQogICAgICAgIHRoaXMuc3RhcnRMb2FkR2lybCgpOw0KICAgICAgfQ0KICAgIH0sDQogICAgc3RhcnRMb2FkR2lybCgpIHsNCiAgICAgIGNvbnNvbGUubG9nKCLmuLLmn5NjYW52YXMiKTsNCiAgICAgIC8vIHRoaXMuaW5pdERhdGEoKQ0KICAgICAgbG9hZGxpdmUyZCgibGl2ZTJkIiwgYCR7R0VUX1VSTH0/aWQ9JHt0aGlzLm1vZGVsSWR9LSR7dGhpcy50ZXh0dXJlc0lkfWApOw0KICAgICAgc3RvcmUuc2V0KExJVkUyRF9NT0RFTF9OQU1FLCB7DQogICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZCwNCiAgICAgICAgdGV4dHVyZXNJZDogdGhpcy50ZXh0dXJlc0lkLA0KICAgICAgfSk7DQogICAgfSwNCiAgICBpbml0RGF0YSgpIHsNCiAgICAgIGxldCB7IG1vZGVsSWQsIHRleHR1cmVzSWQgfSA9IHN0b3JlLmdldChMSVZFMkRfTU9ERUxfTkFNRSk7DQogICAgICBtb2RlbElkID8gKHRoaXMubW9kZWxJZCA9IG1vZGVsSWQpIDogKHRpaHMubW9kZWxJZCA9IDEpOw0KICAgICAgdGV4dHVyZXNJZCA/ICh0aGlzLnRleHR1cmVzSWQgPSB0ZXh0dXJlc0lkKSA6ICh0aGlzLnRleHR1cmVzSWQgPSAwKTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["Live2D.vue"],"names":[],"mappings":";AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Live2D.vue","sourceRoot":"src/views","sourcesContent":["<!--\r\n * @Descripttion: \r\n * @version: \r\n * @Author: sueRimn\r\n * @Date: 2023-03-28 15:10:14\r\n * @LastEditors: sueRimn\r\n * @LastEditTime: 2023-03-28 15:59:43\r\n-->\r\n<template>\r\n  <div class=\"live2d-wrap\">\r\n    <div class=\"live-operate\">\r\n      <i class=\"el-icon-refresh-right\" @click=\"changeModel\"></i>\r\n      <i class=\"el-icon-arrow-down\" @click=\"changeClothes\"></i>\r\n    </div>\r\n    <canvas id=\"live2d\" width=\"300\" height=\"500\"> </canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Live2d from \"@/static/live2d\";\r\nimport axios from \"axios\";\r\nimport store from \"store\";\r\nconst LIVE2D_MODEL_NAME = \"info_live2d\";\r\nconst GET_URL = \"https://live2d.fghrsh.net/api/get/\";\r\nconst MODEL_URL = \"http://api.fghrsh.net/live2d/switch/\";\r\nconst TEXTURES_URL = \"https://api.fghrsh.net/live2d/rand_textures/\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      modelId: 1,\r\n      texturesId: 0,\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.initData();\r\n    this.startLoadGirl();\r\n  },\r\n\r\n  methods: {\r\n    async changeModel() {\r\n      try {\r\n        let result = await axios.get(`${MODEL_URL}?id=${this.modelId}`);\r\n        // console.log(result.data.model.id,\"xxx1\");\r\n        this.modelId = result.data.model.id;\r\n        this.startLoadGirl();\r\n      } catch (error) {\r\n        console.log(\"切换模型出错\");\r\n        this.modelId = 6\r\n        this.startLoadGirl();\r\n      }\r\n    },\r\n    async changeClothes() {\r\n      try {\r\n        let result = await axios.get(`${TEXTURES_URL}?id=${this.modelId}`);\r\n        // console.log(result,\"xxx2\");\r\n        this.texturesId = result.data.textures.id;\r\n        this.startLoadGirl();\r\n      } catch (error) {\r\n        console.log(\"切换衣服出错\");\r\n        this.texturesId = 6\r\n        this.startLoadGirl();\r\n      }\r\n    },\r\n    startLoadGirl() {\r\n      console.log(\"渲染canvas\");\r\n      // this.initData()\r\n      loadlive2d(\"live2d\", `${GET_URL}?id=${this.modelId}-${this.texturesId}`);\r\n      store.set(LIVE2D_MODEL_NAME, {\r\n        modelId: this.modelId,\r\n        texturesId: this.texturesId,\r\n      });\r\n    },\r\n    initData() {\r\n      let { modelId, texturesId } = store.get(LIVE2D_MODEL_NAME);\r\n      modelId ? (this.modelId = modelId) : (tihs.modelId = 1);\r\n      texturesId ? (this.texturesId = texturesId) : (this.texturesId = 0);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n.live2d-wrap {\r\n  position: fixed;\r\n  width: 300px;\r\n  height: 500px;\r\n  bottom: 10px;\r\n  left: 20px;\r\n\r\n  &:hover .live-operate {\r\n    display: flex;\r\n  }\r\n}\r\n\r\n.live-operate {\r\n  display: none;\r\n  position: absolute;\r\n  left: 44px;\r\n  bottom: 210px;\r\n  font-size: 20px;\r\n  color: #000;\r\n  flex-direction: column;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n\r\n  & i {\r\n    margin: 4px;\r\n    cursor: pointer;\r\n  }\r\n}\r\n</style>"]}]}