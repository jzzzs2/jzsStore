{"remainingRequest":"D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\src\\views\\Live2D.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\src\\views\\Live2D.vue","mtime":1680160376808},{"path":"D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":1678865247956},{"path":"D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\gitLocal\\5.vue\\练习\\43Vue20230408\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1678865248335}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgTGl2ZTJkIGZyb20gIkAvc3RhdGljL2xpdmUyZCI7DQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KaW1wb3J0IHN0b3JlIGZyb20gInN0b3JlIjsNCmNvbnN0IExJVkUyRF9NT0RFTF9OQU1FID0gImluZm9fbGl2ZTJkIjsNCmNvbnN0IEdFVF9VUkwgPSAiaHR0cHM6Ly9saXZlMmQuZmdocnNoLm5ldC9hcGkvZ2V0LyI7DQpjb25zdCBNT0RFTF9VUkwgPSAiaHR0cDovL2FwaS5mZ2hyc2gubmV0L2xpdmUyZC9zd2l0Y2gvIjsNCmNvbnN0IFRFWFRVUkVTX1VSTCA9ICJodHRwczovL2FwaS5mZ2hyc2gubmV0L2xpdmUyZC9yYW5kX3RleHR1cmVzLyI7DQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIG1vZGVsSWQ6IDEsDQogICAgICB0ZXh0dXJlc0lkOiAwLA0KICAgIH07DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgZGlyZWN0aW9uICgpIHsNCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5kaXJlY3Rpb24gfHwgImxlZnQiDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuaW5pdERhdGEoKTsNCiAgICB0aGlzLnN0YXJ0TG9hZEdpcmwoKTsNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgYXN5bmMgY2hhbmdlTW9kZWwoKSB7DQogICAgICB0cnkgew0KICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgYXhpb3MuZ2V0KGAke01PREVMX1VSTH0/aWQ9JHt0aGlzLm1vZGVsSWR9YCk7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdC5kYXRhLm1vZGVsLmlkLCJ4eHgxIik7DQogICAgICAgIHRoaXMubW9kZWxJZCA9IHJlc3VsdC5kYXRhLm1vZGVsLmlkOw0KICAgICAgICB0aGlzLnN0YXJ0TG9hZEdpcmwoKTsNCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUubG9nKCLliIfmjaLmqKHlnovlh7rplJkiKTsNCiAgICAgICAgdGhpcy5tb2RlbElkID0gNg0KICAgICAgICB0aGlzLnN0YXJ0TG9hZEdpcmwoKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIGNoYW5nZUNsb3RoZXMoKSB7DQogICAgICB0cnkgew0KICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgYXhpb3MuZ2V0KGAke1RFWFRVUkVTX1VSTH0/aWQ9JHt0aGlzLm1vZGVsSWR9YCk7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdCwieHh4MiIpOw0KICAgICAgICB0aGlzLnRleHR1cmVzSWQgPSByZXN1bHQuZGF0YS50ZXh0dXJlcy5pZDsNCiAgICAgICAgdGhpcy5zdGFydExvYWRHaXJsKCk7DQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmxvZygi5YiH5o2i6KGj5pyN5Ye66ZSZIik7DQogICAgICAgIHRoaXMudGV4dHVyZXNJZCA9IDYNCiAgICAgICAgdGhpcy5zdGFydExvYWRHaXJsKCk7DQogICAgICB9DQogICAgfSwNCiAgICBzdGFydExvYWRHaXJsKCkgew0KICAgICAgY29uc29sZS5sb2coIua4suafk2NhbnZhcyIpOw0KICAgICAgLy8gdGhpcy5pbml0RGF0YSgpDQogICAgICBsb2FkbGl2ZTJkKCJsaXZlMmQiLCBgJHtHRVRfVVJMfT9pZD0ke3RoaXMubW9kZWxJZH0tJHt0aGlzLnRleHR1cmVzSWR9YCk7DQogICAgICBzdG9yZS5zZXQoTElWRTJEX01PREVMX05BTUUsIHsNCiAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkLA0KICAgICAgICB0ZXh0dXJlc0lkOiB0aGlzLnRleHR1cmVzSWQsDQogICAgICB9KTsNCiAgICB9LA0KICAgIGluaXREYXRhKCkgew0KICAgICAgbGV0IHsgbW9kZWxJZCwgdGV4dHVyZXNJZCB9ID0gc3RvcmUuZ2V0KExJVkUyRF9NT0RFTF9OQU1FKTsNCiAgICAgIG1vZGVsSWQgPyAodGhpcy5tb2RlbElkID0gbW9kZWxJZCkgOiAodGlocy5tb2RlbElkID0gMSk7DQogICAgICB0ZXh0dXJlc0lkID8gKHRoaXMudGV4dHVyZXNJZCA9IHRleHR1cmVzSWQpIDogKHRoaXMudGV4dHVyZXNJZCA9IDApOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["Live2D.vue"],"names":[],"mappings":";AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Live2D.vue","sourceRoot":"src/views","sourcesContent":["<!--\r\n * @Descripttion: \r\n * @version: \r\n * @Author: sueRimn\r\n * @Date: 2023-03-28 15:10:14\r\n * @LastEditors: sueRimn\r\n * @LastEditTime: 2023-03-30 15:12:39\r\n-->\r\n<template>\r\n  <div class=\"live2d-wrap\" :class=\"direction\">\r\n    <div class=\"live-operate\">\r\n      <i class=\"el-icon-refresh-right\" @click=\"changeModel\"></i>\r\n      <i class=\"el-icon-arrow-down\" @click=\"changeClothes\"></i>\r\n    </div>\r\n    <canvas id=\"live2d\" width=\"300\" height=\"500\"> </canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Live2d from \"@/static/live2d\";\r\nimport axios from \"axios\";\r\nimport store from \"store\";\r\nconst LIVE2D_MODEL_NAME = \"info_live2d\";\r\nconst GET_URL = \"https://live2d.fghrsh.net/api/get/\";\r\nconst MODEL_URL = \"http://api.fghrsh.net/live2d/switch/\";\r\nconst TEXTURES_URL = \"https://api.fghrsh.net/live2d/rand_textures/\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      modelId: 1,\r\n      texturesId: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    direction () {\r\n      return this.$store.state.direction || \"left\"\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initData();\r\n    this.startLoadGirl();\r\n  },\r\n\r\n  methods: {\r\n    async changeModel() {\r\n      try {\r\n        let result = await axios.get(`${MODEL_URL}?id=${this.modelId}`);\r\n        // console.log(result.data.model.id,\"xxx1\");\r\n        this.modelId = result.data.model.id;\r\n        this.startLoadGirl();\r\n      } catch (error) {\r\n        console.log(\"切换模型出错\");\r\n        this.modelId = 6\r\n        this.startLoadGirl();\r\n      }\r\n    },\r\n    async changeClothes() {\r\n      try {\r\n        let result = await axios.get(`${TEXTURES_URL}?id=${this.modelId}`);\r\n        // console.log(result,\"xxx2\");\r\n        this.texturesId = result.data.textures.id;\r\n        this.startLoadGirl();\r\n      } catch (error) {\r\n        console.log(\"切换衣服出错\");\r\n        this.texturesId = 6\r\n        this.startLoadGirl();\r\n      }\r\n    },\r\n    startLoadGirl() {\r\n      console.log(\"渲染canvas\");\r\n      // this.initData()\r\n      loadlive2d(\"live2d\", `${GET_URL}?id=${this.modelId}-${this.texturesId}`);\r\n      store.set(LIVE2D_MODEL_NAME, {\r\n        modelId: this.modelId,\r\n        texturesId: this.texturesId,\r\n      });\r\n    },\r\n    initData() {\r\n      let { modelId, texturesId } = store.get(LIVE2D_MODEL_NAME);\r\n      modelId ? (this.modelId = modelId) : (tihs.modelId = 1);\r\n      texturesId ? (this.texturesId = texturesId) : (this.texturesId = 0);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n.live2d-wrap {\r\n  position: fixed;\r\n  width: 300px;\r\n  height: 500px;\r\n  bottom: 10px;\r\n  &:hover .live-operate {\r\n    display: flex;\r\n  }\r\n}\r\n.live2d-wrap.left {\r\n  left: 20px;\r\n}\r\n.live2d-wrap.right {\r\n  right: 20px\r\n}\r\n.live-operate {\r\n  display: none;\r\n  position: absolute;\r\n  left: 44px;\r\n  bottom: 210px;\r\n  font-size: 20px;\r\n  color: #000;\r\n  flex-direction: column;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n\r\n  & i {\r\n    margin: 4px;\r\n    cursor: pointer;\r\n    padding: 4px\r\n    border-radius: 50%\r\n    background-color #fff\r\n  }\r\n}\r\n</style>"]}]}