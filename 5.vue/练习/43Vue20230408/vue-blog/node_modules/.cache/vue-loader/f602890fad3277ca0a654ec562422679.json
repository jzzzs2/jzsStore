{"remainingRequest":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\src\\views\\Modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\src\\views\\Modal.vue","mtime":1679564466378},{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":1678865247956},{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\32Vue20230325\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1678865248335}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBjcmVhdGVOYW1lc3BhY2VkSGVscGVycyB9IGZyb20gInZ1ZXgiOw0KbGV0IHsgbWFwU3RhdGUgfSA9IGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzKCJtb2RhbCIpOw0KaW1wb3J0IEZvcm0gZnJvbSAiQC9jb21wb25lbnRzL0Zvcm0udnVlIjsNCmltcG9ydCBmb3JtRGF0YXMgZnJvbSAiQC9jb25maWcvbW9kYWwuY29uZmlnLmpzIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogew0KICAgIEZvcm0sDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHt9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIHVzZXJJbmZvKCkgew0KICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnVzZXJJbmZvIHx8ICLpu5jorqRuaWNrbmFtZSINCiAgICB9LA0KICAgIC4uLm1hcFN0YXRlKFsidHlwZSJdKSwNCiAgICBpc1Nob3c6IHsNCiAgICAgIHNldChkYXRhVikgew0KICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5tb2RhbC5pc1Nob3cgPSBkYXRhVjsNCiAgICAgIH0sDQogICAgICBnZXQoKSB7DQogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5tb2RhbC5pc1Nob3c7DQogICAgICB9LA0KICAgIH0sDQogICAgd2lkdGgoKSB7DQogICAgICByZXR1cm4gdGhpcy50eXBlID8gZm9ybURhdGFzW3RoaXMudHlwZV0ud2lkdGggOiAiIjsNCiAgICB9LA0KICAgIHRpdGxlKCkgew0KICAgICAgcmV0dXJuIHRoaXMudHlwZSA/IGZvcm1EYXRhc1t0aGlzLnR5cGVdLnRpdGxlIDogIiI7DQogICAgfSwNCiAgICBmb3JtRGF0YSgpIHsNCiAgICAgIHJldHVybiB0aGlzLnR5cGUgPyBmb3JtRGF0YXNbdGhpcy50eXBlXS5mb3JtRGF0YSA6ICIiOw0KICAgIH0sDQogICAgYnRucygpIHsNCiAgICAgIHJldHVybiB0aGlzLnR5cGUgPyBmb3JtRGF0YXNbdGhpcy50eXBlXS5idG5zIDogIiI7DQogICAgfSwNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICBjb25zb2xlLmxvZyh0aGlzLnR5cGUsIm1vdW50ZWQiKTsNCiAgICBjb25zb2xlLmxvZygiTU9ERUwg5Yib5bu6Iik7DQogIH0sDQogIGJlZm9yZURlc3Ryb3koKSB7DQogICAgY29uc29sZS5sb2coIk1PREFMIOmUgOavgSIpOw0KICB9LA0KICANCiAgbWV0aG9kczogew0KICAgIGhhbmRsZUNsb3NlKGRvbmUpIHsNCiAgICAgIGRvbmUoKTsNCiAgICB9LA0KICAgIGhhbmRsZUFnZW50KHR5cGUpIHsNCiAgICAgIHRoaXNbdHlwZV0oKTsNCiAgICB9LA0KICAgIGNvbmZpcm0oKSB7DQogICAgICBsZXQgZm9ybSA9IHRoaXMuJHJlZnNbImZvcm0iXTsNCiAgICAgIGZvcm0uJHJlZnNbImVsRm9ybSJdLnZhbGlkYXRlKGFzeW5jICh2YWxpZCkgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBsZXQgZGF0YSA9IGZvcm1bInJ1bGVGb3JtIl07DQogICAgICAgICAgY29uc29sZS5sb2coZGF0YSwiZm9ybSDmlbDmja4iKTsNCiAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMuJGh0dHAoeyB0eXBlOiB0aGlzLnR5cGUsIGRhdGEgfSk7DQogICAgICAgICAgICBpZiAocmVzdWx0LmRhdGEuZGF0YS50b2tlbikgew0KICAgICAgICAgICAgICAvL+S/ruaUueeKtuaAgeW5tuS4lOiOt+WPlueUqOaIt+S/oeaBrw0KICAgICAgICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic2V0VG9rZW4iLCByZXN1bHQuZGF0YS5kYXRhLnRva2VuKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT09ICJjbGFzc2lmeUFkZCIpIHsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2coIuinpuWPkeS4gOasoeaPkOS6pCIpOw0KICAgICAgICAgICAgICB0aGlzLiRidXMuJGVtaXQoImZsYXNoQ2xhc3NpZnkiKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goIm1vZGFsL2Nsb3NlTW9kYWwiKTsNCiAgICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IsImVycm9yIik7DQogICAgICAgICAgICBsZXQgbWVzc2FnZSA9IGVycm9yPy5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZTsNCiAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7DQogICAgICAgICAgICAgIHRpdGxlOiAi6K2m5ZGKIiwNCiAgICAgICAgICAgICAgbWVzc2FnZSwNCiAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLA0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBmb3JtLiRyZWZzWyJlbEZvcm0iXS5yZXNldEZpZWxkcygpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRub3RpZnkoew0KICAgICAgICAgICAgdGl0bGU6ICLorablkYoiLA0KICAgICAgICAgICAgbWVzc2FnZTogIuihqOWNleaVsOaNruS4jeespuWQiCIsDQogICAgICAgICAgICB0eXBlOiAid2FybmluZyIsDQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgY2xvc2UoKSB7DQogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgibW9kYWwvY2xvc2VNb2RhbCIpOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["Modal.vue"],"names":[],"mappings":";AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Modal.vue","sourceRoot":"src/views","sourcesContent":["<!--\r\n * @Descripttion: \r\n * @version: \r\n * @Author: sueRimn\r\n * @Date: 2023-03-16 15:06:23\r\n * @LastEditors: sueRimn\r\n * @LastEditTime: 2023-03-23 17:41:06\r\n-->\r\n<!--\r\n * @Descripttion: \r\n * @version: \r\n * @Author: sueRimn\r\n * @Date: 2023-03-16 15:06:23\r\n * @LastEditors: sueRimn\r\n * @LastEditTime: 2023-03-18 15:28:53\r\n-->\r\n<!--\r\n * @Descripttion: \r\n * @version: \r\n * @Author: sueRimn\r\n * @Date: 2023-03-16 15:06:23\r\n * @LastEditors: sueRimn\r\n * @LastEditTime: 2023-03-17 20:01:43\r\n-->\r\n<template>\r\n  <el-dialog\r\n    :title=\"title\"\r\n    :visible.sync=\"isShow\"\r\n    :width=\"width\"\r\n    :before-close=\"handleClose\"\r\n  >\r\n    <Form ref=\"form\" :type=\"type\" />\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button\r\n        :type=\"item.isSubmit ? 'primary' : ''\"\r\n        v-for=\"(item, idx) in btns\"\r\n        :key=\"idx\"\r\n        @click=\"handleAgent(item.targetName)\"\r\n        >{{ item.name }}</el-button\r\n      >\r\n    </span>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { createNamespacedHelpers } from \"vuex\";\r\nlet { mapState } = createNamespacedHelpers(\"modal\");\r\nimport Form from \"@/components/Form.vue\";\r\nimport formDatas from \"@/config/modal.config.js\";\r\nexport default {\r\n  components: {\r\n    Form,\r\n  },\r\n  data() {\r\n    return {};\r\n  },\r\n  computed: {\r\n    userInfo() {\r\n      return this.$store.userInfo || \"默认nickname\"\r\n    },\r\n    ...mapState([\"type\"]),\r\n    isShow: {\r\n      set(dataV) {\r\n        this.$store.state.modal.isShow = dataV;\r\n      },\r\n      get() {\r\n        return this.$store.state.modal.isShow;\r\n      },\r\n    },\r\n    width() {\r\n      return this.type ? formDatas[this.type].width : \"\";\r\n    },\r\n    title() {\r\n      return this.type ? formDatas[this.type].title : \"\";\r\n    },\r\n    formData() {\r\n      return this.type ? formDatas[this.type].formData : \"\";\r\n    },\r\n    btns() {\r\n      return this.type ? formDatas[this.type].btns : \"\";\r\n    },\r\n  },\r\n  mounted() {\r\n    console.log(this.type,\"mounted\");\r\n    console.log(\"MODEL 创建\");\r\n  },\r\n  beforeDestroy() {\r\n    console.log(\"MODAL 销毁\");\r\n  },\r\n  \r\n  methods: {\r\n    handleClose(done) {\r\n      done();\r\n    },\r\n    handleAgent(type) {\r\n      this[type]();\r\n    },\r\n    confirm() {\r\n      let form = this.$refs[\"form\"];\r\n      form.$refs[\"elForm\"].validate(async (valid) => {\r\n        if (valid) {\r\n          let data = form[\"ruleForm\"];\r\n          console.log(data,\"form 数据\");\r\n          try {\r\n            let result = await this.$http({ type: this.type, data });\r\n            if (result.data.data.token) {\r\n              //修改状态并且获取用户信息\r\n              await this.$store.dispatch(\"setToken\", result.data.data.token);\r\n            }\r\n            if (this.type === \"classifyAdd\") {\r\n              console.log(\"触发一次提交\");\r\n              this.$bus.$emit(\"flashClassify\")\r\n            }\r\n            this.$store.dispatch(\"modal/closeModal\");\r\n          } catch (error) {\r\n            console.log(error,\"error\");\r\n            let message = error?.response?.data?.message;\r\n            this.$notify({\r\n              title: \"警告\",\r\n              message,\r\n              type: \"warning\",\r\n            });\r\n            form.$refs[\"elForm\"].resetFields();\r\n          }\r\n        } else {\r\n          this.$notify({\r\n            title: \"警告\",\r\n            message: \"表单数据不符合\",\r\n            type: \"warning\",\r\n          });\r\n        }\r\n      });\r\n    },\r\n    close() {\r\n      this.$store.dispatch(\"modal/closeModal\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>"]}]}