{"remainingRequest":"D:\\十字波\\五.vue框架\\练习\\43Vue20230408\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\十字波\\五.vue框架\\练习\\43Vue20230408\\vue-blog\\src\\components\\article\\ArticleInfoBar.vue?vue&type=style&index=0&id=7bbf127a&prod&lang=stylus&","dependencies":[{"path":"D:\\十字波\\五.vue框架\\练习\\43Vue20230408\\vue-blog\\src\\components\\article\\ArticleInfoBar.vue","mtime":1680246228956},{"path":"D:\\十字波\\五.vue框架\\练习\\43Vue20230408\\vue-blog\\node_modules\\css-loader\\dist\\cjs.js","mtime":1678865247387},{"path":"D:\\十字波\\五.vue框架\\练习\\43Vue20230408\\vue-blog\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1678865249033},{"path":"D:\\十字波\\五.vue框架\\练习\\43Vue20230408\\vue-blog\\node_modules\\postcss-loader\\src\\index.js","mtime":1678865247954},{"path":"D:\\十字波\\五.vue框架\\练习\\43Vue20230408\\vue-blog\\node_modules\\stylus-loader\\index.js","mtime":1678866957323},{"path":"D:\\十字波\\五.vue框架\\练习\\43Vue20230408\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\43Vue20230408\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1678865248335}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci50b3VjaAogIGN1cnNvcjogcG9pbnRlcgouYWN0aXZlCiAgY29sb3IgY3lhbgogIGJhY2tncm91bmQtY29sb3IgI2NjYwogIGJvcmRlci1yYWRpdXM6IDUwJQo="},{"version":3,"sources":["ArticleInfoBar.vue"],"names":[],"mappings":";AA+HA;AACA;AACA;AACA;AACA;AACA","file":"ArticleInfoBar.vue","sourceRoot":"src/components/article","sourcesContent":["<!--\r\n * @Descripttion: \r\n * @version: \r\n * @Author: sueRimn\r\n * @Date: 2023-03-25 18:13:07\r\n * @LastEditors: sueRimn\r\n * @LastEditTime: 2023-03-31 15:03:19\r\n-->\r\n<template>\r\n  <div class=\"blog-descript-info\">\r\n    <p class=\"time\">\r\n      <i class=\"el-icon-time\"></i><span>{{ createtime }}</span>\r\n    </p>\r\n    <p><i class=\"el-icon-s-custom\"></i>{{ nickname }}</p>\r\n    <p class=\"visible-xs\"><i class=\"el-icon-view\"></i>{{ clicks_num }}</p>\r\n    <p class=\"visible-xs\">\r\n      <i class=\"el-icon-s-comment\"></i>{{ comments_num }}\r\n    </p>\r\n    <p class=\"visible-xs\" ><i class=\"el-icon-star-on touch\" @click=\"operateHits\" :class=\"{active: isLike}\"></i>{{ hits_num }}</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport store from \"store\"\r\nimport { createNamespacedHelpers } from \"vuex\";\r\nlet { mapGetters,mapActions } = createNamespacedHelpers(\"hits\");\r\nexport default {\r\n  data() {\r\n    return {\r\n      // isLike: false,\r\n      aid: \"\",\r\n      step: 0\r\n    };\r\n  },\r\n  \r\n  props: {\r\n    articleInfo: {\r\n      type: Object\r\n    }\r\n  },\r\n  created() {\r\n    console.log(\"渲染了 文章内的星号\");\r\n    let aid = this.$route.params[\"id\"]\r\n    console.log(aid,\"$route\");\r\n    this.aid = aid\r\n    // console.log(this.is_hits(aid),\"if1\");\r\n    console.log(\"create articleInfobar\",store.get(\"HITS_ARTICLES\"));\r\n    if (store.get(\"HITS_ARTICLES\") === undefined) {\r\n      console.log(\"设置数组\");\r\n      store.set(\"HITS_ARTICLES\",[])\r\n    }\r\n    this.setArticlePosition()\r\n    // this.isLike = this.is_hits()(aid)\r\n  },\r\n  computed: {\r\n\r\n    isLike() {\r\n      return this.is_hits()(this.aid)\r\n    },\r\n    createtime() {\r\n      return this.articleInfo?.createtime || \"默认时间\";\r\n    },\r\n    nickname() {\r\n      return this.articleInfo?.author?.nickname || \"默认昵称\";\r\n    },\r\n    clicks_num() {\r\n      return this.articleInfo?.clicks_num || 0;\r\n    },\r\n    comments_num() {\r\n      return this.articleInfo?.comments_num || 0;\r\n    },\r\n    hits_num() {\r\n      return this.articleInfo?.hits_num + this.step || 0;\r\n    },\r\n  },\r\n  mounted() {\r\n    console.log(\"绑定\");\r\n    this.$bus.$on(\"up\",this.up)\r\n    this.$bus.$on(\"down\",this.down)\r\n  },\r\n  beforeDestroy() {\r\n    console.log(\"解绑\");\r\n    this.$bus.$off(\"up\",this.up)\r\n    this.$bus.$off(\"down\",this.down)\r\n  },\r\n  \r\n  methods: {\r\n    up () {\r\n      console.log(\"触发up\");\r\n      this.step+=1\r\n    },\r\n    down () {\r\n      console.log(\"触发down\");\r\n      this.step-=1\r\n    },\r\n    async operateHits () {\r\n      let aid = this.aid\r\n      let judge = null\r\n      console.log(\"click\");\r\n      console.log(this.isLike,\"this.like\");\r\n      this.isLike?this.down():this.up()\r\n      judge = !this.isLike\r\n      judge ?\r\n      this.pushArticle({aid})\r\n      :\r\n      this.pullArticle({aid})\r\n      //操作数据库\r\n      let result = null;\r\n      judge ?\r\n      result = await this.$http({type: \"likeOperate\",data: {params:{isAdd: true,id: aid}}}) :\r\n      result = await this.$http({type: \"likeOperate\",data: {params:{isAdd: false,id: aid}}})\r\n      console.log(result,\"xxx\");\r\n    },\r\n    ...mapGetters([\"is_hits\"]),\r\n    ...mapActions([\"pushArticle\",\"pullArticle\",\"setArticlePosition\"])\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n  .touch\r\n    cursor: pointer\r\n  .active\r\n    color cyan\r\n    background-color #ccc\r\n    border-radius: 50%\r\n</style>"]}]}