{"remainingRequest":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\src\\components\\article\\ArticleInfoBar.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\src\\components\\article\\ArticleInfoBar.vue","mtime":1680246228956},{"path":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":1678865247956},{"path":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678865246950},{"path":"D:\\十字波\\五.vue框架\\练习\\37Vue20230331\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1678865248335}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgc3RvcmUgZnJvbSAic3RvcmUiDQppbXBvcnQgeyBjcmVhdGVOYW1lc3BhY2VkSGVscGVycyB9IGZyb20gInZ1ZXgiOw0KbGV0IHsgbWFwR2V0dGVycyxtYXBBY3Rpb25zIH0gPSBjcmVhdGVOYW1lc3BhY2VkSGVscGVycygiaGl0cyIpOw0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICAvLyBpc0xpa2U6IGZhbHNlLA0KICAgICAgYWlkOiAiIiwNCiAgICAgIHN0ZXA6IDANCiAgICB9Ow0KICB9LA0KICANCiAgcHJvcHM6IHsNCiAgICBhcnRpY2xlSW5mbzogew0KICAgICAgdHlwZTogT2JqZWN0DQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIGNvbnNvbGUubG9nKCLmuLLmn5PkuoYg5paH56ug5YaF55qE5pif5Y+3Iik7DQogICAgbGV0IGFpZCA9IHRoaXMuJHJvdXRlLnBhcmFtc1siaWQiXQ0KICAgIGNvbnNvbGUubG9nKGFpZCwiJHJvdXRlIik7DQogICAgdGhpcy5haWQgPSBhaWQNCiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmlzX2hpdHMoYWlkKSwiaWYxIik7DQogICAgY29uc29sZS5sb2coImNyZWF0ZSBhcnRpY2xlSW5mb2JhciIsc3RvcmUuZ2V0KCJISVRTX0FSVElDTEVTIikpOw0KICAgIGlmIChzdG9yZS5nZXQoIkhJVFNfQVJUSUNMRVMiKSA9PT0gdW5kZWZpbmVkKSB7DQogICAgICBjb25zb2xlLmxvZygi6K6+572u5pWw57uEIik7DQogICAgICBzdG9yZS5zZXQoIkhJVFNfQVJUSUNMRVMiLFtdKQ0KICAgIH0NCiAgICB0aGlzLnNldEFydGljbGVQb3NpdGlvbigpDQogICAgLy8gdGhpcy5pc0xpa2UgPSB0aGlzLmlzX2hpdHMoKShhaWQpDQogIH0sDQogIGNvbXB1dGVkOiB7DQoNCiAgICBpc0xpa2UoKSB7DQogICAgICByZXR1cm4gdGhpcy5pc19oaXRzKCkodGhpcy5haWQpDQogICAgfSwNCiAgICBjcmVhdGV0aW1lKCkgew0KICAgICAgcmV0dXJuIHRoaXMuYXJ0aWNsZUluZm8/LmNyZWF0ZXRpbWUgfHwgIum7mOiupOaXtumXtCI7DQogICAgfSwNCiAgICBuaWNrbmFtZSgpIHsNCiAgICAgIHJldHVybiB0aGlzLmFydGljbGVJbmZvPy5hdXRob3I/Lm5pY2tuYW1lIHx8ICLpu5jorqTmmLXnp7AiOw0KICAgIH0sDQogICAgY2xpY2tzX251bSgpIHsNCiAgICAgIHJldHVybiB0aGlzLmFydGljbGVJbmZvPy5jbGlja3NfbnVtIHx8IDA7DQogICAgfSwNCiAgICBjb21tZW50c19udW0oKSB7DQogICAgICByZXR1cm4gdGhpcy5hcnRpY2xlSW5mbz8uY29tbWVudHNfbnVtIHx8IDA7DQogICAgfSwNCiAgICBoaXRzX251bSgpIHsNCiAgICAgIHJldHVybiB0aGlzLmFydGljbGVJbmZvPy5oaXRzX251bSArIHRoaXMuc3RlcCB8fCAwOw0KICAgIH0sDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgY29uc29sZS5sb2coIue7keWumiIpOw0KICAgIHRoaXMuJGJ1cy4kb24oInVwIix0aGlzLnVwKQ0KICAgIHRoaXMuJGJ1cy4kb24oImRvd24iLHRoaXMuZG93bikNCiAgfSwNCiAgYmVmb3JlRGVzdHJveSgpIHsNCiAgICBjb25zb2xlLmxvZygi6Kej57uRIik7DQogICAgdGhpcy4kYnVzLiRvZmYoInVwIix0aGlzLnVwKQ0KICAgIHRoaXMuJGJ1cy4kb2ZmKCJkb3duIix0aGlzLmRvd24pDQogIH0sDQogIA0KICBtZXRob2RzOiB7DQogICAgdXAgKCkgew0KICAgICAgY29uc29sZS5sb2coIuinpuWPkXVwIik7DQogICAgICB0aGlzLnN0ZXArPTENCiAgICB9LA0KICAgIGRvd24gKCkgew0KICAgICAgY29uc29sZS5sb2coIuinpuWPkWRvd24iKTsNCiAgICAgIHRoaXMuc3RlcC09MQ0KICAgIH0sDQogICAgYXN5bmMgb3BlcmF0ZUhpdHMgKCkgew0KICAgICAgbGV0IGFpZCA9IHRoaXMuYWlkDQogICAgICBsZXQganVkZ2UgPSBudWxsDQogICAgICBjb25zb2xlLmxvZygiY2xpY2siKTsNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuaXNMaWtlLCJ0aGlzLmxpa2UiKTsNCiAgICAgIHRoaXMuaXNMaWtlP3RoaXMuZG93bigpOnRoaXMudXAoKQ0KICAgICAganVkZ2UgPSAhdGhpcy5pc0xpa2UNCiAgICAgIGp1ZGdlID8NCiAgICAgIHRoaXMucHVzaEFydGljbGUoe2FpZH0pDQogICAgICA6DQogICAgICB0aGlzLnB1bGxBcnRpY2xlKHthaWR9KQ0KICAgICAgLy/mk43kvZzmlbDmja7lupMNCiAgICAgIGxldCByZXN1bHQgPSBudWxsOw0KICAgICAganVkZ2UgPw0KICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy4kaHR0cCh7dHlwZTogImxpa2VPcGVyYXRlIixkYXRhOiB7cGFyYW1zOntpc0FkZDogdHJ1ZSxpZDogYWlkfX19KSA6DQogICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLiRodHRwKHt0eXBlOiAibGlrZU9wZXJhdGUiLGRhdGE6IHtwYXJhbXM6e2lzQWRkOiBmYWxzZSxpZDogYWlkfX19KQ0KICAgICAgY29uc29sZS5sb2cocmVzdWx0LCJ4eHgiKTsNCiAgICB9LA0KICAgIC4uLm1hcEdldHRlcnMoWyJpc19oaXRzIl0pLA0KICAgIC4uLm1hcEFjdGlvbnMoWyJwdXNoQXJ0aWNsZSIsInB1bGxBcnRpY2xlIiwic2V0QXJ0aWNsZVBvc2l0aW9uIl0pDQogIH0sDQp9Ow0K"},{"version":3,"sources":["ArticleInfoBar.vue"],"names":[],"mappings":";AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ArticleInfoBar.vue","sourceRoot":"src/components/article","sourcesContent":["<!--\r\n * @Descripttion: \r\n * @version: \r\n * @Author: sueRimn\r\n * @Date: 2023-03-25 18:13:07\r\n * @LastEditors: sueRimn\r\n * @LastEditTime: 2023-03-31 15:03:19\r\n-->\r\n<template>\r\n  <div class=\"blog-descript-info\">\r\n    <p class=\"time\">\r\n      <i class=\"el-icon-time\"></i><span>{{ createtime }}</span>\r\n    </p>\r\n    <p><i class=\"el-icon-s-custom\"></i>{{ nickname }}</p>\r\n    <p class=\"visible-xs\"><i class=\"el-icon-view\"></i>{{ clicks_num }}</p>\r\n    <p class=\"visible-xs\">\r\n      <i class=\"el-icon-s-comment\"></i>{{ comments_num }}\r\n    </p>\r\n    <p class=\"visible-xs\" ><i class=\"el-icon-star-on touch\" @click=\"operateHits\" :class=\"{active: isLike}\"></i>{{ hits_num }}</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport store from \"store\"\r\nimport { createNamespacedHelpers } from \"vuex\";\r\nlet { mapGetters,mapActions } = createNamespacedHelpers(\"hits\");\r\nexport default {\r\n  data() {\r\n    return {\r\n      // isLike: false,\r\n      aid: \"\",\r\n      step: 0\r\n    };\r\n  },\r\n  \r\n  props: {\r\n    articleInfo: {\r\n      type: Object\r\n    }\r\n  },\r\n  created() {\r\n    console.log(\"渲染了 文章内的星号\");\r\n    let aid = this.$route.params[\"id\"]\r\n    console.log(aid,\"$route\");\r\n    this.aid = aid\r\n    // console.log(this.is_hits(aid),\"if1\");\r\n    console.log(\"create articleInfobar\",store.get(\"HITS_ARTICLES\"));\r\n    if (store.get(\"HITS_ARTICLES\") === undefined) {\r\n      console.log(\"设置数组\");\r\n      store.set(\"HITS_ARTICLES\",[])\r\n    }\r\n    this.setArticlePosition()\r\n    // this.isLike = this.is_hits()(aid)\r\n  },\r\n  computed: {\r\n\r\n    isLike() {\r\n      return this.is_hits()(this.aid)\r\n    },\r\n    createtime() {\r\n      return this.articleInfo?.createtime || \"默认时间\";\r\n    },\r\n    nickname() {\r\n      return this.articleInfo?.author?.nickname || \"默认昵称\";\r\n    },\r\n    clicks_num() {\r\n      return this.articleInfo?.clicks_num || 0;\r\n    },\r\n    comments_num() {\r\n      return this.articleInfo?.comments_num || 0;\r\n    },\r\n    hits_num() {\r\n      return this.articleInfo?.hits_num + this.step || 0;\r\n    },\r\n  },\r\n  mounted() {\r\n    console.log(\"绑定\");\r\n    this.$bus.$on(\"up\",this.up)\r\n    this.$bus.$on(\"down\",this.down)\r\n  },\r\n  beforeDestroy() {\r\n    console.log(\"解绑\");\r\n    this.$bus.$off(\"up\",this.up)\r\n    this.$bus.$off(\"down\",this.down)\r\n  },\r\n  \r\n  methods: {\r\n    up () {\r\n      console.log(\"触发up\");\r\n      this.step+=1\r\n    },\r\n    down () {\r\n      console.log(\"触发down\");\r\n      this.step-=1\r\n    },\r\n    async operateHits () {\r\n      let aid = this.aid\r\n      let judge = null\r\n      console.log(\"click\");\r\n      console.log(this.isLike,\"this.like\");\r\n      this.isLike?this.down():this.up()\r\n      judge = !this.isLike\r\n      judge ?\r\n      this.pushArticle({aid})\r\n      :\r\n      this.pullArticle({aid})\r\n      //操作数据库\r\n      let result = null;\r\n      judge ?\r\n      result = await this.$http({type: \"likeOperate\",data: {params:{isAdd: true,id: aid}}}) :\r\n      result = await this.$http({type: \"likeOperate\",data: {params:{isAdd: false,id: aid}}})\r\n      console.log(result,\"xxx\");\r\n    },\r\n    ...mapGetters([\"is_hits\"]),\r\n    ...mapActions([\"pushArticle\",\"pullArticle\",\"setArticlePosition\"])\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n  .touch\r\n    cursor: pointer\r\n  .active\r\n    color cyan\r\n    background-color #ccc\r\n    border-radius: 50%\r\n</style>"]}]}