<!--
 * @Descripttion: 
 * @version: 
 * @Author: sueRimn
 * @Date: 2023-07-22 16:40:26
 * @LastEditors: sueRimn
 * @LastEditTime: 2023-07-23 12:10:21
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>generator</title>
</head>

<body>
  <script>
    // 1. generator函数
    // function * helloWorld () {
    //   yield "hellow";
    //   yield "world";
    //   yield "ending22";
    //   return "ending"
    // }
    // var fnc  = helloWorld()
    // console.log(fnc);
    // console.log(fnc.next());
    // console.log(fnc.next());
    // console.log(fnc.next());
    // console.log(fnc.next());
    // console.log(fnc.next());
    // 2. next方法参数 给上一个yield表达式进行赋值
    // function * foo (x) {
    //   console.log("start");
    //   var y = 2 * (yield (x + 1))
    //   console.log(y,"y");
    //   var z = yield (y / 3)
    //   console.log(z,"z");
    //   return (x + y + z)
    // }
    // var fnc  = foo(5)
    // let result = fnc.next()
    // console.log(result,"result");
    // fnc.next()
    // fnc.next()
    // 3. Generator for of 
    // function* dataConsumer() {
    //   console.log('Started');
    //   console.log(`1. ${yield}`);
    //   console.log(`2. ${yield}`);
    //   return 'result';
    // }
    // let genObj = dataConsumer();
    // genObj.next();
    // // Started
    // genObj.next('a')
    // // 1. a
    // genObj.next('b')
    // 2. b
    // 4. for of循环可以自动遍历 generator返回的Iterator对象,不再需要调用next方法
    // function * foo() {
    //   yield "first"
    //   yield "second"
    //   yield "third"
    //   yield "four"
    //   return "8"
    // }
    // for (let i of foo()) {
    //   console.log(i,"ixxx");
    // }
    // 5. generator.prototype.throw()
    // var g = function* () {
    //   try {
    //     yield;
    //   } catch (e) {
    //     console.log('内部捕获', e);
    //   }
    // };

    // var i = g();
    // i.next();

    // try {
    //   i.throw('a');
    //   i.throw('b');
    // } catch (e) {
    //   console.log('外部捕获', e);
    // }
    // 内部捕获 a
    // 外部捕获 b
    //6.application 异步操作的同步化表达
    function* main() {
      var result = yield request("http://baidu.com")
      var resp = JSON.parse(result)
      console.log(resp.value);
    }
    function request(url) {
      makeAjax(url, function (response) {
        it.next(response)
      })
    }
    var it = main()
    it.next()
    //7.给普通对象部署Iterator接口
    function* iterEntries(obj) {
      let keys = Object.keys(obj);
      for (let i = 0; i < keys.length; i++) {
        let key = keys[i];
        yield [key, obj[key]];
      }
    }
    let myObj = { foo: 3, bar: 7 };
    for (let [key, value] of iterEntries(myObj)) {
      console.log(key, value);
    }
// foo 3
// bar 7
  </script>
</body>

</html>