## 小程序

```
1.需要注册账号 创建项目 进行发布
2.不使用代码编辑器,而是微信开发者工具开发
3.体积小
```

## 结构组成

```
1.app.json 小程序全局配置 有路径,全局配置,当和页面内json文件配置重复时,采用该页面的json配置.
2.project.config.json 项目的配置,appId,项目名称,编译配置等
3.app.wxss 全局样式,每个page都使用
4.sitemap.json 该小程序是否被微信检索 allow | disallow
```

## 新建小程序页面

```
在app.json的pages选项中,添加新页面的路径即可,并且pages数组的第一位作为首页页面
```

## vxss

```
可以使用最新单位rpx
```

## vxml

```
和HTML不同,标签,标签属性不同,具有vue的数据绑定,列表渲染,条件渲染语法等
```

## app.js 和 小程序页面中的js

```
app.js是小程序项目的入口文件,同理,页面中的js也是页面的启动文件.
```

## 环境

```
小程序依赖的环境是手机微信,小程序借助它提供的能力,可以完成很多功能,比如微信扫码,支付,定位等
```

> 小程序的通信: 逻辑层(js)和渲染层(vxss,vxml)和第三方服务器之间的通信,渲染层和逻辑层通过微信客户端通信,逻辑层和第三方服务器通过微信客户端通信.

> 小程序的启动过程: 1)下载小程序数据包 2) 运行app.json配置文件 3)app.js执行,App()创建小程序实例 4) 渲染小程序首页

> 页面渲染过程: 1)运行json配置文件 2)加载vxss,vxml 3)xx.js,创建页面 4)渲染完成

## 常用容器组件

```
1.
view 可以认为是div
scroll-view 可以用于设置滚动条,只需要设置容器固定高宽,在写上scroll-y/scroll-x即可
2.
text 可以认为是span, user-select属性,代表长按进行复制等操作
text-rich nodes="<a href='#'>点击跳转</a>"  可以渲染html内容为实际标签
3.
swiper 轮播图容器
swiper-item 轮播图内容
swiper属性: indicator-dots indicator-color="white" indicator-active-color="pink" circular
autoplay  interval="1500"
4.
button
属性: type='primary' type='warn' | size="mini" | plain 镂空,并有边框
5. image
属性src
属性mode:
aspectFit 等比缩放,当image设置样式中较长一端,能够完整显示图像时停止.
aspectFill 等比缩放,当image设置样式中较短一端,能够完整显示图像时停止.
widthFix 等比缩放,当image设置样式的宽度能够显示完整图像时停止,高度自适应
heightFix 等比缩放,当image设置样式的高度能够显示完整图像时停止,宽度自适应
```

## 小程序API分类

```
1)事件监听API, 以on开头,wx.onWindowResize(function callback)
2)同步API, 以Sync结尾的API,执行结果可以通过函数返回值直接获得.wx.setStorageSync('key','value')
3)异步API ajax,  ex.request()发起网络请求
```

## 数据绑定

```
1.配置
在对应页面的.js中的Page函数中的参数进行配置,key为data,value为一个对象
Page({
data: {
src: "http://xxxxx"
}
})
<image src="{{src}}">
2.使用
可以在{{}}中进行运算,三元
{{type===1?'男':'女'}}
{{number * 10}}
```

## 常用事件

```
1.tap 类似于网页端click
2.input 文本框输入
3.change 状态改变
绑定方式: bind事件名='回调函数名',只能写单纯的函数名,传参通过data-参数='值'的方式传递,在回调函数定义处,通过e.target.dataset取出.
```

+ data-info="{{2}}" 传递数字2  data-info="2" 传递字符2 规则和Vue中一样

> 事件对象的属性

```
target  事件触发的源对象 
currentTarget 绑定了事件的对象
detail input框输入最新值,触发input事件,可以通过e.detail中的value获取最新值
type 事件类型
timeStamp 从页面渲染完成到事件触发的时间间隔
touches 
changedTouches
```

> 回调函数

```
1)书写位置和data属性并列
2)修改data数据通过方法
this.setData({
	key: this.data.key + 其他操作
})
```

## 条件渲染和列表渲染

> 1.条件渲染

```
1. wx:if="{{isShow}}"
2. wx:if="{{type===1}}" wx:elif="{{type===0}}" wx:else
```

> ```
> 一次渲染|不渲染多个组件  用block标签包裹多个组件,block不渲染,类比vue中template
> ```

> hidden 通过样式(display)改变组件显示状态,类比v-show
>
> ```
> <view hidden="{{true}}"></view>
> ```

> 2.列表渲染
>
> ```
> <view wx:for="{{list}}">
> 索引是{{index}} 值是{{item}}
> </view>
> 
> 指定索引变量和索引值变量
> <view wx:for="{{list}}" wx:for-index="idx" wx:for-item="itemName">
> 索引是{{idx}} 值是{{itemName}}
> </view>
> 
> wx:key="index" 不用写{{}}
> ```
>
> 

## wxss

```
1.可以使用rpx单位,原理:设备宽度被默认分割为750rpx,进行自动适配.
2.可以使用@import '相对路径' ,导入wxss样式
```

```
局部样式和全局样式冲突时,看权重.相等时采用局部
```

## 全局配置window

```
1.window包括了navigation, 背景部分
navigation部分:
navigationBarBackgroundColor: hex形式颜色
navigationBarTitleText:
navigationBarTextStyle: white | black
背景部分:
要看到背景部分首先要开启下拉刷新 enablePullDownRefresh: true
然后可以设置背景参数:
backgroundColor hex形式颜色
backgroundTextStyle dark | light

onReachBottomDistance: 数字 代表当下拉框距离顶部多少距离时,加载数据
```

## tabBar

```
在app.json中配置
1)在pages中输入作为tabBar页面的路径
2)和pages参数并列,配置
tarBar: {
	list: [
		{
		pagePath: "页面路径",
		text: "tabbar栏目内容",
		iconPath: "未选择时tab栏图片",
		selectedIconPath: "选中时tab栏图片"
		}
	],
	backgroundColor: "#eee",  //tabBar栏背景色
	borderStyle: "black"  //tabBar栏上边框颜色
	color: "#xxx", // 未选中tab栏文字颜色
	selectedColor: "#xxx" //选中时tab栏文字颜色
}
```

+ 作为tabBar的页面必须在pages数组的前三位,不然无效
+ tabBar最少需要两个页面,最多只能五个页面
+ 渲染顶部tabBar时,不显示图标图片

## 页面配置

```
1) 配置页面窗口表现
配置项和全局配置项中window类似,
在页面.json中出现和app.json中window属性中相同配置,优先使用页面.json中的配置
```

