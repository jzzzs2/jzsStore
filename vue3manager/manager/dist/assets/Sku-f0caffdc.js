import{H as b,d as R,k as f,l as K,g as c,I as Q,o as _,c as C,a as e,w as t,u as l,m as A,h as z,J as D,i as r,t as v,F as x,e as N,b as V,G as I,y as W,z as X}from"./index-af70c94f.js";import{_ as Y}from"./_plugin-vue_export-helper-c27b6911.js";const Z=(n,g)=>b.get(`/admin/product/list/${n}/${g}`),ee=n=>b.get(`${"/admin/product/onSale/"+n}`),te=n=>b.get(`${"/admin/product/cancelSale/"+n}`),ae=n=>b.delete(`${"/admin/product/deleteSku/"+n}`),le=n=>b.get(`${"/admin/product/getSkuInfo/"+n}`),se=n=>(W("data-v-1bf13ec8"),n=n(),X(),n),ne=["src"],oe=se(()=>A("h4",null,"查看商品详情",-1)),ue=["src"],ce=R({__name:"Sku",setup(n){let g=f([]),i=f(1),k=f(10),B=f(0),S=async(o=1)=>{i.value=o;let s=await Z(i.value,k.value);g.value=s.data.records,B.value=s.data.total},E=async o=>{let s=o.id;o.isSale?await te(s):await ee(s),I({type:"success",message:o.isSale?"下架成功":"上架成功"}),S(i.value)},F=()=>{I({type:"success",message:"待开发捏"})},O=async o=>{(await ae(o.id)).code===200?(I({type:"success",message:"删除成功"}),S(g.value.length>1?i.value:i.value-1)):I({type:"error",message:"系统数据不可删除"})},M=()=>{S()},d=f({}),h=f(!1),T=async o=>{h.value=!0;let s=await le(o.id);d.value=s.data};return K(()=>{S()}),(o,s)=>{const p=c("el-table-column"),y=c("el-button"),j=c("el-table"),q=c("el-pagination"),G=c("el-card"),u=c("el-col"),m=c("el-row"),L=c("el-tag"),H=c("el-carousel-item"),J=c("el-carousel"),P=c("el-drawer"),w=Q("has");return _(),C(x,null,[e(G,null,{default:t(()=>[e(j,{border:"",data:l(g)},{default:t(()=>[e(p,{type:"index",label:"序号",width:"100px"}),e(p,{"show-overflow-tooltip":"",label:"名称",prop:"skuName"}),e(p,{"show-overflow-tooltip":"",label:"描述",prop:"skuDesc"}),e(p,{label:"默认图片"},{default:t(({row:a,$index:$})=>[A("img",{src:a.skuDefaultImg,style:{width:"100px",height:"100px"}},null,8,ne)]),_:1}),e(p,{label:"重量(g)",prop:"weight"}),e(p,{label:"价格(元)",prop:"price"}),e(p,{label:"操作",width:"240px"},{default:t(({row:a,$index:$})=>[z(e(y,{icon:a.isSale?"Bottom":"Top",onClick:U=>l(E)(a),size:"small",type:"success"},null,8,["icon","onClick"]),[[w,"btn.Sku.updown"]]),z(e(y,{icon:"Edit",onClick:l(F),size:"small",type:"primary"},null,8,["onClick"]),[[w,"btn.Sku.update"]]),z(e(y,{icon:"InfoFilled",type:"warning",onClick:U=>l(T)(a),size:"small"},null,8,["onClick"]),[[w,"btn.Sku.detail"]]),z(e(y,{icon:"Delete",type:"danger",onClick:U=>l(O)(a),size:"small"},null,8,["onClick"]),[[w,"btn.Sku.remove"]])]),_:1})]),_:1},8,["data"]),e(q,{"current-page":l(i),"onUpdate:currentPage":s[0]||(s[0]=a=>D(i)?i.value=a:i=a),"page-size":l(k),"onUpdate:pageSize":s[1]||(s[1]=a=>D(k)?k.value=a:k=a),"page-sizes":[10,20,30,40],background:o.background,layout:"prev, pager, next, jumper,->, sizes, total ",total:l(B),onSizeChange:l(M),onCurrentChange:l(S)},null,8,["current-page","page-size","background","total","onSizeChange","onCurrentChange"])]),_:1}),e(P,{modelValue:l(h),"onUpdate:modelValue":s[2]||(s[2]=a=>D(h)?h.value=a:h=a),direction:o.rtl},{header:t(()=>[oe]),default:t(()=>[e(m,{class:"m10"},{default:t(()=>[e(u,{span:6},{default:t(()=>[r("名称")]),_:1}),e(u,{span:18},{default:t(()=>[r(v(l(d).skuName),1)]),_:1})]),_:1}),e(m,{class:"m10"},{default:t(()=>[e(u,{span:6},{default:t(()=>[r("描述")]),_:1}),e(u,{span:18},{default:t(()=>[r(v(l(d).skuDesc),1)]),_:1})]),_:1}),e(m,{class:"m10"},{default:t(()=>[e(u,{span:6},{default:t(()=>[r("价格")]),_:1}),e(u,{span:18},{default:t(()=>[r(v(l(d).price),1)]),_:1})]),_:1}),e(m,{class:"m10"},{default:t(()=>[e(u,{span:6},{default:t(()=>[r("平台属性")]),_:1}),e(u,{span:18},{default:t(()=>[(_(!0),C(x,null,N(l(d).skuAttrValueList,a=>(_(),V(L,{class:"m4",type:"success"},{default:t(()=>[r(v(a.attrName),1)]),_:2},1024))),256))]),_:1})]),_:1}),e(m,{class:"m10"},{default:t(()=>[e(u,{span:6},{default:t(()=>[r("销售属性")]),_:1}),e(u,{span:18},{default:t(()=>[(_(!0),C(x,null,N(l(d).skuSaleAttrValueList,a=>(_(),V(L,{class:"m4",type:"success"},{default:t(()=>[r(v(a.saleAttrName),1)]),_:2},1024))),256))]),_:1})]),_:1}),e(m,{class:"m10"},{default:t(()=>[e(u,{span:6},{default:t(()=>[r("商品图片")]),_:1}),e(u,{span:18},{default:t(()=>[e(J,{interval:2e3,type:"card",height:"200px","indicator-position":"outside"},{default:t(()=>[(_(!0),C(x,null,N(l(d).skuImageList,(a,$)=>(_(),V(H,{key:$},{default:t(()=>[A("img",{src:a.imgUrl,alt:"",style:{width:"100%",height:"100%"}},null,8,ue)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","direction"])],64)}}});const de=Y(ce,[["__scopeId","data-v-1bf13ec8"]]);export{de as default};
