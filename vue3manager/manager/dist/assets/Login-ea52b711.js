import{d as k,B as g,k as h,s as B,c as I,a as t,w as a,g as r,o as L,u as o,C as N,D as F,i as H,n as S,f as U,E as $,G as j,y as q,z as O,m as w}from"./index-af70c94f.js";import{g as R}from"./getTime-c4315f50.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";const V=n=>(q("data-v-265b5411"),n=n(),O(),n),z={class:"login-wrap"},D=V(()=>w("h1",null,"Hello",-1)),G=V(()=>w("h2",null,"权限管理后台",-1)),M=k({__name:"Login",setup(n){let l=g({username:"",password:""}),d=h(),v=g({username:[{validator:(p,e,s)=>{e.length>=5&&e.length<=10?s():s(new Error("账号长度应该在5到10捏"))},trigger:"change"}],password:[{validator:(p,e,s)=>{e.length>=6&&e.length<=10?s():s(new Error("密码长度应该在6到10捏"))},trigger:"change"}]}),i=h(!1),_=S(),x=B(),c=U(),y=async()=>{await d.value.validate(),i.value=!0;try{await x.loginHandle(l),$({title:"Hi",message:`${R()}好`,position:"top-right",type:"success"}),i.value=!1,c.query.redirect?_.push({path:c.query.redirect}):_.push("/home")}catch(p){i.value=!1,j({message:p.message,grouping:!0,type:"error"})}};return(p,e)=>{const s=r("el-col"),m=r("el-input"),f=r("el-form-item"),C=r("el-button"),E=r("el-form"),b=r("el-row");return L(),I("div",z,[t(b,null,{default:a(()=>[t(s,{span:12,xs:{span:0}}),t(s,{span:12,xs:{span:24}},{default:a(()=>[t(E,{class:"login-form",model:o(l),rules:o(v),ref_key:"loginForm",ref:d},{default:a(()=>[D,G,t(f,{prop:"username"},{default:a(()=>[t(m,{modelValue:o(l).username,"onUpdate:modelValue":e[0]||(e[0]=u=>o(l).username=u),placeholder:"请输入账号","prefix-icon":o(N)},null,8,["modelValue","prefix-icon"])]),_:1}),t(f,{prop:"password"},{default:a(()=>[t(m,{modelValue:o(l).password,"onUpdate:modelValue":e[1]||(e[1]=u=>o(l).password=u),placeholder:"请输入密码","show-password":"","prefix-icon":o(F)},null,8,["modelValue","prefix-icon"])]),_:1}),t(C,{type:"primary",onClick:o(y),loading:o(i)},{default:a(()=>[H(" 登录 ")]),_:1},8,["onClick","loading"])]),_:1},8,["model","rules"])]),_:1})]),_:1})])}}});const W=T(M,[["__scopeId","data-v-265b5411"]]);export{W as default};
