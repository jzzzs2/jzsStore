<!--
 * @Descripttion: 
 * @version: 
 * @Author: sueRimn
 * @Date: 2022-10-08 20:49:05
 * @LastEditors: sueRimn
 * @LastEditTime: 2022-10-08 21:13:58
-->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>表单输入实时验证</title>
  <style>
    input {
      outline: none;
    }
    .error {
      border: 1px solid red;
    }

    .safe {
      border: 1px solid green;
    }
  </style>
</head>
<body>
  请输入电话号码捏:<input type="text" name="phone" data-reg="^1[3-9]\d{9}$"><br>
  请输入用户名捏:<input type="text" name="user" data-reg="^[\u4e00-\u9fa5]{2,6}$"><br>
  请输入密码捏:<input type="text" name="pwd" data-reg="^\d{6}$"><br>
  请输入年龄捏:<input type="text" name="age" data-reg="[1-9][0-9]"><br>
  <script>
    var regMap = {
      phone: /^1[3-9]\d{9}$/,
      user: /^[\u4e00-\u9fa5]{2,6}$/,
      pwd: /^\d{6}$/,
      age: /[1-9][0-9]/
    }

    // document.oninput = function (e) {
    //   if (e.target.tagName.toLowerCase() === "input") {
    //       e.target.className = "error";
    //     if (regMap[e.target.name].test(e.target.value)) {
    //       e.target.className = "sa4fe";
    //     }
    //   }
    // }
    document.oninput = function (e) {
      if (e.target.tagName.toLowerCase() === "input") {
          e.target.className = "error";
          var regExp = new RegExp(e.target.dataset.reg);
          console.log(e.target.value);
          if (regExp.test(e.target.value)) {
          
            e.target.className = "safe";
          }
        // if (regMap[e.target.name].test(e.target.value)) {
        //   e.target.className = "safe";
        // }
      }
    }
    var regExp = new RegExp("\d");
    console.log(regExp.test("d")); //true
    console.log(regExp.test("2")); //false
  </script>
</body>
</html>