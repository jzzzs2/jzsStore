<!--
 * @Descripttion: 
 * @version: 
 * @Author: sueRimn
 * @Date: 2022-11-16 17:37:34
 * @LastEditors: sueRimn
 * @LastEditTime: 2022-11-16 20:59:27
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>楼梯导航</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }

    ul {
      list-style: none;
    }

    .wrap {
      min-width: 1000px;
      margin: 0 auto;
    }

    header {
      height: 300px;
      color: cyan;
      text-align: center;
    }

    footer {
      color: #368;
      text-align: center;
    }

    section {
      width: 1000px;
      margin: 10px auto;
      color: #fff;
      font-size: 30px;
      text-align: center;

    }

    section:nth-of-type(odd) {
      height: 380px;
      background-color: rgb(23, 102, 175);
    }

    section:nth-of-type(even) {
      height: 400px;
      background-color: rgb(228, 105, 35);
    }

    main {
      position: relative;
    }

    .slide-nav {
      position: absolute;
      top: 380px;
      width: 60px;
      height: 360px;
      border-radius: 8px;
      box-shadow: 0 0 2px #999;
    }

    .slide-nav li {
      padding: 8px 4px;
      text-align: center;
      font-size: 14px;
      user-select: none;
    }

    .slide-nav li:hover {
      background-color: #00a1d6;
      color: #FFF;
    }

    .wrap section:nth-of-type(4) {
      height: 1100px;
    }

    .active {
      background-color: #00a1d6;
      color: #FFF;
    }

    footer {
      height: 700px;
    }
  </style>
</head>

<body>
  <header>header</header>
  <main class="wrap">
    <section>动画</section>
    <section>游戏</section>
    <section>音乐</section>
    <section>知识</section>
    <section>国创</section>
    <section>漫画</section>
    <section>科技</section>
    <section>户外</section>
    <section>记录</section>
    <div class="slide-nav">
      <ul>
        <li class="active">动画</li>
        <li>游戏</li>
        <li>音乐</li>
        <li>知识</li>
        <li>国创</li>
        <li>漫画</li>
        <li>科技</li>
        <li>户外</li>
        <li>记录</li>
      </ul>
    </div>
  </main>

  <footer>footer</footer>
  <script src="http://code.jquery.com/jquery-1.12.1.min.js"></script>
  <script>
    let $sec = $("section");
    let ht = $("section").eq(0).outerHeight();
    let $slide = $(".slide-nav");
    let $li = $(".slide-nav li");
    let index = 0;
    //电梯栏初始位置
    $slide.css({
      "left": window.innerWidth / 2 + 510 + "px"
    })
    //
    $(window).scroll(function (e) {
      // 实现电梯栏 位置变更
      if ($(window).scrollTop() >= ht) {
        $slide.css({
          position: "fixed",
          top: window.innerHeight / 2 - $slide.height() / 2 + "px"
        })
      } else {
        $slide.css({
          position: "absolute",
          top: ht + "px"
        })
      }
      //实现电梯栏中状态随着滚轮滚动改变
      // console.log($(window).scrollTop(), "scrollTop");
      // console.log($sec.eq(index).offset().top, "offset().top");
      // console.log($sec.eq(index).outerHeight() / 3, "1/3 height");
      if ($(window).scrollTop() >= $sec.eq(index).offset().top + ($sec.eq(index).outerHeight() / 3)) {
        index = index + 1;
        index = Math.max(0, Math.min(8, index));
        console.log(index);
        // $li.eq(index).addClass("active").siblings("li").removeClass("active");
      }
      //
      console.log($sec.eq(index).offset().top,$(window).scrollTop(),$(window).innerHeight());
      if ($sec.eq(index).offset().top >= $(window).scrollTop() + ($(window).innerHeight() / 2)) {
        console.log(index); //2
        $li.eq(index).removeClass("active");
        index = index - 1;
        index = Math.max(0, Math.min(8, index));
        // $li.eq(index).addClass("active").siblings("li").removeClass("active");
      }
      $li.eq(index).addClass("active").siblings("li").removeClass("active");
    })
    //
    $li.click(function (e) {
      index = $(this).index();
      // console.log(index);
      let top = $("section").eq(index).offset().top - ($("section").eq(index).innerHeight() / 3);
      $("html,body").animate({
        scrollTop: top
      }, 500)
      // $li.eq(index).addClass("active").siblings("li").removeClass("active");
    })
  </script>
</body>

</html>